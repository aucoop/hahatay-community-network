{"version":3,"sources":["webpack:///./src/components/SectionTitle.vue?ddb0","webpack:///./node_modules/moment/locale sync ^\\.\\/.*$","webpack:///./src/components/TagModal.vue?bef0","webpack:///./src/components/Envelope.vue?8651","webpack:///./src/components/EnvelopeList.vue?6a7b","webpack:///./src/components/Loading.vue?8ca9","webpack:///./src/components/EmptyMailboxSection.vue?7d59","webpack:///./src/components/Mailbox.vue?1e35","webpack:///./src/components/ComposerAttachments.vue?e6e8","webpack:///./src/components/MailvelopeEditor.vue?2c0c","webpack:///./src/components/Composer.vue?8f4a","webpack:///./src/components/NoMessageSelected.vue?40be","webpack:///./src/components/RecipientBubble.vue?194a","webpack:///./src/components/itinerary/EventReservation.vue?de14","webpack:///./src/components/itinerary/FlightReservation.vue?e045","webpack:///./src/components/itinerary/TrainReservation.vue?a8f5","webpack:///./src/components/MessageAttachment.vue?8b9c","webpack:///./src/components/MessageAttachments.vue?dd20","webpack:///./src/components/MdnRequest.vue?cb30","webpack:///./src/components/MessageEncryptedBody.vue?6f6d","webpack:///./src/components/MessageHTMLBody.vue?822a","webpack:///./src/components/MessagePlainTextBody.vue?13b4","webpack:///./src/components/MessagePlainTextBody.vue?cb2e","webpack:///./src/components/Message.vue?d01f","webpack:///./src/components/MenuEnvelope.vue?6ed1","webpack:///./src/components/ThreadEnvelope.vue?d9a0","webpack:///./src/components/Thread.vue?8bde","webpack:///./src/components/MailboxThread.vue?670d","webpack:///./src/views/Home.vue?8c60","webpack:///./src/views/Home.vue?7e4c","webpack:///./src/components/SectionTitle.vue?9080","webpack:///src/components/SectionTitle.vue","webpack:///./src/components/SectionTitle.vue?b005","webpack:///./src/components/SectionTitle.vue","webpack:///./src/components/SectionTitle.vue?b57d","webpack:///./src/directives/infinite-scroll.js","webpack:///./src/components/EmptyMailbox.vue?abca","webpack:///src/components/EmptyMailbox.vue","webpack:///./src/components/EmptyMailbox.vue","webpack:///./src/components/EmptyMailbox.vue?4ad4","webpack:///./src/directives/drag-and-drop/draggable-envelope/draggable-envelope.js","webpack:///./src/directives/drag-and-drop/draggable-envelope/index.js","webpack:///./src/ReplyBuilder.js","webpack:///./src/components/MoveModal.vue?4efc","webpack:///src/components/MoveModal.vue","webpack:///./src/components/MoveModal.vue","webpack:///./src/components/MoveModal.vue?f478","webpack:///src/components/TagModal.vue","webpack:///./src/components/TagModal.vue?247f","webpack:///./src/components/TagModal.vue?5c4b","webpack:///./src/components/TagModal.vue","webpack:///./src/components/TagModal.vue?e2fe","webpack:///./src/components/Envelope.vue?f968","webpack:///src/components/Envelope.vue","webpack:///./src/components/Envelope.vue?56cb","webpack:///./src/components/Envelope.vue","webpack:///./src/components/Envelope.vue?aacc","webpack:///./src/components/EnvelopeList.vue?f5c3","webpack:///src/components/EnvelopeList.vue","webpack:///./src/components/EnvelopeList.vue?4ae5","webpack:///./src/components/EnvelopeList.vue","webpack:///./src/components/EnvelopeList.vue?9660","webpack:///./src/util/CrashReport.js","webpack:///src/components/Error.vue","webpack:///./src/components/Error.vue?1fd4","webpack:///./src/components/Error.vue","webpack:///./src/components/Error.vue?eea6","webpack:///./src/components/Loading.vue?8bea","webpack:///src/components/Loading.vue","webpack:///./src/components/Loading.vue?5975","webpack:///./src/components/Loading.vue","webpack:///./src/components/Loading.vue?64ca","webpack:///./src/components/EmptyMailboxSection.vue?805c","webpack:///src/components/EmptyMailboxSection.vue","webpack:///./src/components/EmptyMailboxSection.vue?a41b","webpack:///./src/components/Mailbox.vue?99b2","webpack:///src/components/Mailbox.vue","webpack:///./src/components/EmptyMailboxSection.vue","webpack:///./src/components/EmptyMailboxSection.vue?1a0c","webpack:///./src/components/Mailbox.vue?efd7","webpack:///./src/components/Mailbox.vue","webpack:///./src/components/Mailbox.vue?cb65","webpack:///./src/dav/client.js","webpack:///./src/service/FileService.js","webpack:///./src/service/AttachmentService.js","webpack:///src/components/ComposerAttachments.vue","webpack:///./src/components/ComposerAttachments.vue?8b74","webpack:///./src/service/FileSharingService.js","webpack:///./src/components/ComposerAttachments.vue?50f3","webpack:///./src/components/ComposerAttachments.vue","webpack:///./src/components/ComposerAttachments.vue?4dbb","webpack:///./src/crypto/pgp.js","webpack:///src/components/MailvelopeEditor.vue","webpack:///./src/components/MailvelopeEditor.vue?5039","webpack:///./src/components/MailvelopeEditor.vue?30fc","webpack:///./src/components/MailvelopeEditor.vue","webpack:///./src/components/MailvelopeEditor.vue?f2b7","webpack:///./src/crypto/mailvelope.js","webpack:///src/components/Composer.vue","webpack:///./src/service/AutocompleteService.js","webpack:///./src/components/Composer.vue?b085","webpack:///./src/components/Composer.vue?d291","webpack:///./src/components/Composer.vue","webpack:///./src/components/Composer.vue?9a99","webpack:///./src/util/ErrorMessageFactory.js","webpack:///./src/components/NewMessageDetail.vue?15b4","webpack:///src/components/NewMessageDetail.vue","webpack:///./src/components/NewMessageDetail.vue","webpack:///./src/components/NewMessageDetail.vue?d2ab","webpack:///./src/components/NoMessageSelected.vue?7c7e","webpack:///src/components/NoMessageSelected.vue","webpack:///./src/components/NoMessageSelected.vue?c50a","webpack:///./src/components/NoMessageSelected.vue","webpack:///./src/components/NoMessageSelected.vue?6fae","webpack:///./src/service/ContactIntegrationService.js","webpack:///src/components/RecipientBubble.vue","webpack:///./src/components/RecipientBubble.vue?07c8","webpack:///./src/components/RecipientBubble.vue?9428","webpack:///./src/components/RecipientBubble.vue","webpack:///./src/components/RecipientBubble.vue?9112","webpack:///./src/service/DAVService.js","webpack:///./src/components/itinerary/EventReservation.vue?0586","webpack:///./src/components/itinerary/CalendarImport.vue?ef70","webpack:///src/components/itinerary/CalendarImport.vue","webpack:///./src/components/itinerary/CalendarImport.vue","webpack:///./src/components/itinerary/CalendarImport.vue?515a","webpack:///./src/components/itinerary/EventReservation.vue?f93a","webpack:///src/components/itinerary/EventReservation.vue","webpack:///./src/components/itinerary/EventReservation.vue?5c08","webpack:///./src/components/itinerary/EventReservation.vue","webpack:///./src/components/itinerary/FlightReservation.vue?a2ae","webpack:///src/components/itinerary/FlightReservation.vue","webpack:///./src/components/itinerary/FlightReservation.vue?e5a5","webpack:///./src/components/itinerary/FlightReservation.vue","webpack:///./src/components/itinerary/FlightReservation.vue?5894","webpack:///./src/components/itinerary/TrainReservation.vue?a40c","webpack:///src/components/itinerary/TrainReservation.vue","webpack:///./src/components/itinerary/TrainReservation.vue?000b","webpack:///./src/components/itinerary/TrainReservation.vue","webpack:///./src/components/itinerary/TrainReservation.vue?9424","webpack:///src/components/Itinerary.vue","webpack:///./src/components/Itinerary.vue?6d2b","webpack:///./src/components/Itinerary.vue","webpack:///./src/components/Itinerary.vue?c67f","webpack:///./src/components/MessageAttachment.vue?426a","webpack:///src/components/MessageAttachment.vue","webpack:///./src/components/MessageAttachment.vue?861d","webpack:///./src/components/MessageAttachments.vue?43cf","webpack:///src/components/MessageAttachments.vue","webpack:///./src/components/MessageAttachment.vue","webpack:///./src/components/MessageAttachment.vue?4040","webpack:///./src/components/MessageAttachments.vue?eab8","webpack:///./src/components/MessageAttachments.vue","webpack:///./src/components/MessageAttachments.vue?c67f","webpack:///./src/components/MdnRequest.vue?df6a","webpack:///src/components/MdnRequest.vue","webpack:///./src/components/MdnRequest.vue?badb","webpack:///./src/components/MdnRequest.vue","webpack:///./src/components/MdnRequest.vue?511c","webpack:///./src/components/MessageEncryptedBody.vue?d56e","webpack:///src/components/MessageEncryptedBody.vue","webpack:///./src/components/MessageEncryptedBody.vue?8cff","webpack:///./src/components/MessageEncryptedBody.vue","webpack:///./src/components/MessageEncryptedBody.vue?0d96","webpack:///src/components/MessageHTMLBody.vue","webpack:///./src/components/MessageHTMLBody.vue?aa4c","webpack:///./src/components/MessageHTMLBody.vue?5ea5","webpack:///./src/components/MessageHTMLBody.vue","webpack:///./src/components/MessageHTMLBody.vue?b42d","webpack:///src/components/MessagePlainTextBody.vue","webpack:///./src/components/MessagePlainTextBody.vue?6434","webpack:///./src/components/MessagePlainTextBody.vue?dedf","webpack:///./src/components/MessagePlainTextBody.vue?72a4","webpack:///./src/components/MessagePlainTextBody.vue","webpack:///./src/components/MessagePlainTextBody.vue?e5b1","webpack:///./src/components/Message.vue?7d74","webpack:///src/components/Message.vue","webpack:///./src/components/Message.vue?ee31","webpack:///./src/components/Message.vue","webpack:///./src/components/Message.vue?54c5","webpack:///./src/components/MenuEnvelope.vue?77d6","webpack:///src/components/MenuEnvelope.vue","webpack:///./src/components/MenuEnvelope.vue?90f6","webpack:///./src/components/MenuEnvelope.vue","webpack:///./src/components/MenuEnvelope.vue?e898","webpack:///./src/components/Moment.vue?eaed","webpack:///src/components/Moment.vue","webpack:///./src/components/ThreadEnvelope.vue?d8a2","webpack:///src/components/ThreadEnvelope.vue","webpack:///./src/components/Moment.vue","webpack:///./src/components/Moment.vue?c1e1","webpack:///./src/components/ThreadEnvelope.vue?8fc5","webpack:///./src/components/ThreadEnvelope.vue","webpack:///./src/components/ThreadEnvelope.vue?c988","webpack:///./src/components/Thread.vue?588c","webpack:///src/components/Thread.vue","webpack:///./src/components/Thread.vue?77d9","webpack:///./src/components/Thread.vue","webpack:///./src/components/Thread.vue?89fb","webpack:///./src/components/MailboxThread.vue?b046","webpack:///src/components/MailboxThread.vue","webpack:///./src/components/MailboxThread.vue?8696","webpack:///./src/components/MailboxThread.vue","webpack:///./src/components/MailboxThread.vue?5332","webpack:///./src/views/Home.vue?8c94","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?75d6","webpack:///./src/views/Home.vue","webpack:///./src/service/AvatarService.js","webpack:///./src/components/Avatar.vue?959d","webpack:///./src/components/Avatar.vue?0735","webpack:///src/components/Avatar.vue","webpack:///./src/components/Avatar.vue","webpack:///./img/important.svg"],"names":["___CSS_LOADER_EXPORT___","push","module","i","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","exports","options","locals","_h","this","$createElement","_c","_self","attrs","staticClass","_v","_s","name","ctx","getScrollTop","element","window","Math","max","pageYOffset","document","documentElement","scrollTop","getComputedStyle","defaultView","getElementTop","getBoundingClientRect","top","isAttached","currentNode","parentNode","tagName","nodeType","doBind","binded","fn","delay","now","lastExec","timer","context","args","execute","directive","el","throttleDelayExpr","getAttribute","throttleDelay","Number","vm","isNaN","scrollEventTarget","overflowY","getScrollEventTarget","scrollListener","doCheck","bind","apply","arguments","Date","clearTimeout","diff","setTimeout","addEventListener","$on","removeEventListener","disabledExpr","disabled","$watch","value","immediateCheck","call","Boolean","distanceExpr","distance","immediateCheckExpr","eventName","force","viewportScrollTop","viewportBottom","clientHeight","getVisibleHeight","shouldTrigger","scrollHeight","offsetHeight","expression","binding","vnode","console","info","$nextTick","bindTryCount","tryBind","unbind","t","DraggableEnvelope","constructor","componentInstance","registerListeners","setInitialAttributes","setAttribute","classList","add","update","instance","onDragStart","onDragEnd","removeListeners","event","accountId","mailboxId","selectedEnvelopes","dataTransfer","clearData","effectAllowed","envelopes","length","forEach","envelope","index","envelopeId","databaseId","draggableLabel","subject","from","label","setData","JSON","stringify","attachGhost","dragEventBus","$emit","itemCount","baseClass","dragNode","createElement","counterNode","textCountNode","createTextNode","appendChild","labelWrapperNode","labelNode","textLabelNode","body","setDragImage","defer","removeChild","instances","DraggableEnvelopeDirective","componentUpdated","filter","buildReplyBody","original","date","replyOnTop","startEnd","plainBody","replace","htmlBody","quoteStart","format","dateString","moment","unix","html","email","RecipientType","seal","None","To","Cc","buildRecipients","ownAddress","recipientType","isOwnAddress","a","isNotOwnAddress","negate","replyingAddress","to","find","undefined","cc","concat","replyPrepends","buildReplySubject","some","prepend","toLowerCase","startsWith","forwardPrepends","_vm","account","destMailboxId","moving","moveThread","on","$event","onMove","onClose","randomColor","_l","tag","key","style","color","convertHex","displayName","isSet","imapLabel","removeTag","addTag","editing","_e","addTagInput","createTag","directives","rawName","data","mailbox","class","seen","flags","draft","selected","link","addresses","formatted","scopedSlots","_u","accountColor","flagged","preventDefault","onToggleFlagged","isImportant","domProps","importantSvg","onToggleImportant","junk","onToggleJunk","avatarEmail","ctrlKey","shiftKey","altKey","metaKey","toggleSelected","onSelectMultiple","proxy","hasAttachments","onToggleSeen","onOpenTagModal","onOpenMoveModal","params","$route","threadId","query","messageId","onDelete","onCloseMoveModal","onCloseTagModal","markSelectedSeenOrUnseen","areAllSelectedRead","n","selection","number","favoriteOrUnfavoriteAll","areAllSelectedFavorite","unselectAll","isUnified","forwardSelectedAsAttachment","deleteAllSelected","refreshing","env","includes","selectMode","onEnvelopeSelectToggle","onEnvelopeSelectMultiple","loadMoreButton","loadingMore","searchQuery","flattenTrace","trace","reduce","acc","entry","text","function","file","line","getReportUrl","error","message","endsWith","template","IssueTemplateBuilder","addEmptyStepsToReproduce","addExpectedActualBehaviour","addLogs","type","stack","flattenError","render","encodeURIComponent","debug","reportUrl","hint","slowHint","slow","_t","isPriorityInbox","hasMessages","envelopesToShow","showLoadMore","loadMore","getClient","memoize","service","axios","defaults","headers","webdav","patch","generateRemoteUrl","getCurrentUser","uid","async","getFileSize","path","response","stat","details","props","size","saveAttachmentToFiles","attachmentId","directory","url","generateUrl","Axios","post","targetPath","progress","FormData","opts","onUploadProgress","prog","loaded","total","append","then","resp","token","generateOcsUrl","shareType","shareWith","ocs","meta","showError","attachment","uploading","percent","uploadProgress","ref","staticStyle","onLocalAttachmentSelected","isPgpgMessage","mailvelope","getMailvelope","logger","Promise","debouncedSearch","term","get","STATES","state","EDITING","selectedAlias","aliases","formatAliases","onAliasChange","selectableRecipients","onInputChanged","onNewToAddr","onAutocomplete","model","callback","$$v","selectTo","showCC","onNewCcAddr","selectCc","slot","onNewBccAddr","selectBcc","target","composing","subjectVal","keysMissing","recipients","join","encrypt","editorPlainText","isReply","bus","bodyVal","allRecipients","isForward","attachmentSizeLimit","onAttachmentsUploading","attachments","canSaveDraft","savingDraft","onAddLocalAttachment","onAddCloudAttachment","onAddCloudAttachmentLink","addShareLink","editorMode","requestMdn","canSend","submitButtonTitle","onSend","UPLOADING","SENDING","ERROR","errorText","WARNING","onForceSend","reset","smileys","getRandomSmiley","floor","random","getRandomMessageErrorMessage","texts","errorMessage","composerData","bcc","saveDraft","sendMessage","replyTo","forwardFrom","ContactSelectionStateEnum","freeze","mail","mailAddr","put","contactName","avatarUrlAbsolute","onClickOpenContactDialog","contactsWithEmail","contactsWithEmailComputed","select","onClickReply","existing","new","selectableContacts","selectedContact","newContactName","addButtonDisabled","onClickAddToContact","canWrite","properties","acls","acl","ace","Array","isArray","grant","privilege","write","getCalendarData","calendar","displayname","order","components","vevent","writable","filename","getUserCalendars","getDirectoryContents","getRandomString","str","toString","substring","createICalElement","root","ical","Component","updatePropertyWithValue","OC","theme","importCalendarEvent","Logger","promises","timezones","allObjects","jCal","parse","getAllSubcomponents","vtimezone","componentNames","componentName","vobjects","vobject","getFirstPropertyValue","split","objectsId","objects","component","addSubcomponent","objectId","splitCalendar","componentId","all","calendars","idx","loading","onImport","location","time","handleImport","reservationFor","departureAirport","iataCode","departureDate","departureTime","flightNumber","reservation","arrivalAirport","arrivalDate","arrivalTime","departureStation","trainNumber","arrivalStation","getUserCalendarsOnce","res","download","mimeUrl","humanReadable","loadingCalendars","stopPropagation","loadCalendars","savingToCloud","saveToCloud","open","showCalendarPopover","calendarMenuEntries","fileName","downloadUrl","isImage","isCalendarEvent","mime","saveAll","downloadZip","hasMdnRequest","mdnSent","sendMdn","scout","displayIframe","onShowBlockedContent","sender","onShowBlockedContentForDomain","domain","getDomain","hidden","scroll","fullHeight","onMessageFrameLoad","regFirstParagraph","nl2br","enhancedBody","signatureSummaryAndBody","summary","hasHtmlBody","itineraries","htmlUrl","signature","nativeOn","hasMultipleRecipients","replyAllLink","replyOneLink","forwardLink","iconFavorite","isSelected","sourceLoading","onShowSourceModal","threadingFileName","threadingFile","onCloseSourceModal","rawMessage","timestamp","title","expanded","route","dateInt","primary","threadSubject","threadParticipants","slice","participantsToDisplay","participant","moreParticipantsString","expandedThreads","thread","toggleExpand","isThreadShown","hideMessage","modifiers","showThread","onShortcut","importantInfo","unifiedAccount","unifiedInbox","appendToSearch","deleteMessage","hasEnvelopes","isMobile","onNewMessage","activeAccount","activeMailbox","fetchAvatarUrlMemoized","avatar","isExternal","catch","err","status","reject","hasAvatar","disableTooltip","avatarUrl"],"mappings":"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A,4BAOA,UACA,sBAEA,UACA,qBACA,UACA,qHACA,iBAGA,cACA,uBAGA,UACA,uCACA,qCACA,6CACA,4DAEA,gBACA,qBACA,UACA,4GACA,iBAGA,YACA,wCACA,sCACA,8CACA,qBAEA,SACA,kBACA,mCACA,cAEA,2HACA,cACA,UACA,mCAEA,wBAGA,sBACA,4HACA,yBACA,mCACA,cAEA,IACA,qDACA,kCACA,uBACA,6BAMA,GAHA,uDAEA,yBACA,0EAEA,aAIA,gFACA,4DACA,sBACA,eACA,QACA,uCACA,kEACA,eACA,wBAIA,sBACA,eACA,QACA,uCACA,kEACA,0BAKA,eACA,gBACA,2BACA,iHAEA,yBAEA,sBAEA,2BACA,uIACA,yBAEA,UACA,uBACA,SACA,gIACA,eAGA,YACA,+HACA,yBACA,kBAKA,iBACA,kBAGA,OAFA,0CACA,kBAIA,yCACA,oBAEA,IAKA,WAJA,8CACA,kCACA,0BAEA,SACA,sCACA,oBAEA,SACA,0DAVA,QAYA,sBAGA,wBACA,uBACA,2CAEA,8BACA,eACA,MAQA,OANA,yBACA,4DACA,kBAIA,UACA,WACA,WAOA,GALA,EADA,kBACA,OAEA,QAGA,EAMA,YALA,sEACA,YACA,MACA,kBAOA,mBACA,eACA,QACA,uCACA,kEACA,yBAGA,MACA,UACA,8BACA,4BACA,UACA,qCACA,aAEA,SACA,uCACA,MACA,UAGA,kCACA,qBACA,wCAEA,YACA,wCAKA,MACA,WACA,oDACA,yDACA,kDACA,MACA,WAGA,MACA,cACA,6GACA,cAEA,MACA,aACA,iEACA,iEACA,iEACA,MACA,WAGA,MACA,QACA,0DAGA,iBACA,mBACA,gIADA,CAKA,mBACA,UACA,sCACA,kCACA,uBACA,SAEA,SACA,gBACA,oBACA,mFAEA,WACA,sEAZA,QAgBA,mBACA,sHAKA,YAEA,2CACA,kCACA,uBACA,aAEA,kEACA,UAEA,YADA,gEAGA,mCAEA,YADA,0EAIA,oCACA,EAOA,mBACA,eACA,QACA,uCACA,kEACA,yBAXA,wDAeA,WACA,yBAKA,gBAJA,yCAMA,oBAEA,+D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OALA,eAGA,oBAEA,CACA,wBACA,eA/EqB,EAgFrB,gEACA,iBACA,wBACA,UACA,eACA,yFACA,gCACA,qCACA,gBACA,mBACA,4CACA,iBACA,iBACA,UACA,iBACA,iBACA,mBACA,kBACA,WACA,YACA,aACA,eACA,gBAEA,kBACA,+MACA,cACA,qBAGA,UACA,UACA,QA0BA,OAzBA,qDACA,YACA,CACA,QACA,aACA,aACA,wBACA,sBACA,YACA,4BACA,2CAEA,kBACA,CACA,QACA,aACA,aACA,wBACA,sBACA,YACA,qBACA,+CAIA,QAEA,gBACA,mEAEA,sBACA,mEAEA,uBACA,0BACA,oCACA,yCAEA,YACA,kCAEA,UACA,8BAEA,UACA,6DAIA,0EAEA,kBACA,qCAEA,oBACA,iCAIA,6GAHA,sCAMA,OACA,2BACA,cAEA,gBACA,4BAEA,WAEA,GADA,kCAvLqB,IAwLrB,mBACA,OAGA,6FACA,MAEA,yBAGA,wBAIA,oBACA,gBACA,sBAEA,qCAEA,gBACA,cACA,+BAIA,iCACA,mBACA,SACA,qCAEA,UAEA,sBAKA,oEACA,yCACA,uBACA,oBACA,iCACA,QACA,sCACA,8BAMA,SACA,gFACA,wCACA,iFACA,uCAEA,cACA,2CACA,EAQA,uBACA,6BACA,KACA,iBATA,2EACA,WAYA,gBACA,8BAEA,kEAEA,SACA,WACA,2BACA,iBACA,iEAEA,oCA7QqB,IA+QrB,IACA,gDAGA,4BACA,6CACA,OAGA,2CACA,sDACA,kEACA,oDAEA,WAEA,MAEA,EADA,aACA,GACA,qEACA,qBACA,qBACA,+DACA,MACA,iBACA,GACA,qEACA,yBACA,yBACA,+DACA,MAEA,aAEA,oCAEA,qBACA,mBAGA,cAGA,kCAJA,QASA,8CAGA,kBACA,OACA,8BACA,mCACA,wDACA,wDACA,0DACA,UACA,wBACA,wEACA,6BACA,sDACA,6BACA,6BAGA,aA8CA,OA7CA,oBACA,sCACA,SACA,aACA,OACA,GACA,WACA,QACA,MACA,OACA,KASA,eAJA,8DACA,oBACA,KAIA,SAEA,qBAEA,IAEA,gBACA,8CACA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","file":"mail.9.4aab34361cf4c523d8f9.js","sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n#priority[data-v-95f06344] {\\n\\tdisplay: inline-block;\\n}\\n.app-content-list-item[data-v-95f06344]:hover {\\n\\tbackground-color: transparent;\\n\\topacity: 0.8;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/SectionTitle.vue\"],\"names\":[],\"mappings\":\";AAyCA;CACA,qBAAA;AACA;AACA;CACA,6BAAA;CACA,YAAA;AACA\",\"sourcesContent\":[\"<!--\\n  - @copyright 2020 Greta Doçi <gretadoci@gmail.com>\\n  -\\n  - @author 2020 Greta Doçi <gretadoci@gmail.com>\\n  -\\n  - @license GNU AGPL version 3 or any later version\\n  -\\n  - This program is free software: you can redistribute it and/or modify\\n  - it under the terms of the GNU Affero General Public License as\\n  - published by the Free Software Foundation, either version 3 of the\\n  - License, or (at your option) any later version.\\n  -\\n  - This program is distributed in the hope that it will be useful,\\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n  - GNU Affero General Public License for more details.\\n  -\\n  - You should have received a copy of the GNU Affero General Public License\\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\\n  -->\\n\\n<template>\\n\\t<div id=\\\"priority\\\">\\n\\t\\t<div class=\\\"app-content-list-item\\\">\\n\\t\\t\\t<h2>{{ name }}</h2>\\n\\t\\t</div>\\n\\t</div>\\n</template>\\n<script>\\nexport default {\\n\\tname: 'SectionTitle',\\n\\tprops: {\\n\\t\\tname: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n#priority {\\n\\tdisplay: inline-block;\\n}\\n.app-content-list-item:hover {\\n\\tbackground-color: transparent;\\n\\topacity: 0.8;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var map = {\n\t\"./af\": 846,\n\t\"./af.js\": 846,\n\t\"./ar\": 847,\n\t\"./ar-dz\": 848,\n\t\"./ar-dz.js\": 848,\n\t\"./ar-kw\": 849,\n\t\"./ar-kw.js\": 849,\n\t\"./ar-ly\": 850,\n\t\"./ar-ly.js\": 850,\n\t\"./ar-ma\": 851,\n\t\"./ar-ma.js\": 851,\n\t\"./ar-sa\": 852,\n\t\"./ar-sa.js\": 852,\n\t\"./ar-tn\": 853,\n\t\"./ar-tn.js\": 853,\n\t\"./ar.js\": 847,\n\t\"./az\": 854,\n\t\"./az.js\": 854,\n\t\"./be\": 855,\n\t\"./be.js\": 855,\n\t\"./bg\": 856,\n\t\"./bg.js\": 856,\n\t\"./bm\": 857,\n\t\"./bm.js\": 857,\n\t\"./bn\": 858,\n\t\"./bn.js\": 858,\n\t\"./bo\": 859,\n\t\"./bo.js\": 859,\n\t\"./br\": 860,\n\t\"./br.js\": 860,\n\t\"./bs\": 861,\n\t\"./bs.js\": 861,\n\t\"./ca\": 862,\n\t\"./ca.js\": 862,\n\t\"./cs\": 863,\n\t\"./cs.js\": 863,\n\t\"./cv\": 864,\n\t\"./cv.js\": 864,\n\t\"./cy\": 865,\n\t\"./cy.js\": 865,\n\t\"./da\": 866,\n\t\"./da.js\": 866,\n\t\"./de\": 867,\n\t\"./de-at\": 868,\n\t\"./de-at.js\": 868,\n\t\"./de-ch\": 869,\n\t\"./de-ch.js\": 869,\n\t\"./de.js\": 867,\n\t\"./dv\": 870,\n\t\"./dv.js\": 870,\n\t\"./el\": 871,\n\t\"./el.js\": 871,\n\t\"./en-SG\": 872,\n\t\"./en-SG.js\": 872,\n\t\"./en-au\": 873,\n\t\"./en-au.js\": 873,\n\t\"./en-ca\": 874,\n\t\"./en-ca.js\": 874,\n\t\"./en-gb\": 875,\n\t\"./en-gb.js\": 875,\n\t\"./en-ie\": 876,\n\t\"./en-ie.js\": 876,\n\t\"./en-il\": 877,\n\t\"./en-il.js\": 877,\n\t\"./en-nz\": 878,\n\t\"./en-nz.js\": 878,\n\t\"./eo\": 879,\n\t\"./eo.js\": 879,\n\t\"./es\": 880,\n\t\"./es-do\": 881,\n\t\"./es-do.js\": 881,\n\t\"./es-us\": 882,\n\t\"./es-us.js\": 882,\n\t\"./es.js\": 880,\n\t\"./et\": 883,\n\t\"./et.js\": 883,\n\t\"./eu\": 884,\n\t\"./eu.js\": 884,\n\t\"./fa\": 885,\n\t\"./fa.js\": 885,\n\t\"./fi\": 886,\n\t\"./fi.js\": 886,\n\t\"./fo\": 887,\n\t\"./fo.js\": 887,\n\t\"./fr\": 888,\n\t\"./fr-ca\": 889,\n\t\"./fr-ca.js\": 889,\n\t\"./fr-ch\": 890,\n\t\"./fr-ch.js\": 890,\n\t\"./fr.js\": 888,\n\t\"./fy\": 891,\n\t\"./fy.js\": 891,\n\t\"./ga\": 892,\n\t\"./ga.js\": 892,\n\t\"./gd\": 893,\n\t\"./gd.js\": 893,\n\t\"./gl\": 894,\n\t\"./gl.js\": 894,\n\t\"./gom-latn\": 895,\n\t\"./gom-latn.js\": 895,\n\t\"./gu\": 896,\n\t\"./gu.js\": 896,\n\t\"./he\": 897,\n\t\"./he.js\": 897,\n\t\"./hi\": 898,\n\t\"./hi.js\": 898,\n\t\"./hr\": 899,\n\t\"./hr.js\": 899,\n\t\"./hu\": 900,\n\t\"./hu.js\": 900,\n\t\"./hy-am\": 901,\n\t\"./hy-am.js\": 901,\n\t\"./id\": 902,\n\t\"./id.js\": 902,\n\t\"./is\": 903,\n\t\"./is.js\": 903,\n\t\"./it\": 904,\n\t\"./it-ch\": 905,\n\t\"./it-ch.js\": 905,\n\t\"./it.js\": 904,\n\t\"./ja\": 906,\n\t\"./ja.js\": 906,\n\t\"./jv\": 907,\n\t\"./jv.js\": 907,\n\t\"./ka\": 908,\n\t\"./ka.js\": 908,\n\t\"./kk\": 909,\n\t\"./kk.js\": 909,\n\t\"./km\": 910,\n\t\"./km.js\": 910,\n\t\"./kn\": 911,\n\t\"./kn.js\": 911,\n\t\"./ko\": 912,\n\t\"./ko.js\": 912,\n\t\"./ku\": 913,\n\t\"./ku.js\": 913,\n\t\"./ky\": 914,\n\t\"./ky.js\": 914,\n\t\"./lb\": 915,\n\t\"./lb.js\": 915,\n\t\"./lo\": 916,\n\t\"./lo.js\": 916,\n\t\"./lt\": 917,\n\t\"./lt.js\": 917,\n\t\"./lv\": 918,\n\t\"./lv.js\": 918,\n\t\"./me\": 919,\n\t\"./me.js\": 919,\n\t\"./mi\": 920,\n\t\"./mi.js\": 920,\n\t\"./mk\": 921,\n\t\"./mk.js\": 921,\n\t\"./ml\": 922,\n\t\"./ml.js\": 922,\n\t\"./mn\": 923,\n\t\"./mn.js\": 923,\n\t\"./mr\": 924,\n\t\"./mr.js\": 924,\n\t\"./ms\": 925,\n\t\"./ms-my\": 926,\n\t\"./ms-my.js\": 926,\n\t\"./ms.js\": 925,\n\t\"./mt\": 927,\n\t\"./mt.js\": 927,\n\t\"./my\": 928,\n\t\"./my.js\": 928,\n\t\"./nb\": 929,\n\t\"./nb.js\": 929,\n\t\"./ne\": 930,\n\t\"./ne.js\": 930,\n\t\"./nl\": 931,\n\t\"./nl-be\": 932,\n\t\"./nl-be.js\": 932,\n\t\"./nl.js\": 931,\n\t\"./nn\": 933,\n\t\"./nn.js\": 933,\n\t\"./pa-in\": 934,\n\t\"./pa-in.js\": 934,\n\t\"./pl\": 935,\n\t\"./pl.js\": 935,\n\t\"./pt\": 936,\n\t\"./pt-br\": 937,\n\t\"./pt-br.js\": 937,\n\t\"./pt.js\": 936,\n\t\"./ro\": 938,\n\t\"./ro.js\": 938,\n\t\"./ru\": 939,\n\t\"./ru.js\": 939,\n\t\"./sd\": 940,\n\t\"./sd.js\": 940,\n\t\"./se\": 941,\n\t\"./se.js\": 941,\n\t\"./si\": 942,\n\t\"./si.js\": 942,\n\t\"./sk\": 943,\n\t\"./sk.js\": 943,\n\t\"./sl\": 944,\n\t\"./sl.js\": 944,\n\t\"./sq\": 945,\n\t\"./sq.js\": 945,\n\t\"./sr\": 946,\n\t\"./sr-cyrl\": 947,\n\t\"./sr-cyrl.js\": 947,\n\t\"./sr.js\": 946,\n\t\"./ss\": 948,\n\t\"./ss.js\": 948,\n\t\"./sv\": 949,\n\t\"./sv.js\": 949,\n\t\"./sw\": 950,\n\t\"./sw.js\": 950,\n\t\"./ta\": 951,\n\t\"./ta.js\": 951,\n\t\"./te\": 952,\n\t\"./te.js\": 952,\n\t\"./tet\": 953,\n\t\"./tet.js\": 953,\n\t\"./tg\": 954,\n\t\"./tg.js\": 954,\n\t\"./th\": 955,\n\t\"./th.js\": 955,\n\t\"./tl-ph\": 956,\n\t\"./tl-ph.js\": 956,\n\t\"./tlh\": 957,\n\t\"./tlh.js\": 957,\n\t\"./tr\": 958,\n\t\"./tr.js\": 958,\n\t\"./tzl\": 959,\n\t\"./tzl.js\": 959,\n\t\"./tzm\": 960,\n\t\"./tzm-latn\": 961,\n\t\"./tzm-latn.js\": 961,\n\t\"./tzm.js\": 960,\n\t\"./ug-cn\": 962,\n\t\"./ug-cn.js\": 962,\n\t\"./uk\": 963,\n\t\"./uk.js\": 963,\n\t\"./ur\": 964,\n\t\"./ur.js\": 964,\n\t\"./uz\": 965,\n\t\"./uz-latn\": 966,\n\t\"./uz-latn.js\": 966,\n\t\"./uz.js\": 965,\n\t\"./vi\": 967,\n\t\"./vi.js\": 967,\n\t\"./x-pseudo\": 968,\n\t\"./x-pseudo.js\": 968,\n\t\"./yo\": 969,\n\t\"./yo.js\": 969,\n\t\"./zh-cn\": 970,\n\t\"./zh-cn.js\": 970,\n\t\"./zh-hk\": 971,\n\t\"./zh-hk.js\": 971,\n\t\"./zh-tw\": 972,\n\t\"./zh-tw.js\": 972\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1129;","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"[data-v-268a25d4] .modal-content{padding-left:20px;padding-right:20px;width:250px;max-height:calc(100vh - 210px);overflow-y:auto}.tag-title[data-v-268a25d4]{margin-top:20px;margin-left:10px}.tag-group[data-v-268a25d4]{display:block;position:relative;margin:0 1px;overflow:hidden;left:4px}.tag-actions[data-v-268a25d4]{background-color:transparent;border:none;float:right}.tag-actions[data-v-268a25d4]:hover,.tag-actions[data-v-268a25d4]:focus{opacity:.7}.tag-group__label[data-v-268a25d4]{z-index:2;font-weight:bold;border:none;background-color:transparent;padding-left:10px;padding-right:10px}.app-navigation-entry-bullet-wrapper[data-v-268a25d4]{width:44px;height:44px;display:inline-block;position:absolute;list-style:none}.app-navigation-entry-bullet-wrapper .color0[data-v-268a25d4]{width:30px !important;height:30px;border-radius:50%;background-size:14px;margin-top:-65px;margin-left:180px;z-index:2;display:flex;position:relative}.icon-colorpicker[data-v-268a25d4]{background-image:var(--icon-add-fff)}.tagButton[data-v-268a25d4]{display:inline-block;margin-left:10px}.action[data-v-268a25d4]{list-style:none}[data-v-268a25d4] .action-input{margin-left:-31px}[data-v-268a25d4] .icon-tag{background-image:none}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/TagModal.vue\"],\"names\":[],\"mappings\":\"AAoKA,iCACC,iBAAA,CACA,kBAAA,CAEA,WAAA,CACA,8BAAA,CACA,eAAA,CAED,4BACC,eAAA,CACA,gBAAA,CAED,4BACC,aAAA,CACA,iBAAA,CACA,YAAA,CACA,eAAA,CACA,QAAA,CAED,8BACC,4BAAA,CACA,WAAA,CACA,WAAA,CACA,wEAEC,UAAA,CAGF,mCACC,SAAA,CACA,gBAAA,CACA,WAAA,CACA,4BAAA,CACA,iBAAA,CACA,kBAAA,CAED,sDACC,UAAA,CACA,WAAA,CACA,oBAAA,CACA,iBAAA,CACA,eAAA,CAEA,8DACC,qBAAA,CACA,WAAA,CACA,iBAAA,CACA,oBAAA,CACA,gBAAA,CACA,iBAAA,CACA,SAAA,CACA,YAAA,CACA,iBAAA,CAGF,mCACC,oCAAA,CAED,4BACC,oBAAA,CACA,gBAAA,CAED,yBACC,eAAA,CAED,gCACC,iBAAA,CAED,4BACC,qBAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n::v-deep .modal-content {\\n\\tpadding-left: 20px;\\n\\tpadding-right: 20px;\\n\\t// modal jumps on the right when text is changed to 'remove'\\n\\twidth: 250px;\\n\\tmax-height: calc(100vh - 210px);\\n\\toverflow-y: auto;\\n}\\n.tag-title {\\n\\tmargin-top: 20px;\\n\\tmargin-left: 10px;\\n}\\n.tag-group {\\n\\tdisplay: block;\\n\\tposition: relative;\\n\\tmargin: 0 1px;\\n\\toverflow: hidden;\\n\\tleft: 4px;\\n}\\n.tag-actions {\\n\\tbackground-color: transparent;\\n\\tborder: none;\\n\\tfloat: right;\\n\\t&:hover,\\n\\t&:focus {\\n\\t\\topacity: .7;\\n\\t}\\n}\\n.tag-group__label {\\n\\tz-index: 2;\\n\\tfont-weight: bold;\\n\\tborder: none;\\n\\tbackground-color: transparent;\\n\\tpadding-left: 10px;\\n\\tpadding-right: 10px;\\n}\\n.app-navigation-entry-bullet-wrapper {\\n\\twidth: 44px;\\n\\theight: 44px;\\n\\tdisplay: inline-block;\\n\\tposition: absolute;\\n\\tlist-style: none;\\n\\n\\t.color0 {\\n\\t\\twidth: 30px !important;\\n\\t\\theight: 30px;\\n\\t\\tborder-radius: 50%;\\n\\t\\tbackground-size: 14px;\\n\\t\\tmargin-top: -65px;\\n\\t\\tmargin-left: 180px;\\n\\t\\tz-index: 2;\\n\\t\\tdisplay: flex;\\n\\t\\tposition: relative;\\n\\t}\\n}\\n.icon-colorpicker {\\n\\tbackground-image: var(--icon-add-fff);\\n}\\n.tagButton {\\n\\tdisplay: inline-block;\\n\\tmargin-left: 10px;\\n}\\n.action {\\n\\tlist-style: none;\\n}\\n::v-deep .action-input {\\n\\tmargin-left: -31px;\\n}\\n::v-deep .icon-tag {\\n\\tbackground-image: none;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".mail-message-account-color[data-v-97196126]{position:absolute;left:0px;width:2px;height:69px;z-index:1}.icon-important[data-v-97196126]  path{fill:#fc0;stroke:var(--color-main-background)}.list-item:hover .icon-important[data-v-97196126]  path,.list-item:focus .icon-important[data-v-97196126]  path,.list-item.active .icon-important[data-v-97196126]  path{stroke:var(--color-background-dark)}.icon-important.app-content-list-item-star[data-v-97196126]{background-image:none;left:7px;top:13px;opacity:1}.icon-important.app-content-list-item-star[data-v-97196126]:hover,.icon-important.app-content-list-item-star[data-v-97196126]:focus{opacity:.5}.app-content-list-item-select-checkbox[data-v-97196126]{display:inline-block;vertical-align:middle;position:absolute;left:33px;top:35px;z-index:50}.list-item-style[data-v-97196126]:not(.seen){font-weight:bold}.list-item-style.selected[data-v-97196126]{background-color:var(--color-background-dark);font-weight:bold}.icon-junk[data-v-97196126]{opacity:.2;display:flex;top:6px;left:34px;background-size:16px;height:20px;width:20px;margin:0;padding:0;position:absolute;z-index:2}list-item-style.draft .app-content-list-item-line-two[data-v-97196126]{font-style:italic}.list-item-style.active[data-v-97196126]{background-color:var(--color-primary-light);border-radius:16px}.icon-reply[data-v-97196126],.icon-attachment[data-v-97196126]{display:inline-block;vertical-align:text-top}.icon-reply[data-v-97196126]{-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=25)\\\";opacity:.25}.icon-attachment[data-v-97196126]{-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=25)\\\";opacity:.25}.app-content-list .list-item[data-v-97196126]{padding-right:0}.app-content-list .list-item .app-content-list-item-line-two[data-v-97196126]{padding-right:0;margin-top:-8px}.app-content-list .list-item .app-content-list-item-menu[data-v-97196126]{margin-right:-2px;margin-top:-8px}.app-content-list .list-item .app-content-list-item-menu[data-v-97196126]  .action-item__menu{right:7px !important}.app-content-list .list-item .app-content-list-item-menu[data-v-97196126]  .action-item__menu .action-item__menu_arrow{right:6px !important}.app-content-list .list-item .app-content-list-item-details[data-v-97196126]{padding-right:7px}[data-v-97196126] .list-item__extra{margin-left:41px !important}.tag-group__label[data-v-97196126]{margin:0 7px;z-index:2;font-size:calc(var(--default-font-size) * 0.8);font-weight:bold;padding-left:2px;padding-right:2px}.tag-group__bg[data-v-97196126]{position:absolute;width:100%;height:100%;top:0;left:0;opacity:15%}.tag-group[data-v-97196126]{display:inline-block;border:1px solid transparent;border-radius:var(--border-radius-pill);position:relative;margin:0 1px;overflow:hidden;left:4px}[data-v-97196126].list-item__wrapper{list-style:none}.app-content-list-item-star.icon-starred[data-v-97196126]{display:block}[data-v-97196126].icon-important.app-content-list-item-star{position:absolute;top:7px;z-index:1}.app-content-list-item-star.icon-starred[data-v-97196126]{display:inline-block;position:absolute;margin-bottom:32px;margin-left:28px;cursor:pointer;z-index:1}[data-v-97196126] .svg svg{height:16px;width:16px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Envelope.vue\"],\"names\":[],\"mappings\":\"AA4XA,6CACC,iBAAA,CACA,QAAA,CACA,SAAA,CACA,WAAA,CACA,SAAA,CAIA,uCACA,SAAA,CACA,mCAAA,CAKA,yKACA,mCAAA,CAKA,4DACA,qBAAA,CACA,QAAA,CACA,QAAA,CACA,SAAA,CAEA,oIAEA,UAAA,CAKD,wDACC,oBAAA,CACA,qBAAA,CACA,iBAAA,CACA,SAAA,CACA,QAAA,CACA,UAAA,CAGD,6CACC,gBAAA,CAED,2CACC,6CAAA,CACA,gBAAA,CAED,4BACC,UAAA,CACA,YAAA,CACA,OAAA,CACA,SAAA,CACA,oBAAA,CACA,WAAA,CACA,UAAA,CACA,QAAA,CACA,SAAA,CACA,iBAAA,CACA,SAAA,CAED,uEACC,iBAAA,CAED,yCACC,2CAAA,CACA,kBAAA,CAGD,+DAEC,oBAAA,CACA,uBAAA,CAGD,6BACC,gEAAA,CACA,WAAA,CAGD,kCACC,gEAAA,CACA,WAAA,CAKD,8CACC,eAAA,CAEA,8EACA,eAAA,CACA,eAAA,CAGA,0EACA,iBAAA,CACA,eAAA,CAEA,8FACA,oBAAA,CAEA,uHACA,oBAAA,CAKA,6EACC,iBAAA,CAGF,oCACC,2BAAA,CAED,mCACC,YAAA,CACA,SAAA,CACA,8CAAA,CACA,gBAAA,CACA,gBAAA,CACA,iBAAA,CAED,gCACC,iBAAA,CACA,UAAA,CACA,WAAA,CACA,KAAA,CACA,MAAA,CACA,WAAA,CAED,4BACC,oBAAA,CACA,4BAAA,CACA,uCAAA,CACA,iBAAA,CACA,YAAA,CACA,eAAA,CACA,QAAA,CAED,qCACC,eAAA,CAED,0DACC,aAAA,CAED,4DACC,iBAAA,CACA,OAAA,CACA,SAAA,CAED,0DACC,oBAAA,CACA,iBAAA,CACA,kBAAA,CACA,gBAAA,CACA,cAAA,CACA,SAAA,CAED,2BACC,WAAA,CACA,UAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.mail-message-account-color {\\n\\tposition: absolute;\\n\\tleft: 0px;\\n\\twidth: 2px;\\n\\theight: 69px;\\n\\tz-index: 1;\\n}\\n\\n.icon-important {\\n\\t::v-deep path {\\n\\tfill: #ffcc00;\\n\\tstroke: var(--color-main-background);\\n\\t}\\n\\t.list-item:hover &,\\n\\t.list-item:focus &,\\n\\t.list-item.active & {\\n\\t::v-deep path {\\n\\tstroke: var(--color-background-dark);\\n\\t}\\n\\t}\\n\\n\\t// In message list, but not the one in the action menu\\n\\t&.app-content-list-item-star {\\n\\tbackground-image: none;\\n\\tleft: 7px;\\n\\ttop: 13px;\\n\\topacity: 1;\\n\\n\\t&:hover,\\n\\t&:focus {\\n\\topacity: 0.5;\\n\\t}\\n\\t}\\n}\\n\\n.app-content-list-item-select-checkbox {\\n\\tdisplay: inline-block;\\n\\tvertical-align: middle;\\n\\tposition: absolute;\\n\\tleft: 33px;\\n\\ttop: 35px;\\n\\tz-index: 50; // same as icon-starred\\n}\\n\\n.list-item-style:not(.seen) {\\n\\tfont-weight: bold;\\n}\\n.list-item-style.selected {\\n\\tbackground-color: var(--color-background-dark);\\n\\tfont-weight: bold;\\n}\\n.icon-junk {\\n\\topacity: .2;\\n\\tdisplay: flex;\\n\\ttop: 6px;\\n\\tleft: 34px;\\n\\tbackground-size: 16px;\\n\\theight: 20px;\\n\\twidth: 20px;\\n\\tmargin: 0;\\n\\tpadding: 0;\\n\\tposition: absolute;\\n\\tz-index: 2;\\n}\\nlist-item-style.draft .app-content-list-item-line-two {\\n\\tfont-style: italic;\\n}\\n.list-item-style.active {\\n\\tbackground-color: var(--color-primary-light);\\n\\tborder-radius: 16px;\\n}\\n\\n.icon-reply,\\n.icon-attachment {\\n\\tdisplay: inline-block;\\n\\tvertical-align: text-top;\\n}\\n\\n.icon-reply {\\n\\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=25)';\\n\\topacity: 0.25;\\n}\\n\\n.icon-attachment {\\n\\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=25)';\\n\\topacity: 0.25;\\n}\\n\\n\\t// Fix layout of messages in list until we move to component\\n\\n.app-content-list .list-item {\\n\\tpadding-right: 0;\\n\\n\\t.app-content-list-item-line-two {\\n\\tpadding-right: 0;\\n\\tmargin-top: -8px;\\n\\t}\\n\\n\\t.app-content-list-item-menu {\\n\\tmargin-right: -2px;\\n\\tmargin-top: -8px;\\n\\n\\t::v-deep .action-item__menu {\\n\\tright: 7px !important;\\n\\n\\t.action-item__menu_arrow {\\n\\tright: 6px !important;\\n\\t}\\n\\t}\\n\\t}\\n\\n\\t.app-content-list-item-details {\\n\\t\\tpadding-right: 7px;\\n\\t\\t}\\n}\\n::v-deep .list-item__extra {\\n\\tmargin-left: 41px !important;\\n}\\n.tag-group__label {\\n\\tmargin: 0 7px;\\n\\tz-index: 2;\\n\\tfont-size: calc(var(--default-font-size) * 0.8);\\n\\tfont-weight: bold;\\n\\tpadding-left: 2px;\\n\\tpadding-right: 2px;\\n}\\n.tag-group__bg {\\n\\tposition: absolute;\\n\\twidth: 100%;\\n\\theight: 100%;\\n\\ttop: 0;\\n\\tleft: 0;\\n\\topacity: 15%;\\n}\\n.tag-group {\\n\\tdisplay: inline-block;\\n\\tborder: 1px solid transparent;\\n\\tborder-radius: var(--border-radius-pill);\\n\\tposition: relative;\\n\\tmargin: 0 1px;\\n\\toverflow: hidden;\\n\\tleft: 4px;\\n}\\n::v-deep.list-item__wrapper {\\n\\tlist-style: none;\\n}\\n.app-content-list-item-star.icon-starred {\\n\\tdisplay: block;\\n}\\n::v-deep.icon-important.app-content-list-item-star {\\n\\tposition: absolute;\\n\\ttop: 7px;\\n\\tz-index: 1;\\n}\\n.app-content-list-item-star.icon-starred {\\n\\tdisplay: inline-block;\\n\\tposition: absolute;\\n\\tmargin-bottom: 32px;\\n\\tmargin-left: 28px;\\n\\tcursor: pointer;\\n\\tz-index: 1;\\n}\\n::v-deep .svg svg{\\n\\theight: 16px;\\n\\twidth: 16px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"div[data-v-0c6cc3d8]{position:relative}.load-more[data-v-0c6cc3d8]{text-align:center;margin-top:10px;cursor:pointer;color:var(--color-text-maxcontrast)}.multiselect-header[data-v-0c6cc3d8]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:var(--color-main-background-translucent);position:sticky;top:0px;height:48px;z-index:100}#load-more-mail-messages[data-v-0c6cc3d8]{margin:10px auto;padding:10px;margin-top:50px;margin-bottom:50px}#load-more-mail-messages.icon-loading-small[data-v-0c6cc3d8]{padding-left:32px;background-position:9px center}#list-refreshing[data-v-0c6cc3d8]{position:absolute;left:calc(50% - 8px);overflow:hidden;padding:12px;background-color:var(--color-main-background);z-index:1;border-radius:var(--border-radius-pill);border:1px solid var(--color-border);top:-24px;opacity:0;transition-property:top,opacity;transition-duration:.5s;transition-timing-function:ease-in-out}#list-refreshing.refreshing[data-v-0c6cc3d8]{top:4px;opacity:1}.multiselect-header-enter-active[data-v-0c6cc3d8],.multiselect-header-leave-active[data-v-0c6cc3d8],.list-enter-active[data-v-0c6cc3d8],.list-leave-active[data-v-0c6cc3d8]{transition:all var(--animation-slow)}.multiselect-header-enter[data-v-0c6cc3d8],.multiselect-header-leave-to[data-v-0c6cc3d8],.list-enter[data-v-0c6cc3d8],.list-leave-to[data-v-0c6cc3d8]{opacity:0;height:0px;transform:scaleY(0)}#action-label[data-v-0c6cc3d8]{vertical-align:middle}@media only screen and (min-width: 600px){#action-label[data-v-0c6cc3d8]{display:block}}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/EnvelopeList.vue\"],\"names\":[],\"mappings\":\"AA2XA,qBAEC,iBAAA,CAGD,4BACC,iBAAA,CACA,eAAA,CACA,cAAA,CACA,mCAAA,CAGD,qCACC,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,sBAAA,CACA,yDAAA,CACA,eAAA,CACA,OAAA,CACA,WAAA,CACA,WAAA,CAGD,0CACC,gBAAA,CACA,YAAA,CACA,eAAA,CACA,kBAAA,CAID,6DACC,iBAAA,CACA,8BAAA,CAGD,kCACC,iBAAA,CACA,oBAAA,CACA,eAAA,CACA,YAAA,CACA,6CAAA,CACA,SAAA,CACA,uCAAA,CACA,oCAAA,CACA,SAAA,CACA,SAAA,CACA,+BAAA,CACA,uBAAA,CACA,sCAAA,CAEA,6CACC,OAAA,CACA,SAAA,CAIF,4KAIC,oCAAA,CAGD,sJAIC,SAAA,CACA,UAAA,CACA,mBAAA,CAGD,+BACC,qBAAA,CAED,0CACC,+BACC,aAAA,CAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\ndiv {\\n\\t// So we can align the loading spinner in the Priority inbox\\n\\tposition: relative;\\n}\\n\\n.load-more {\\n\\ttext-align: center;\\n\\tmargin-top: 10px;\\n\\tcursor: pointer;\\n\\tcolor: var(--color-text-maxcontrast);\\n}\\n\\n.multiselect-header {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n\\tbackground-color: var(--color-main-background-translucent);\\n\\tposition: sticky;\\n\\ttop: 0px;\\n\\theight: 48px;\\n\\tz-index: 100;\\n}\\n\\n#load-more-mail-messages {\\n\\tmargin: 10px auto;\\n\\tpadding: 10px;\\n\\tmargin-top: 50px;\\n\\tmargin-bottom: 50px;\\n}\\n\\n/* TODO: put this in core icons.css as general rule for buttons with icons */\\n#load-more-mail-messages.icon-loading-small {\\n\\tpadding-left: 32px;\\n\\tbackground-position: 9px center;\\n}\\n\\n#list-refreshing {\\n\\tposition: absolute;\\n\\tleft: calc(50% - 8px);\\n\\toverflow: hidden;\\n\\tpadding: 12px;\\n\\tbackground-color: var(--color-main-background);\\n\\tz-index: 1;\\n\\tborder-radius: var(--border-radius-pill);\\n\\tborder: 1px solid var(--color-border);\\n\\ttop: -24px;\\n\\topacity: 0;\\n\\ttransition-property: top, opacity;\\n\\ttransition-duration: 0.5s;\\n\\ttransition-timing-function: ease-in-out;\\n\\n\\t&.refreshing {\\n\\t\\ttop: 4px;\\n\\t\\topacity: 1;\\n\\t}\\n}\\n\\n.multiselect-header-enter-active,\\n.multiselect-header-leave-active,\\n.list-enter-active,\\n.list-leave-active {\\n\\ttransition: all var(--animation-slow);\\n}\\n\\n.multiselect-header-enter,\\n.multiselect-header-leave-to,\\n.list-enter,\\n.list-leave-to {\\n\\topacity: 0;\\n\\theight: 0px;\\n\\ttransform: scaleY(0);\\n}\\n\\n#action-label {\\n\\tvertical-align: middle;\\n}\\n@media only screen and (min-width: 600px) {\\n\\t#action-label {\\n\\t\\tdisplay: block;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".fade-enter-active[data-v-5dce5c60],.fade-leave-active[data-v-5dce5c60]{transition:opacity .5s}.fade-enter[data-v-5dce5c60],.fade-leave-to[data-v-5dce5c60]{opacity:0}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Loading.vue\"],\"names\":[],\"mappings\":\"AA8CA,wEAEC,sBAAA,CAED,6DAEC,SAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.fade-enter-active,\\n.fade-leave-active {\\n\\ttransition: opacity 0.5s;\\n}\\n.fade-enter,\\n.fade-leave-to {\\n\\topacity: 0;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#emptycontent[data-v-4512145e]{margin-top:10px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/EmptyMailboxSection.vue\"],\"names\":[],\"mappings\":\"AAYA,+BACC,eAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n#emptycontent {\\n\\tmargin-top: 10px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".nameimportant[data-v-73117de6]  #load-more-mail-messages,.namestarred[data-v-73117de6]  #load-more-mail-messages{margin-top:0;margin-bottom:8px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Mailbox.vue\"],\"names\":[],\"mappings\":\"AAofC,kHACC,YAAA,CACA,iBAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n// Fix vertical space between sections in priority inbox\\n.nameimportant,\\n.namestarred {\\n\\t::v-deep #load-more-mail-messages {\\n\\t\\tmargin-top: 0;\\n\\t\\tmargin-bottom: 8px;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.new-message-attachments li[data-v-44ae67a0] {\\n\\tpadding: 10px;\\n}\\n.new-message-attachments-action[data-v-44ae67a0] {\\n\\tdisplay: inline-block;\\n\\tvertical-align: middle;\\n\\tpadding: 22px;\\n\\topacity: 0.5;\\n}\\n\\n/* attachment filenames */\\n.new-message-attachment-name[data-v-44ae67a0] {\\n\\tdisplay: inline-block;\\n}\\n\\n/* Colour the filename with a different color during attachment upload */\\n.new-message-attachment-name.upload-ongoing[data-v-44ae67a0] {\\n\\tcolor: #0082c9;\\n}\\n\\n/* Colour the filename in red if the attachment upload failed */\\n.new-message-attachment-name.upload-warning[data-v-44ae67a0] {\\n\\tcolor: #d2322d;\\n}\\n\\n/* Red ProgressBar for failed attachment uploads */\\n.new-message-attachment-name.upload-warning .ui-progressbar-value[data-v-44ae67a0] {\\n\\tborder: 1px solid #e9322d;\\n\\tbackground: #e9322d;\\n}\\n.attachments-upload-progress[data-v-44ae67a0] {\\n\\tdisplay: flex;\\n}\\n.attachments-upload-progress > div[data-v-44ae67a0] {\\n\\tpadding-left: 3px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/ComposerAttachments.vue\"],\"names\":[],\"mappings\":\";AAuOA;CACA,aAAA;AACA;AAEA;CACA,qBAAA;CACA,sBAAA;CACA,aAAA;CACA,YAAA;AACA;;AAEA,yBAAA;AACA;CACA,qBAAA;AACA;;AAEA,wEAAA;AACA;CACA,cAAA;AACA;;AAEA,+DAAA;AACA;CACA,cAAA;AACA;;AAEA,kDAAA;AACA;CACA,yBAAA;CACA,mBAAA;AACA;AAEA;CACA,aAAA;AACA;AAEA;CACA,iBAAA;AACA\",\"sourcesContent\":[\"<!--\\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  - @copyright 2020 Gary Kim <gary@garykim.dev>\\n  -\\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  -\\n  - @license GNU AGPL version 3 or any later version\\n  -\\n  - This program is free software: you can redistribute it and/or modify\\n  - it under the terms of the GNU Affero General Public License as\\n  - published by the Free Software Foundation, either version 3 of the\\n  - License, or (at your option) any later version.\\n  -\\n  - This program is distributed in the hope that it will be useful,\\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n  - GNU Affero General Public License for more details.\\n  -\\n  - You should have received a copy of the GNU Affero General Public License\\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\\n  -->\\n\\n<template>\\n\\t<div class=\\\"new-message-attachments\\\">\\n\\t\\t<ul>\\n\\t\\t\\t<li v-for=\\\"attachment in value\\\" :key=\\\"attachment.id\\\">\\n\\t\\t\\t\\t<div class=\\\"new-message-attachment-name\\\">\\n\\t\\t\\t\\t\\t{{ attachment.displayName }}\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"new-message-attachments-action svg icon-delete\\\" @click=\\\"onDelete(attachment)\\\" />\\n\\t\\t\\t</li>\\n\\t\\t\\t<li v-if=\\\"uploading\\\" class=\\\"attachments-upload-progress\\\">\\n\\t\\t\\t\\t<div :class=\\\"{'icon-loading-small': uploading}\\\" />\\n\\t\\t\\t\\t<div>{{ uploading ? t('mail', 'Uploading {percent}% …', {percent: uploadProgress}) : '' }}</div>\\n\\t\\t\\t</li>\\n\\t\\t</ul>\\n\\n\\t\\t<input ref=\\\"localAttachments\\\"\\n\\t\\t\\ttype=\\\"file\\\"\\n\\t\\t\\tmultiple\\n\\t\\t\\tstyle=\\\"display: none;\\\"\\n\\t\\t\\t@change=\\\"onLocalAttachmentSelected\\\">\\n\\t</div>\\n</template>\\n\\n<script>\\nimport map from 'lodash/fp/map'\\nimport trimStart from 'lodash/fp/trimCharsStart'\\nimport { getRequestToken } from '@nextcloud/auth'\\nimport { formatFileSize } from '@nextcloud/files'\\nimport prop from 'lodash/fp/prop'\\nimport { getFilePickerBuilder, showWarning } from '@nextcloud/dialogs'\\nimport sum from 'lodash/fp/sum'\\nimport sumBy from 'lodash/fp/sumBy'\\nimport { translate as t, translatePlural as n } from '@nextcloud/l10n'\\n\\nimport Vue from 'vue'\\n\\nimport logger from '../logger'\\nimport { getFileSize } from '../service/FileService'\\nimport { shareFile } from '../service/FileSharingService'\\nimport { uploadLocalAttachment } from '../service/AttachmentService'\\n\\nexport default {\\n\\tname: 'ComposerAttachments',\\n\\tprops: {\\n\\t\\tvalue: {\\n\\t\\t\\ttype: Array,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tbus: {\\n\\t\\t\\ttype: Object,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tuploadSizeLimit: {\\n\\t\\t\\ttype: Number,\\n\\t\\t\\tdefault: 0,\\n\\t\\t},\\n\\t},\\n\\tdata() {\\n\\t\\treturn {\\n\\t\\t\\tuploading: false,\\n\\t\\t\\tuploads: {},\\n\\t\\t}\\n\\t},\\n\\tcomputed: {\\n\\t\\tuploadProgress() {\\n\\t\\t\\tlet uploaded = 0\\n\\t\\t\\tlet total = 0\\n\\t\\t\\tfor (const id in this.uploads) {\\n\\t\\t\\t\\tuploaded += this.uploads[id].uploaded\\n\\t\\t\\t\\ttotal += this.uploads[id].total\\n\\t\\t\\t}\\n\\t\\t\\treturn ((uploaded / total) * 100).toFixed(1)\\n\\t\\t},\\n\\t},\\n\\tcreated() {\\n\\t\\tthis.bus.$on('onAddLocalAttachment', this.onAddLocalAttachment)\\n\\t\\tthis.bus.$on('onAddCloudAttachment', this.onAddCloudAttachment)\\n\\t\\tthis.bus.$on('onAddCloudAttachmentLink', this.onAddCloudAttachmentLink)\\n\\t},\\n\\tmethods: {\\n\\t\\tonAddLocalAttachment() {\\n\\t\\t\\tthis.$refs.localAttachments.click()\\n\\t\\t},\\n\\t\\temitNewAttachments(attachments) {\\n\\t\\t\\tthis.$emit('input', this.value.concat(attachments))\\n\\t\\t},\\n\\t\\ttotalSizeOfUpload() {\\n\\t\\t\\treturn Object.values(this.value).reduce((acc, upload) => {\\n\\t\\t\\t\\tif (!upload.type === 'local') {\\n\\t\\t\\t\\t\\t// Ignore link shares\\n\\t\\t\\t\\t\\treturn acc\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\treturn acc + upload.size\\n\\t\\t\\t}, 0)\\n\\t\\t},\\n\\t\\tonLocalAttachmentSelected(e) {\\n\\t\\t\\tthis.uploading = true\\n\\n\\t\\t\\tVue.set(this, 'uploads', {})\\n\\n\\t\\t\\tconst toUpload = sumBy(prop('size'), Object.values(e.target.files))\\n\\t\\t\\tconst newTotal = toUpload + this.totalSizeOfUpload()\\n\\t\\t\\tlogger.debug('checking upload size limit', {\\n\\t\\t\\t\\texistingUploads: this.totalSizeOfUpload(),\\n\\t\\t\\t\\ttoUpload,\\n\\t\\t\\t\\tlimit: this.uploadSizeLimit,\\n\\t\\t\\t\\tnewTotal,\\n\\t\\t\\t})\\n\\t\\t\\tif (this.uploadSizeLimit && newTotal > this.uploadSizeLimit) {\\n\\t\\t\\t\\tthis.showAttachmentFileSizeWarning(e.target.files.length)\\n\\n\\t\\t\\t\\tthis.uploading = false\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst progress = (id) => (prog, uploaded) => {\\n\\t\\t\\t\\tthis.uploads[id].uploaded = uploaded\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst promises = map((file) => {\\n\\t\\t\\t\\tVue.set(this.uploads, file.name, {\\n\\t\\t\\t\\t\\ttotal: file.size,\\n\\t\\t\\t\\t\\tuploaded: 0,\\n\\t\\t\\t\\t})\\n\\n\\t\\t\\t\\treturn uploadLocalAttachment(file, progress(file.name)).then(({ file, id }) => {\\n\\t\\t\\t\\t\\tlogger.info('uploaded')\\n\\t\\t\\t\\t\\tthis.emitNewAttachments([{\\n\\t\\t\\t\\t\\t\\tfileName: file.name,\\n\\t\\t\\t\\t\\t\\tdisplayName: trimStart('/', file.name),\\n\\t\\t\\t\\t\\t\\tid,\\n\\t\\t\\t\\t\\t\\tsize: file.size,\\n\\t\\t\\t\\t\\t\\ttype: 'local',\\n\\t\\t\\t\\t\\t}])\\n\\t\\t\\t\\t})\\n\\n\\t\\t\\t}, e.target.files)\\n\\n\\t\\t\\tconst done = Promise.all(promises)\\n\\t\\t\\t\\t.catch((error) => logger.error('could not upload all attachments', { error }))\\n\\t\\t\\t\\t.then(() => (this.uploading = false))\\n\\n\\t\\t\\tthis.$emit('upload', done)\\n\\n\\t\\t\\treturn done\\n\\t\\t},\\n\\t\\tasync onAddCloudAttachment() {\\n\\t\\t\\tconst picker = getFilePickerBuilder(t('mail', 'Choose a file to add as attachment')).setMultiSelect(true).build()\\n\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tconst paths = await picker.pick(t('mail', 'Choose a file to add as attachment'))\\n\\t\\t\\t\\tconst fileSizes = await Promise.all(paths.map(getFileSize))\\n\\t\\t\\t\\tconst newTotal = sum(fileSizes) + this.totalSizeOfUpload()\\n\\n\\t\\t\\t\\tif (this.uploadSizeLimit && newTotal > this.uploadSizeLimit) {\\n\\t\\t\\t\\t\\tthis.showAttachmentFileSizeWarning(paths.length)\\n\\n\\t\\t\\t\\t\\treturn\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tthis.emitNewAttachments(paths.map(function(name) {\\n\\t\\t\\t\\t\\treturn {\\n\\t\\t\\t\\t\\t\\tfileName: name,\\n\\t\\t\\t\\t\\t\\tdisplayName: trimStart('/', name),\\n\\t\\t\\t\\t\\t\\ttype: 'cloud',\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}))\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tlogger.error('could not choose a file as attachment', { error })\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tasync onAddCloudAttachmentLink() {\\n\\t\\t\\tconst picker = getFilePickerBuilder(t('mail', 'Choose a file to share as a link')).build()\\n\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tconst path = await picker.pick(t('mail', 'Choose a file to share as a link'))\\n\\t\\t\\t\\tconst url = await shareFile(path, getRequestToken())\\n\\n\\t\\t\\t\\tthis.appendToBodyAtCursor(`<a href=\\\"${url}\\\">${url}</a>`)\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tlogger.error('could not choose a file as attachment link', { error })\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tshowAttachmentFileSizeWarning(num) {\\n\\t\\t\\tshowWarning(n(\\n\\t\\t\\t\\t'mail',\\n\\t\\t\\t\\t'The attachment exceed the allowed attachments size of {size}. Please share the file via link instead.',\\n\\t\\t\\t\\t'The attachments exceed the allowed attachments size of {size}. Please share the files via link instead.',\\n\\t\\t\\t\\tnum,\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tsize: formatFileSize(this.uploadSizeLimit),\\n\\t\\t\\t\\t}\\n\\t\\t\\t))\\n\\t\\t},\\n\\t\\tonDelete(attachment) {\\n\\t\\t\\tthis.$emit(\\n\\t\\t\\t\\t'input',\\n\\t\\t\\t\\tthis.value.filter((a) => a !== attachment)\\n\\t\\t\\t)\\n\\t\\t},\\n\\t\\tappendToBodyAtCursor(toAppend) {\\n\\t\\t\\tthis.bus.$emit('appendToBodyAtCursor', toAppend)\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n.new-message-attachments li {\\n\\tpadding: 10px;\\n}\\n\\n.new-message-attachments-action {\\n\\tdisplay: inline-block;\\n\\tvertical-align: middle;\\n\\tpadding: 22px;\\n\\topacity: 0.5;\\n}\\n\\n/* attachment filenames */\\n.new-message-attachment-name {\\n\\tdisplay: inline-block;\\n}\\n\\n/* Colour the filename with a different color during attachment upload */\\n.new-message-attachment-name.upload-ongoing {\\n\\tcolor: #0082c9;\\n}\\n\\n/* Colour the filename in red if the attachment upload failed */\\n.new-message-attachment-name.upload-warning {\\n\\tcolor: #d2322d;\\n}\\n\\n/* Red ProgressBar for failed attachment uploads */\\n.new-message-attachment-name.upload-warning .ui-progressbar-value {\\n\\tborder: 1px solid #e9322d;\\n\\tbackground: #e9322d;\\n}\\n\\n.attachments-upload-progress {\\n\\tdisplay: flex;\\n}\\n\\n.attachments-upload-progress > div {\\n\\tpadding-left: 3px;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n#mailvelope-composer[data-v-1320c887] {\\n\\twidth: 100%;\\n\\theight: 450px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MailvelopeEditor.vue\"],\"names\":[],\"mappings\":\";AA6EA;CACA,WAAA;CACA,aAAA;AACA\",\"sourcesContent\":[\"<!--\\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  -\\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  -\\n  - @license GNU AGPL version 3 or any later version\\n  -\\n  - This program is free software: you can redistribute it and/or modify\\n  - it under the terms of the GNU Affero General Public License as\\n  - published by the Free Software Foundation, either version 3 of the\\n  - License, or (at your option) any later version.\\n  -\\n  - This program is distributed in the hope that it will be useful,\\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n  - GNU Affero General Public License for more details.\\n  -\\n  - You should have received a copy of the GNU Affero General Public License\\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\\n  -->\\n\\n<template>\\n\\t<div id=\\\"mailvelope-composer\\\" />\\n</template>\\n\\n<script>\\nimport logger from '../logger'\\nimport { isPgpgMessage } from '../crypto/pgp'\\n\\nexport default {\\n\\tname: 'MailvelopeEditor',\\n\\tprops: {\\n\\t\\tvalue: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\trecipients: {\\n\\t\\t\\ttype: Array,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tquotedText: {\\n\\t\\t\\ttype: Object,\\n\\t\\t\\trequired: false,\\n\\t\\t\\tdefault: () => undefined,\\n\\t\\t},\\n\\t\\tisReplyOrForward: {\\n\\t\\t\\ttype: Boolean,\\n\\t\\t\\tdefault: false,\\n\\t\\t},\\n\\t},\\n\\tdata() {\\n\\t\\treturn {\\n\\t\\t\\teditor: undefined,\\n\\t\\t}\\n\\t},\\n\\tasync mounted() {\\n\\t\\tconst isEncrypted = this.quotedText ? isPgpgMessage(this.quotedText) : false\\n\\t\\tconst quotedMail = this.isReplyOrForward ? this.quotedText?.value : undefined\\n\\n\\t\\tthis.editor = await window.mailvelope.createEditorContainer('#mailvelope-composer', undefined, {\\n\\t\\t\\tquotedMail: isEncrypted ? quotedMail : undefined,\\n\\t\\t})\\n\\t},\\n\\tmethods: {\\n\\t\\tasync pull() {\\n\\t\\t\\tconst recipients = this.recipients.map((r) => r.email)\\n\\t\\t\\tlogger.info('encrypting message', { recipients })\\n\\t\\t\\tconst armored = await this.editor.encrypt(recipients)\\n\\t\\t\\tlogger.info('message encryted', { armored })\\n\\n\\t\\t\\tthis.$emit('input', armored)\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n#mailvelope-composer {\\n\\twidth: 100%;\\n\\theight: 450px;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".message-composer[data-v-ee7216e4]{margin:0;z-index:100}.composer-actions[data-v-ee7216e4]{display:flex;flex-direction:row;align-items:flex-end;justify-content:space-between;position:sticky;bottom:0;padding:12px;background:linear-gradient(rgba(255, 255, 255, 0), var(--color-main-background-translucent) 50%)}.composer-actions-right[data-v-ee7216e4]{display:flex;align-items:center}.composer-fields[data-v-ee7216e4]{display:flex;align-items:center;border-top:1px solid var(--color-border)}.composer-fields.mail-account[data-v-ee7216e4]{border-top:none}.composer-fields.mail-account>.multiselect[data-v-ee7216e4]{max-width:none;min-height:auto}.composer-fields .multiselect[data-v-ee7216e4],.composer-fields input[data-v-ee7216e4],.composer-fields TextEditor[data-v-ee7216e4]{flex-grow:1;max-width:none;border:none;border-radius:0}.composer-fields .multiselect[data-v-ee7216e4]{margin-right:12px}.subject[data-v-ee7216e4]{font-size:20px;font-weight:bold;margin:0;padding:24px 12px}.warning-box[data-v-ee7216e4]{padding:5px 12px;border-radius:0}.message-body[data-v-ee7216e4]{min-height:300px;width:100%;margin:0;padding:12px;border:none !important;outline:none !important;box-shadow:none !important}#draft-status[data-v-ee7216e4]{padding:5px;opacity:.5;font-size:small}.from-label[data-v-ee7216e4],.to-label[data-v-ee7216e4],.copy-toggle[data-v-ee7216e4],.cc-label[data-v-ee7216e4],.bcc-label[data-v-ee7216e4]{padding:12px;cursor:text;color:var(--color-text-maxcontrast);width:100px;text-align:right;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.bcc-label[data-v-ee7216e4]{top:initial;bottom:0}.copy-toggle[data-v-ee7216e4]{cursor:pointer;width:initial}.copy-toggle[data-v-ee7216e4]:hover,.copy-toggle[data-v-ee7216e4]:focus{color:var(--color-main-text)}.reply[data-v-ee7216e4]{min-height:100px}.send[data-v-ee7216e4]{padding:12px 18px 13px 36px;background-position:12px center;margin-left:4px}[data-v-ee7216e4] .multiselect .multiselect__tags{border:none !important}.submit-message.send.primary.icon-confirm-white[data-v-ee7216e4]{color:var(--color-main-background)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Composer.vue\"],\"names\":[],\"mappings\":\"AAszBA,mCACC,QAAA,CACA,WAAA,CAGD,mCACC,YAAA,CACA,kBAAA,CACA,oBAAA,CACA,6BAAA,CACA,eAAA,CACA,QAAA,CACA,YAAA,CACA,gGAAA,CAGD,yCACC,YAAA,CACA,kBAAA,CAGD,kCACC,YAAA,CACA,kBAAA,CACA,wCAAA,CAEA,+CACC,eAAA,CAEA,4DACC,cAAA,CACA,eAAA,CAIF,oIAGC,WAAA,CACA,cAAA,CACA,WAAA,CACA,eAAA,CAGD,+CACC,iBAAA,CAIF,0BACC,cAAA,CACA,gBAAA,CACA,QAAA,CACA,iBAAA,CAGD,8BACC,gBAAA,CACA,eAAA,CAGD,+BACC,gBAAA,CACA,UAAA,CACA,QAAA,CACA,YAAA,CACA,sBAAA,CACA,uBAAA,CACA,0BAAA,CAGD,+BACC,WAAA,CACA,UAAA,CACA,eAAA,CAGD,6IAKC,YAAA,CACA,WAAA,CACA,mCAAA,CACA,WAAA,CACA,gBAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CAGD,4BACC,WAAA,CACA,QAAA,CAGD,8BACC,cAAA,CACA,aAAA,CAEA,wEAEC,4BAAA,CAIF,wBACC,gBAAA,CAGD,uBACC,2BAAA,CACA,+BAAA,CACA,eAAA,CAED,kDACC,sBAAA,CAED,iEACC,kCAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.message-composer {\\n\\tmargin: 0;\\n\\tz-index: 100;\\n}\\n\\n.composer-actions {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\talign-items: flex-end;\\n\\tjustify-content: space-between;\\n\\tposition: sticky;\\n\\tbottom: 0;\\n\\tpadding: 12px;\\n\\tbackground: linear-gradient(rgba(255, 255, 255, 0), var(--color-main-background-translucent) 50%);\\n}\\n\\n.composer-actions-right {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n}\\n\\n.composer-fields {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tborder-top: 1px solid var(--color-border);\\n\\n\\t&.mail-account {\\n\\t\\tborder-top: none;\\n\\n\\t\\t& > .multiselect {\\n\\t\\t\\tmax-width: none;\\n\\t\\t\\tmin-height: auto;\\n\\t\\t}\\n\\t}\\n\\n\\t.multiselect,\\n\\tinput,\\n\\tTextEditor {\\n\\t\\tflex-grow: 1;\\n\\t\\tmax-width: none;\\n\\t\\tborder: none;\\n\\t\\tborder-radius: 0;\\n\\t}\\n\\n\\t.multiselect {\\n\\t\\tmargin-right: 12px;\\n\\t}\\n}\\n\\n.subject {\\n\\tfont-size: 20px;\\n\\tfont-weight: bold;\\n\\tmargin: 0;\\n\\tpadding: 24px 12px;\\n}\\n\\n.warning-box {\\n\\tpadding: 5px 12px;\\n\\tborder-radius: 0;\\n}\\n\\n.message-body {\\n\\tmin-height: 300px;\\n\\twidth: 100%;\\n\\tmargin: 0;\\n\\tpadding: 12px;\\n\\tborder: none !important;\\n\\toutline: none !important;\\n\\tbox-shadow: none !important;\\n}\\n\\n#draft-status {\\n\\tpadding: 5px;\\n\\topacity: 0.5;\\n\\tfont-size: small;\\n}\\n\\n.from-label,\\n.to-label,\\n.copy-toggle,\\n.cc-label,\\n.bcc-label {\\n\\tpadding: 12px;\\n\\tcursor: text;\\n\\tcolor: var(--color-text-maxcontrast);\\n\\twidth: 100px;\\n\\ttext-align: right;\\n\\twhite-space: nowrap;\\n\\toverflow: hidden;\\n\\ttext-overflow: ellipsis;\\n}\\n\\n.bcc-label {\\n\\ttop: initial;\\n\\tbottom: 0;\\n}\\n\\n.copy-toggle {\\n\\tcursor: pointer;\\n\\twidth: initial;\\n\\n\\t&:hover,\\n\\t&:focus {\\n\\t\\tcolor: var(--color-main-text);\\n\\t}\\n}\\n\\n.reply {\\n\\tmin-height: 100px;\\n}\\n\\n.send {\\n\\tpadding: 12px 18px 13px 36px;\\n\\tbackground-position: 12px center;\\n\\tmargin-left: 4px;\\n}\\n::v-deep .multiselect .multiselect__tags {\\n\\tborder: none !important;\\n}\\n.submit-message.send.primary.icon-confirm-white {\\n\\tcolor: var(--color-main-background);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.app-content-details[data-v-0f812b2d] {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tjustify-content: center;\\n}\\n.icon[data-v-0f812b2d] {\\n\\theight: 64px;\\n\\twidth: 64px;\\n\\tmargin: 0 auto 15px;\\n\\tbackground-size: 64px;\\n\\topacity: 0.4;\\n}\\nh2[data-v-0f812b2d],\\np[data-v-0f812b2d] {\\n\\ttext-align: center;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/NoMessageSelected.vue\"],\"names\":[],\"mappings\":\";AAyCA;CACA,aAAA;CACA,sBAAA;CACA,uBAAA;AACA;AAEA;CACA,YAAA;CACA,WAAA;CACA,mBAAA;CACA,qBAAA;CACA,YAAA;AACA;AAEA;;CAEA,kBAAA;AACA\",\"sourcesContent\":[\"<!--\\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  -\\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  -\\n  - @license GNU AGPL version 3 or any later version\\n  -\\n  - This program is free software: you can redistribute it and/or modify\\n  - it under the terms of the GNU Affero General Public License as\\n  - published by the Free Software Foundation, either version 3 of the\\n  - License, or (at your option) any later version.\\n  -\\n  - This program is distributed in the hope that it will be useful,\\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n  - GNU Affero General Public License for more details.\\n  -\\n  - You should have received a copy of the GNU Affero General Public License\\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\\n  -->\\n\\n<template>\\n\\t<AppContentDetails>\\n\\t\\t<div class=\\\"icon icon-mail\\\" />\\n\\t\\t<h2>{{ t('mail', 'No message selected') }}</h2>\\n\\t\\t<p />\\n\\t</AppContentDetails>\\n</template>\\n\\n<script>\\nimport AppContentDetails from '@nextcloud/vue/dist/Components/AppContentDetails'\\n\\nexport default {\\n\\tname: 'NoMessageSelected',\\n\\tcomponents: {\\n\\t\\tAppContentDetails,\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n.app-content-details {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tjustify-content: center;\\n}\\n\\n.icon {\\n\\theight: 64px;\\n\\twidth: 64px;\\n\\tmargin: 0 auto 15px;\\n\\tbackground-size: 64px;\\n\\topacity: 0.4;\\n}\\n\\nh2,\\np {\\n\\ttext-align: center;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".user-bubble__title[data-v-7f075410]{max-width:30vw}.user-bubble-email[data-v-7f075410]{margin:10px}.contact-popover[data-v-7f075410]{display:inline-block}.contact-wrapper[data-v-7f075410]{padding:10px;min-width:300px}.contact-wrapper a[data-v-7f075410]{opacity:.7}.contact-wrapper a[data-v-7f075410]:hover{opacity:1}.contact-input-wrapper[data-v-7f075410]{margin-top:10px;margin-bottom:10px}.contact-input-wrapper input[data-v-7f075410],.contact-input-wrapper .multiselect[data-v-7f075410]{width:100%}.icon-user[data-v-7f075410],.icon-reply[data-v-7f075410],.icon-checkmark[data-v-7f075410],.icon-close[data-v-7f075410],.icon-add[data-v-7f075410]{height:44px;min-width:44px;margin:0;padding:9px 18px 10px 32px}@media only screen and (min-width: 600px){.icon-user[data-v-7f075410],.icon-reply[data-v-7f075410],.icon-checkmark[data-v-7f075410],.icon-close[data-v-7f075410],.icon-add[data-v-7f075410]{background-position:12px center}}.icon-add[data-v-7f075410]{display:revert;vertical-align:revert}.contact-existing[data-v-7f075410]{margin-bottom:10px;font-size:small}.contact-existing .icon-details[data-v-7f075410]{padding-left:34px;background-position:10px center;text-align:left}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/RecipientBubble.vue\"],\"names\":[],\"mappings\":\"AAsNA,qCACC,cAAA,CAED,oCACC,WAAA,CAGD,kCACC,oBAAA,CAED,kCACC,YAAA,CACA,eAAA,CAEA,oCACC,UAAA,CAED,0CACC,SAAA,CAGF,wCACC,eAAA,CACG,kBAAA,CACH,mGAEC,UAAA,CAGF,kJAKC,WAAA,CACA,cAAA,CACA,QAAA,CACA,0BAAA,CAED,0CACC,kJAKC,+BAAA,CAAA,CAGF,2BACC,cAAA,CACG,qBAAA,CAEJ,mCACC,kBAAA,CACA,eAAA,CACA,iDACC,iBAAA,CACA,+BAAA,CACA,eAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.user-bubble__title {\\n\\tmax-width: 30vw;\\n}\\n.user-bubble-email {\\n\\tmargin: 10px;\\n}\\n\\n.contact-popover {\\n\\tdisplay: inline-block;\\n}\\n.contact-wrapper {\\n\\tpadding:10px;\\n\\tmin-width: 300px;\\n\\n\\ta {\\n\\t\\topacity: 0.7;\\n\\t}\\n\\ta:hover {\\n\\t\\topacity: 1;\\n\\t}\\n}\\n.contact-input-wrapper {\\n\\tmargin-top: 10px;\\n    margin-bottom: 10px;\\n\\tinput,\\n\\t.multiselect {\\n\\t\\twidth: 100%;\\n\\t}\\n}\\n.icon-user,\\n.icon-reply,\\n.icon-checkmark,\\n.icon-close,\\n.icon-add {\\n\\theight: 44px;\\n\\tmin-width: 44px;\\n\\tmargin: 0;\\n\\tpadding: 9px 18px 10px 32px;\\n}\\n@media only screen and (min-width: 600px) {\\n\\t.icon-user,\\n\\t.icon-reply,\\n\\t.icon-checkmark,\\n\\t.icon-close,\\n\\t.icon-add {\\n\\t\\tbackground-position: 12px center;\\n\\t}\\n}\\n.icon-add {\\n\\tdisplay: revert;\\n    vertical-align: revert;\\n}\\n.contact-existing {\\n\\tmargin-bottom: 10px;\\n\\tfont-size: small;\\n\\t.icon-details {\\n\\t\\tpadding-left: 34px;\\n\\t\\tbackground-position: 10px center;\\n\\t\\ttext-align: left;\\n\\t}\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.reservation[data-v-b2f6d4c0] {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tmargin: 30px 38px;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 20px;\\n\\talign-items: center;\\n}\\n.event[data-v-b2f6d4c0] {\\n\\tflex-grow: 1;\\n}\\n.event-name[data-v-b2f6d4c0] {\\n\\tfont-size: larger;\\n\\tfont-weight: bold;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/itinerary/EventReservation.vue\"],\"names\":[],\"mappings\":\";AAsJA;CACA,aAAA;CACA,mBAAA;CACA,iBAAA;CACA,qCAAA;CACA,mCAAA;CACA,aAAA;CACA,mBAAA;AACA;AAEA;CACA,YAAA;AACA;AAEA;CACA,iBAAA;CACA,iBAAA;AACA\",\"sourcesContent\":[\"<!--\\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  -\\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  -\\n  - @license GNU AGPL version 3 or any later version\\n  -\\n  - This program is free software: you can redistribute it and/or modify\\n  - it under the terms of the GNU Affero General Public License as\\n  - published by the Free Software Foundation, either version 3 of the\\n  - License, or (at your option) any later version.\\n  -\\n  - This program is distributed in the hope that it will be useful,\\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n  - GNU Affero General Public License for more details.\\n  -\\n  - You should have received a copy of the GNU Affero General Public License\\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\\n  -->\\n\\n<template>\\n\\t<div class=\\\"reservation\\\">\\n\\t\\t<div class=\\\"event\\\">\\n\\t\\t\\t<div class=\\\"event-name\\\">\\n\\t\\t\\t\\t{{ eventName }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"location\\\" class=\\\"venue\\\">\\n\\t\\t\\t\\t{{ location }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"date\\\">\\n\\t\\t\\t\\t{{ date }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"time\\\">\\n\\t\\t\\t\\t{{ time }}\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<CalendarImport v-if=\\\"canImport\\\" :calendars=\\\"calendars\\\" :handler=\\\"handleImport\\\" />\\n\\t</div>\\n</template>\\n\\n<script>\\nimport ical from 'ical.js'\\nimport md5 from 'md5'\\nimport moment from '@nextcloud/moment'\\nimport { showError, showSuccess } from '@nextcloud/dialogs'\\n\\nimport CalendarImport from './CalendarImport'\\nimport { importCalendarEvent } from '../../service/DAVService'\\nimport logger from '../../logger'\\n\\nexport default {\\n\\tname: 'EventReservation',\\n\\tcomponents: { CalendarImport },\\n\\tprops: {\\n\\t\\tdata: {\\n\\t\\t\\ttype: Object,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tcalendars: {\\n\\t\\t\\ttype: Array,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tmessageId: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t},\\n\\tcomputed: {\\n\\t\\teventName() {\\n\\t\\t\\treturn this.data.reservationFor.name\\n\\t\\t},\\n\\t\\ttime() {\\n\\t\\t\\tif (!('startDate' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(this.data.reservationFor.startDate).format('LT')\\n\\t\\t},\\n\\t\\tdate() {\\n\\t\\t\\tif (!('startDate' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(this.data.reservationFor.startDate).format('L')\\n\\t\\t},\\n\\t\\tlocation() {\\n\\t\\t\\tif (!('location' in this.data.reservationFor) || !('name' in this.data.reservationFor.location)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn this.data.reservationFor.location.name\\n\\t\\t},\\n\\t\\tcanImport() {\\n\\t\\t\\treturn 'startDate' in this.data.reservationFor\\n\\t\\t},\\n\\t},\\n\\tmethods: {\\n\\t\\tgetEndDateTime(event) {\\n\\t\\t\\tif ('endDate' in this.data.reservationFor) {\\n\\t\\t\\t\\treturn moment(this.data.reservationFor.endDate).format()\\n\\t\\t\\t} else {\\n\\t\\t\\t\\t// Assume it's 2h and user will adjust if necessary\\n\\t\\t\\t\\t// TODO: handle 'duration' https://schema.org/Event\\n\\t\\t\\t\\treturn moment('2019-10-22T12:00:00Z').add(2, 'hours').format()\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\thandleImport(calendar) {\\n\\t\\t\\tconst event = new ical.Component('VEVENT')\\n\\t\\t\\tevent.updatePropertyWithValue('SUMMARY', this.eventName)\\n\\n\\t\\t\\tconst start = moment(this.data.reservationFor.startDate).format()\\n\\t\\t\\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(start))\\n\\t\\t\\tevent.updatePropertyWithValue(\\n\\t\\t\\t\\t'DTEND',\\n\\t\\t\\t\\tical.Time.fromDateTimeString(this.getEndDateTime(this.data.reservationFor))\\n\\t\\t\\t)\\n\\n\\t\\t\\tif ('location' in this.data.reservationFor) {\\n\\t\\t\\t\\tevent.updatePropertyWithValue('LOCATION', this.data.reservationFor.location.name)\\n\\t\\t\\t\\tif ('geo' in this.data.reservationFor.location) {\\n\\t\\t\\t\\t\\t// https://www.kanzaki.com/docs/ical/geo.html\\n\\t\\t\\t\\t\\tevent.updatePropertyWithValue(\\n\\t\\t\\t\\t\\t\\t'GEO',\\n\\t\\t\\t\\t\\t\\t`${this.data.reservationFor.location.geo.latitude};${this.data.reservationFor.location.geo.longitude}`\\n\\t\\t\\t\\t\\t)\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\n\\t\\t\\t// TODO: read version from package.json\\n\\t\\t\\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\\n\\n\\t\\t\\t// TODO: is this free of collisions? the bug reports will tell us!\\n\\t\\t\\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.eventName))\\n\\n\\t\\t\\tconst cal = new ical.Component('VCALENDAR')\\n\\t\\t\\tcal.addSubcomponent(event)\\n\\t\\t\\tlogger.debug('generated calendar event from event reservation data', { ical: cal.toString() })\\n\\t\\t\\treturn importCalendarEvent(calendar.url)(cal.toString())\\n\\t\\t\\t\\t.then(() => {\\n\\t\\t\\t\\t\\tlogger.debug('event successfully imported')\\n\\t\\t\\t\\t\\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\t.catch((error) => {\\n\\t\\t\\t\\t\\tlogger.error('Could not import event', { error })\\n\\t\\t\\t\\t\\tshowError(t('mail', 'Could not create event'))\\n\\t\\t\\t\\t})\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n.reservation {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tmargin: 30px 38px;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 20px;\\n\\talign-items: center;\\n}\\n\\n.event {\\n\\tflex-grow: 1;\\n}\\n\\n.event-name {\\n\\tfont-size: larger;\\n\\tfont-weight: bold;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.reservation[data-v-670645fc] {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tmargin: 30px 38px;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 20px;\\n\\talign-items: center;\\n}\\n.departure[data-v-670645fc],\\n.arrival[data-v-670645fc] {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tflex-grow: 1;\\n}\\n.departure[data-v-670645fc],\\n.arrival[data-v-670645fc],\\n.connection[data-v-670645fc] {\\n\\tjustify-content: center;\\n}\\n.iata[data-v-670645fc] {\\n\\tfont-size: larger;\\n\\tfont-weight: bold;\\n}\\n.airport[data-v-670645fc] {\\n\\tfont-size: large;\\n}\\n.departure[data-v-670645fc] {\\n\\ttext-align: right;\\n}\\n.connection[data-v-670645fc] {\\n\\ttext-align: center;\\n\\tpadding: 0 40px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/itinerary/FlightReservation.vue\"],\"names\":[],\"mappings\":\";AA6JA;CACA,aAAA;CACA,mBAAA;CACA,iBAAA;CACA,qCAAA;CACA,mCAAA;CACA,aAAA;CACA,mBAAA;AACA;AAEA;;CAEA,aAAA;CACA,sBAAA;CACA,YAAA;AACA;AAEA;;;CAGA,uBAAA;AACA;AAEA;CACA,iBAAA;CACA,iBAAA;AACA;AAEA;CACA,gBAAA;AACA;AAEA;CACA,iBAAA;AACA;AAEA;CACA,kBAAA;CACA,eAAA;AACA\",\"sourcesContent\":[\"<template>\\n\\t<div class=\\\"reservation\\\">\\n\\t\\t<div class=\\\"departure\\\">\\n\\t\\t\\t<div class=\\\"iata\\\">\\n\\t\\t\\t\\t{{ data.reservationFor.departureAirport.iataCode }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class=\\\"airport\\\">\\n\\t\\t\\t\\t{{ data.reservationFor.departureAirport.name }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"departureDate\\\">\\n\\t\\t\\t\\t{{ departureDate }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"departureTime\\\">\\n\\t\\t\\t\\t{{ departureTime }}\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<div class=\\\"connection\\\">\\n\\t\\t\\t<div><AirplaneIcon :title=\\\"t('mail', 'Airplane')\\\" /></div>\\n\\t\\t\\t<div>{{ flightNumber }}</div>\\n\\t\\t\\t<div v-if=\\\"reservation\\\">\\n\\t\\t\\t\\t{{ t('mail', 'Reservation {id}', {id: reservation}) }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-else>\\n\\t\\t\\t\\t<ArrowIcon decorative />\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<div class=\\\"arrival\\\">\\n\\t\\t\\t<div class=\\\"iata\\\">\\n\\t\\t\\t\\t{{ data.reservationFor.arrivalAirport.iataCode }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class=\\\"airport\\\">\\n\\t\\t\\t\\t{{ data.reservationFor.arrivalAirport.name }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"arrivalDate\\\">\\n\\t\\t\\t\\t{{ arrivalDate }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"arrivalTime\\\">\\n\\t\\t\\t\\t{{ arrivalTime }}\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<CalendarImport :calendars=\\\"calendars\\\" :handler=\\\"handleImport\\\" />\\n\\t</div>\\n</template>\\n\\n<script>\\nimport AirplaneIcon from 'vue-material-design-icons/Airplane'\\nimport ArrowIcon from 'vue-material-design-icons/ArrowRight'\\nimport ical from 'ical.js'\\nimport md5 from 'md5'\\nimport moment from '@nextcloud/moment'\\nimport { showError, showSuccess } from '@nextcloud/dialogs'\\n\\nimport CalendarImport from './CalendarImport'\\nimport { importCalendarEvent } from '../../service/DAVService'\\nimport logger from '../../logger'\\n\\nexport default {\\n\\tname: 'FlightReservation',\\n\\tcomponents: {\\n\\t\\tAirplaneIcon,\\n\\t\\tArrowIcon,\\n\\t\\tCalendarImport,\\n\\t},\\n\\tprops: {\\n\\t\\tdata: {\\n\\t\\t\\ttype: Object,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tcalendars: {\\n\\t\\t\\ttype: Array,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tmessageId: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t},\\n\\tcomputed: {\\n\\t\\tdepartureTime() {\\n\\t\\t\\tif (!('departureTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(this.data.reservationFor.departureTime['@value']).format('LT')\\n\\t\\t},\\n\\t\\tdepartureDate() {\\n\\t\\t\\tif (!('departureTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(this.data.reservationFor.departureTime['@value']).format('L')\\n\\t\\t},\\n\\t\\tarrivalTime() {\\n\\t\\t\\tif (!('arrivalTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(this.data.reservationFor.arrivalTime['@value']).format('LT')\\n\\t\\t},\\n\\t\\tarrivalDate() {\\n\\t\\t\\tif (!('arrivalTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(this.data.reservationFor.arrivalTime['@value']).format('L')\\n\\t\\t},\\n\\t\\tflightNumber() {\\n\\t\\t\\treturn this.data.reservationFor.airline.iataCode + this.data.reservationFor.flightNumber\\n\\t\\t},\\n\\t\\treservation() {\\n\\t\\t\\tif (!('reservationNumber' in this.data)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn this.data.reservationNumber\\n\\t\\t},\\n\\t\\tcanImport() {\\n\\t\\t\\treturn 'departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor\\n\\t\\t},\\n\\t},\\n\\tmethods: {\\n\\t\\thandleImport(calendar) {\\n\\t\\t\\tconst event = new ical.Component('VEVENT')\\n\\t\\t\\tevent.updatePropertyWithValue(\\n\\t\\t\\t\\t'SUMMARY',\\n\\t\\t\\t\\tt('mail', 'Flight {flightNr} from {depAirport} to {arrAirport}', {\\n\\t\\t\\t\\t\\tflightNr: this.flightNumber,\\n\\t\\t\\t\\t\\tdepAirport: this.data.reservationFor.departureAirport.iataCode,\\n\\t\\t\\t\\t\\tarrAirport: this.data.reservationFor.arrivalAirport.iataCode,\\n\\t\\t\\t\\t})\\n\\t\\t\\t)\\n\\n\\t\\t\\tconst depart = moment(this.data.reservationFor.departureTime['@value']).format()\\n\\t\\t\\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(depart))\\n\\t\\t\\tconst arrive = moment(this.data.reservationFor.arrivalTime['@value']).format()\\n\\t\\t\\tevent.updatePropertyWithValue('DTEND', ical.Time.fromDateTimeString(arrive))\\n\\n\\t\\t\\t// TODO: read version from package.json\\n\\t\\t\\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\\n\\n\\t\\t\\t// TODO: is this free of collisions? the bug reports will tell us!\\n\\t\\t\\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.flightNumber))\\n\\n\\t\\t\\tconst cal = new ical.Component('VCALENDAR')\\n\\t\\t\\tcal.addSubcomponent(event)\\n\\t\\t\\tlogger.debug('generated calendar event from flight reservation data', { ical: cal.toString() })\\n\\n\\t\\t\\treturn importCalendarEvent(calendar.url)(cal.toString())\\n\\t\\t\\t\\t.then(() => {\\n\\t\\t\\t\\t\\tlogger.debug('event successfully imported')\\n\\t\\t\\t\\t\\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\t.catch((error) => {\\n\\t\\t\\t\\t\\tlogger.error('Could not import event', { error })\\n\\t\\t\\t\\t\\tshowError(t('mail', 'Could not create event'))\\n\\t\\t\\t\\t})\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n.reservation {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tmargin: 30px 38px;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 20px;\\n\\talign-items: center;\\n}\\n\\n.departure,\\n.arrival {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tflex-grow: 1;\\n}\\n\\n.departure,\\n.arrival,\\n.connection {\\n\\tjustify-content: center;\\n}\\n\\n.iata {\\n\\tfont-size: larger;\\n\\tfont-weight: bold;\\n}\\n\\n.airport {\\n\\tfont-size: large;\\n}\\n\\n.departure {\\n\\ttext-align: right;\\n}\\n\\n.connection {\\n\\ttext-align: center;\\n\\tpadding: 0 40px;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.reservation[data-v-1eebd676] {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tmargin: 30px 38px;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 20px;\\n\\talign-items: center;\\n}\\n.departure[data-v-1eebd676],\\n.arrival[data-v-1eebd676] {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tflex-grow: 1;\\n}\\n.departure[data-v-1eebd676],\\n.arrival[data-v-1eebd676],\\n.connection[data-v-1eebd676] {\\n\\tjustify-content: center;\\n}\\n.station[data-v-1eebd676] {\\n\\tfont-size: larger;\\n\\tfont-weight: bold;\\n}\\n.departure[data-v-1eebd676] {\\n\\ttext-align: right;\\n}\\n.connection[data-v-1eebd676] {\\n\\ttext-align: center;\\n\\tpadding: 0 40px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/itinerary/TrainReservation.vue\"],\"names\":[],\"mappings\":\";AAiKA;CACA,aAAA;CACA,mBAAA;CACA,iBAAA;CACA,qCAAA;CACA,mCAAA;CACA,aAAA;CACA,mBAAA;AACA;AAEA;;CAEA,aAAA;CACA,sBAAA;CACA,YAAA;AACA;AAEA;;;CAGA,uBAAA;AACA;AAEA;CACA,iBAAA;CACA,iBAAA;AACA;AAEA;CACA,iBAAA;AACA;AAEA;CACA,kBAAA;CACA,eAAA;AACA\",\"sourcesContent\":[\"<template>\\n\\t<div class=\\\"reservation\\\">\\n\\t\\t<div class=\\\"departure\\\">\\n\\t\\t\\t<div class=\\\"station\\\">\\n\\t\\t\\t\\t{{ data.reservationFor.departureStation.name }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"departureDate\\\">\\n\\t\\t\\t\\t{{ departureDate }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"departureTime\\\">\\n\\t\\t\\t\\t{{ departureTime }}\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<div class=\\\"connection\\\">\\n\\t\\t\\t<div><TrainIcon :title=\\\"t('mail', 'Train')\\\" /></div>\\n\\t\\t\\t<div>{{ trainNumber }}</div>\\n\\t\\t\\t<div><ArrowIcon decorative /></div>\\n\\t\\t</div>\\n\\t\\t<div class=\\\"arrival\\\">\\n\\t\\t\\t<div class=\\\"station\\\">\\n\\t\\t\\t\\t{{ data.reservationFor.arrivalStation.name }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"arrivalDate\\\">\\n\\t\\t\\t\\t{{ arrivalDate }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"arrivalTime\\\">\\n\\t\\t\\t\\t{{ arrivalTime }}\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<CalendarImport v-if=\\\"canImport\\\" :calendars=\\\"calendars\\\" :handler=\\\"handleImport\\\" />\\n\\t</div>\\n</template>\\n\\n<script>\\nimport ArrowIcon from 'vue-material-design-icons/ArrowRight'\\nimport ical from 'ical.js'\\nimport md5 from 'md5'\\nimport moment from '@nextcloud/moment'\\nimport { showError, showSuccess } from '@nextcloud/dialogs'\\nimport TrainIcon from 'vue-material-design-icons/Train'\\n\\nimport CalendarImport from './CalendarImport'\\nimport { importCalendarEvent } from '../../service/DAVService'\\nimport logger from '../../logger'\\n\\nexport default {\\n\\tname: 'TrainReservation',\\n\\tcomponents: {\\n\\t\\tArrowIcon,\\n\\t\\tCalendarImport,\\n\\t\\tTrainIcon,\\n\\t},\\n\\tprops: {\\n\\t\\tdata: {\\n\\t\\t\\ttype: Object,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tcalendars: {\\n\\t\\t\\ttype: Array,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tmessageId: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t},\\n\\tcomputed: {\\n\\t\\tdepartureTime() {\\n\\t\\t\\tif (!('departureTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(this.data.reservationFor.departureTime).format('LT')\\n\\t\\t},\\n\\t\\tdepartureDate() {\\n\\t\\t\\tif ('departureTime' in this.data.reservationFor) {\\n\\t\\t\\t\\treturn moment(this.data.reservationFor.departureTime).format('L')\\n\\t\\t\\t}\\n\\t\\t\\tif ('departureDay' in this.data.reservationFor) {\\n\\t\\t\\t\\treturn moment(this.data.reservationFor.departureDay).format('L')\\n\\t\\t\\t}\\n\\t\\t\\treturn undefined\\n\\t\\t},\\n\\t\\tarrivalTime() {\\n\\t\\t\\tif (!('arrivalTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(this.data.reservationFor.arrivalTime).format('LT')\\n\\t\\t},\\n\\t\\tarrivalDate() {\\n\\t\\t\\tif (!('arrivalTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(this.data.reservationFor.arrivalTime).format('L')\\n\\t\\t},\\n\\t\\ttrainNumber() {\\n\\t\\t\\treturn this.data.reservationFor.trainNumber\\n\\t\\t},\\n\\t\\tcanImport() {\\n\\t\\t\\treturn (\\n\\t\\t\\t\\t('departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor)\\n\\t\\t\\t\\t|| 'departureDay' in this.data.reservationFor\\n\\t\\t\\t)\\n\\t\\t},\\n\\t},\\n\\tmethods: {\\n\\t\\thandleImport(calendar) {\\n\\t\\t\\tconst event = new ical.Component('VEVENT')\\n\\t\\t\\tif ('trainNumber' in this.data.reservationFor) {\\n\\t\\t\\t\\tevent.updatePropertyWithValue(\\n\\t\\t\\t\\t\\t'SUMMARY',\\n\\t\\t\\t\\t\\tt('mail', '{trainNr} from {depStation} to {arrStation}', {\\n\\t\\t\\t\\t\\t\\ttrainNr: this.data.reservationFor.trainNumber,\\n\\t\\t\\t\\t\\t\\tdepStation: this.data.reservationFor.departureStation.name,\\n\\t\\t\\t\\t\\t\\tarrStation: this.data.reservationFor.arrivalStation.name,\\n\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t)\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tevent.updatePropertyWithValue(\\n\\t\\t\\t\\t\\t'SUMMARY',\\n\\t\\t\\t\\t\\tt('mail', 'Train from {depStation} to {arrStation}', {\\n\\t\\t\\t\\t\\t\\tdepStation: this.data.reservationFor.departureStation.name,\\n\\t\\t\\t\\t\\t\\tarrStation: this.data.reservationFor.arrivalStation.name,\\n\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t)\\n\\t\\t\\t}\\n\\n\\t\\t\\tif ('departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor) {\\n\\t\\t\\t\\tconst depart = moment(this.data.reservationFor.departureTime).format()\\n\\t\\t\\t\\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(depart))\\n\\t\\t\\t\\tconst arrive = moment(this.data.reservationFor.arrivalTime).format()\\n\\t\\t\\t\\tevent.updatePropertyWithValue('DTEND', ical.Time.fromDateTimeString(arrive))\\n\\t\\t\\t} else if ('departureDay' in this.data.reservationFor) {\\n\\t\\t\\t\\tconst date = moment(this.data.reservationFor.departureDay).format()\\n\\t\\t\\t\\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(date))\\n\\t\\t\\t}\\n\\n\\t\\t\\t// TODO: read version from package.json\\n\\t\\t\\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\\n\\n\\t\\t\\t// TODO: is this free of collisions? the bug reports will tell us!\\n\\t\\t\\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.departureTime))\\n\\n\\t\\t\\tconst cal = new ical.Component('VCALENDAR')\\n\\t\\t\\tcal.addSubcomponent(event)\\n\\t\\t\\tlogger.debug('generated calendar event from train reservation data', { ical: cal.toString() })\\n\\n\\t\\t\\treturn importCalendarEvent(calendar.url)(cal.toString())\\n\\t\\t\\t\\t.then(() => {\\n\\t\\t\\t\\t\\tlogger.debug('event successfully imported')\\n\\t\\t\\t\\t\\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\t.catch((error) => {\\n\\t\\t\\t\\t\\tlogger.error('Could not import event', { error })\\n\\t\\t\\t\\t\\tshowError(t('mail', 'Could not create event'))\\n\\t\\t\\t\\t})\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n.reservation {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tmargin: 30px 38px;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 20px;\\n\\talign-items: center;\\n}\\n\\n.departure,\\n.arrival {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tflex-grow: 1;\\n}\\n\\n.departure,\\n.arrival,\\n.connection {\\n\\tjustify-content: center;\\n}\\n\\n.station {\\n\\tfont-size: larger;\\n\\tfont-weight: bold;\\n}\\n\\n.departure {\\n\\ttext-align: right;\\n}\\n\\n.connection {\\n\\ttext-align: center;\\n\\tpadding: 0 40px;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".attachment[data-v-473b0a1e]{position:relative;display:inline-block;width:calc(100% - 32px);padding:16px}.attachment[data-v-473b0a1e]:hover,.attachment span[data-v-473b0a1e]:hover{background-color:var(--color-background-hover);cursor:pointer}.mail-attached-image[data-v-473b0a1e]{display:block;max-width:100%;border-radius:var(--border-radius);cursor:pointer}.mail-attached-image[data-v-473b0a1e]:hover{opacity:.8}.attachment-save-to-cloud[data-v-473b0a1e],.attachment-download[data-v-473b0a1e],.attachment-import[data-v-473b0a1e]{position:absolute;padding:21px;margin:0;bottom:6px;background-color:transparent;border-color:transparent}.attachment-save-to-cloud[data-v-473b0a1e]{right:0}.attachment-download[data-v-473b0a1e]{right:32px;opacity:.6}.attachment-import[data-v-473b0a1e]{right:64px}.attachment-import-popover[data-v-473b0a1e]{right:32px;top:42px}.attachment-import-popover[data-v-473b0a1e]::after{right:32px}.attachment-name[data-v-473b0a1e]{display:inline-block;width:calc(100% - 72px);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;vertical-align:middle}.attachment-size[data-v-473b0a1e]{-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)\\\";opacity:.5}.attachment-icon[data-v-473b0a1e]{vertical-align:middle;text-align:left}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MessageAttachment.vue\"],\"names\":[],\"mappings\":\"AAgMA,6BACC,iBAAA,CACA,oBAAA,CACA,uBAAA,CACA,YAAA,CAGD,2EAEC,8CAAA,CACA,cAAA,CAGD,sCACC,aAAA,CACA,cAAA,CACA,kCAAA,CACA,cAAA,CAED,4CACC,UAAA,CAGD,qHAGC,iBAAA,CACA,YAAA,CACA,QAAA,CACA,UAAA,CACA,4BAAA,CACA,wBAAA,CAGD,2CACC,OAAA,CAGD,sCACC,UAAA,CACA,UAAA,CAGD,oCACC,UAAA,CAGD,4CACC,UAAA,CACA,QAAA,CAGD,mDACC,UAAA,CAGD,kCACC,oBAAA,CACA,uBAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,qBAAA,CAID,kCACC,gEAAA,CACA,UAAA,CAGD,kCACC,qBAAA,CACA,eAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.attachment {\\n\\tposition: relative;\\n\\tdisplay: inline-block;\\n\\twidth: calc(100% - 32px);\\n\\tpadding: 16px;\\n}\\n\\n.attachment:hover,\\n.attachment span:hover {\\n\\tbackground-color: var(--color-background-hover);\\n\\tcursor: pointer;\\n}\\n\\n.mail-attached-image {\\n\\tdisplay: block;\\n\\tmax-width: 100%;\\n\\tborder-radius: var(--border-radius);\\n\\tcursor: pointer;\\n}\\n.mail-attached-image:hover {\\n\\topacity: 0.8;\\n}\\n\\n.attachment-save-to-cloud,\\n.attachment-download,\\n.attachment-import {\\n\\tposition: absolute;\\n\\tpadding: 21px;\\n\\tmargin: 0;\\n\\tbottom: 6px;\\n\\tbackground-color: transparent;\\n\\tborder-color: transparent;\\n}\\n\\n.attachment-save-to-cloud {\\n\\tright: 0;\\n}\\n\\n.attachment-download {\\n\\tright: 32px;\\n\\topacity: 0.6;\\n}\\n\\n.attachment-import {\\n\\tright: 64px;\\n}\\n\\n.attachment-import-popover {\\n\\tright: 32px;\\n\\ttop: 42px;\\n}\\n\\n.attachment-import-popover::after {\\n\\tright: 32px;\\n}\\n\\n.attachment-name {\\n\\tdisplay: inline-block;\\n\\twidth: calc(100% - 72px);\\n\\twhite-space: nowrap;\\n\\toverflow: hidden;\\n\\ttext-overflow: ellipsis;\\n\\tvertical-align: middle;\\n}\\n\\n/* show attachment size less prominent */\\n.attachment-size {\\n\\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=50)';\\n\\topacity: 0.5;\\n}\\n\\n.attachment-icon {\\n\\tvertical-align: middle;\\n\\ttext-align: left;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".attachments{width:300px}.attachments-button-wrapper{text-align:center}.attachments-save-to-cloud{display:inline-block;margin:16px;background-position:16px center;padding:12px;padding-left:44px}.oc-dialog{z-index:10000000}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MessageAttachments.vue\"],\"names\":[],\"mappings\":\"AA6HA,aACC,WAAA,CAKD,4BACC,iBAAA,CAED,2BACC,oBAAA,CACA,WAAA,CACA,+BAAA,CACA,YAAA,CACA,iBAAA,CAED,WACC,gBAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.attachments {\\n\\twidth: 300px;\\n}\\n\\n/* show icon + text for Download all button\\n\\t\\tas well as when there is only one attachment */\\n.attachments-button-wrapper {\\n\\ttext-align: center;\\n}\\n.attachments-save-to-cloud {\\n\\tdisplay: inline-block;\\n\\tmargin: 16px;\\n\\tbackground-position: 16px center;\\n\\tpadding: 12px;\\n\\tpadding-left: 44px;\\n}\\n.oc-dialog {\\n\\tz-index: 10000000;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".mail-message-has-mdn-request[data-v-3bf60f28]{white-space:normal}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MdnRequest.vue\"],\"names\":[],\"mappings\":\"AA4DA,+CACC,kBAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.mail-message-has-mdn-request {\\n\\twhite-space: normal;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n#mail-content[data-v-812ccd96] {\\n\\theight: 450px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MessageEncryptedBody.vue\"],\"names\":[],\"mappings\":\";AA8CA;CACA,aAAA;AACA\",\"sourcesContent\":[\"<template>\\n\\t<div>\\n\\t\\t<div v-if=\\\"mailvelope\\\" id=\\\"mail-content\\\">\\n\\t\\t\\t<MdnRequest :message=\\\"message\\\" />\\n\\t\\t</div>\\n\\t\\t<span v-else>{{ t('mail', 'This message is encrypted with PGP. Install Mailvelope to decrypt it.') }}</span>\\n\\t</div>\\n</template>\\n\\n<script>\\nimport { getMailvelope } from '../crypto/mailvelope'\\nimport MdnRequest from './MdnRequest'\\n\\nexport default {\\n\\tname: 'MessageEncryptedBody',\\n\\tcomponents: { MdnRequest },\\n\\tprops: {\\n\\t\\tbody: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tfrom: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: false,\\n\\t\\t\\tdefault: undefined,\\n\\t\\t},\\n\\t\\tmessage: {\\n\\t\\t\\trequired: true,\\n\\t\\t\\ttype: Object,\\n\\t\\t},\\n\\t},\\n\\tdata() {\\n\\t\\treturn {\\n\\t\\t\\tmailvelope: false,\\n\\t\\t}\\n\\t},\\n\\tasync mounted() {\\n\\t\\tthis.mailvelope = await getMailvelope()\\n\\t\\tthis.mailvelope.createDisplayContainer('#mail-content', this.body, undefined, {\\n\\t\\t\\tsenderAddress: this.from,\\n\\t\\t})\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n#mail-content {\\n\\theight: 450px;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#mail-content[data-v-566bc156]{margin-left:48px;margin-top:2px;display:flex;flex-direction:column;height:100%;background-color:#fff}#mail-message-has-blocked-content[data-v-566bc156]{margin-left:8px}#message-container[data-v-566bc156]{flex:1;display:flex;background-color:#fff}#message-container.scroll[data-v-566bc156]{max-height:50vh;overflow-y:auto}[data-v-566bc156] .icon-toggle{background-image:var(--icon-toggle-000) !important}[data-v-566bc156] .action-item__menutoggle--with-title{background-color:var(--color-background-hover) !important}.message-frame[data-v-566bc156]{width:100%}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MessageHTMLBody.vue\"],\"names\":[],\"mappings\":\"AA8IA,+BACC,gBAAA,CACA,cAAA,CACA,YAAA,CACA,qBAAA,CACA,WAAA,CACA,qBAAA,CAED,mDACC,eAAA,CAGD,oCACC,MAAA,CACA,YAAA,CACA,qBAAA,CAGA,2CACC,eAAA,CACA,eAAA,CAGF,+BACC,kDAAA,CAED,uDACC,yDAAA,CAED,gCACC,UAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n// account for 8px margin on iframe body\\n#mail-content {\\n\\tmargin-left: 48px;\\n\\tmargin-top: 2px;\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\theight: 100%;\\n\\tbackground-color: #FFFFFF;\\n}\\n#mail-message-has-blocked-content {\\n\\tmargin-left: 8px;\\n}\\n\\n#message-container {\\n\\tflex: 1;\\n\\tdisplay: flex;\\n\\tbackground-color: #FFFFFF;\\n\\n\\t// TODO: collapse quoted text and remove inner scrollbar\\n\\t&.scroll {\\n\\t\\tmax-height: 50vh;\\n\\t\\toverflow-y: auto;\\n\\t}\\n}\\n::v-deep .icon-toggle {\\n\\tbackground-image: var(--icon-toggle-000) !important;\\n}\\n::v-deep .action-item__menutoggle--with-title {\\n\\tbackground-color: var(--color-background-hover) !important;\\n}\\n.message-frame {\\n\\twidth: 100%;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".quoted-text{color:var(--color-text-maxcontrast)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MessagePlainTextBody.vue\"],\"names\":[],\"mappings\":\"AAqEA,aACC,mCAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.quoted-text {\\n\\tcolor: var(--color-text-maxcontrast)\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#mail-content[data-v-6bd2c088],.mail-signature[data-v-6bd2c088]{white-space:pre-wrap}.mail-signature[data-v-6bd2c088],.quoted[data-v-6bd2c088]{color:var(--color-text-maxcontrast)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MessagePlainTextBody.vue\"],\"names\":[],\"mappings\":\"AA0EA,gEACC,oBAAA,CAED,0DACC,mCAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n#mail-content, .mail-signature {\\n\\twhite-space: pre-wrap;\\n}\\n.mail-signature, .quoted {\\n\\tcolor: var(--color-text-maxcontrast)\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".v-popover>.trigger>.action-item[data-v-106a4f26]{border-radius:22px;background-color:var(--color-background-darker)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Message.vue\"],\"names\":[],\"mappings\":\"AA8GA,kDACC,kBAAA,CACA,+CAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.v-popover > .trigger > .action-item {\\n\\tborder-radius: 22px;\\n\\tbackground-color: var(--color-background-darker);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".source-modal[data-v-4870a97e]  .modal-container{height:800px}.source-modal .source-modal-content[data-v-4870a97e]{width:100%;height:100%;overflow-y:scroll !important}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MenuEnvelope.vue\"],\"names\":[],\"mappings\":\"AAqWC,iDACC,YAAA,CAGD,qDACC,UAAA,CACA,WAAA,CACA,4BAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.source-modal {\\n\\t::v-deep .modal-container {\\n\\t\\theight: 800px;\\n\\t}\\n\\n\\t.source-modal-content {\\n\\t\\twidth: 100%;\\n\\t\\theight: 100%;\\n\\t\\toverflow-y: scroll !important;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".sender[data-v-0737c023]{margin-left:8px}.right[data-v-0737c023]{display:flex;flex-direction:row;align-items:center;justify-content:flex-end;margin-left:10px;margin-right:22px;height:44px}.right .app-content-list-item-menu[data-v-0737c023]{margin-left:4px}.right .timestamp[data-v-0737c023]{margin-right:10px;font-size:small;white-space:nowrap;margin-bottom:0}.button[data-v-0737c023]{color:var(--color-main-background)}.button[data-v-0737c023]:not(.active):not(.primary){display:none}.button:not(.active):not(.primary).primary[data-v-0737c023]{background-color:var(--color-primary);opacity:1;margin-bottom:0}.avatardiv[data-v-0737c023]{display:inline-block;margin-bottom:-23px}.subject[data-v-0737c023]{margin-left:8px;cursor:default}.envelope[data-v-0737c023]{display:flex;flex-direction:column}.envelope--header[data-v-0737c023]{position:relative;display:flex;padding:10px;margin-bottom:3px;border-radius:var(--border-radius)}.envelope--header[data-v-0737c023]:hover{background-color:var(--color-background-hover);border-radius:16px}.left[data-v-0737c023]{flex-grow:1}.icon-important[data-v-0737c023]  path{fill:#fc0;stroke:var(--color-main-background);cursor:pointer}.icon-important.app-content-list-item-star[data-v-0737c023]{background-image:none;position:absolute;opacity:1;width:16px;height:16px;margin-left:-1px;display:flex}.icon-important.app-content-list-item-star[data-v-0737c023]:hover,.icon-important.app-content-list-item-star[data-v-0737c023]:focus{opacity:.5}.app-content-list-item-star.icon-starred[data-v-0737c023]{display:inline-block;position:absolute;margin-top:-2px;margin-left:27px;cursor:pointer}.left[data-v-0737c023]:not(.seen){font-weight:bold}.tag-group__label[data-v-0737c023]{margin:0 7px;z-index:2;font-size:calc(var(--default-font-size) * 0.8);font-weight:bold;padding-left:2px;padding-right:2px}.tag-group__bg[data-v-0737c023]{position:absolute;width:100%;height:100%;top:0;left:0;opacity:15%}.tag-group[data-v-0737c023]{display:inline-block;border:1px solid transparent;border-radius:var(--border-radius-pill);position:relative;margin:0 1px;overflow:hidden;left:4px}.envelope--header.list-item-style[data-v-0737c023]{border-radius:16px;background-color:var(--color-primary-light)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/ThreadEnvelope.vue\"],\"names\":[],\"mappings\":\"AAkRA,yBACC,eAAA,CAGD,wBACC,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,wBAAA,CACA,gBAAA,CACA,iBAAA,CACA,WAAA,CAEA,oDACC,eAAA,CAGD,mCACC,iBAAA,CACA,eAAA,CACA,kBAAA,CACA,eAAA,CAGF,yBACC,kCAAA,CACA,oDACC,YAAA,CAEA,4DACC,qCAAA,CACA,SAAA,CACA,eAAA,CAKH,4BACC,oBAAA,CACA,mBAAA,CAED,0BACC,eAAA,CACA,cAAA,CAGD,2BACC,YAAA,CACA,qBAAA,CAGD,mCACC,iBAAA,CACA,YAAA,CACA,YAAA,CACA,iBAAA,CACA,kCAAA,CAEA,yCACC,8CAAA,CACA,kBAAA,CAGF,uBACC,WAAA,CAGA,uCACC,SAAA,CACA,mCAAA,CACA,cAAA,CAGD,4DACC,qBAAA,CACA,iBAAA,CACA,SAAA,CACA,UAAA,CACA,WAAA,CACA,gBAAA,CACA,YAAA,CAEA,oIAEC,UAAA,CAIH,0DACC,oBAAA,CACA,iBAAA,CACA,eAAA,CACA,gBAAA,CACA,cAAA,CAED,kCACC,gBAAA,CAED,mCACC,YAAA,CACA,SAAA,CACA,8CAAA,CACA,gBAAA,CACA,gBAAA,CACA,iBAAA,CAED,gCACC,iBAAA,CACA,UAAA,CACA,WAAA,CACA,KAAA,CACA,MAAA,CACA,WAAA,CAED,4BACC,oBAAA,CACA,4BAAA,CACA,uCAAA,CACA,iBAAA,CACA,YAAA,CACA,eAAA,CACA,QAAA,CAED,mDACC,kBAAA,CACA,2CAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.sender {\\n\\tmargin-left: 8px;\\n}\\n\\n.right {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\talign-items: center;\\n\\tjustify-content: flex-end;\\n\\tmargin-left: 10px;\\n\\tmargin-right: 22px;\\n\\theight: 44px;\\n\\n\\t.app-content-list-item-menu {\\n\\t\\tmargin-left: 4px;\\n\\t}\\n\\n\\t.timestamp {\\n\\t\\tmargin-right: 10px;\\n\\t\\tfont-size: small;\\n\\t\\twhite-space: nowrap;\\n\\t\\tmargin-bottom: 0;\\n\\t}\\n}\\n.button {\\n\\tcolor: var(--color-main-background);\\n\\t&:not(.active):not(.primary) {\\n\\t\\tdisplay: none;\\n\\n\\t\\t&.primary {\\n\\t\\t\\tbackground-color: var(--color-primary);\\n\\t\\t\\topacity: 1;\\n\\t\\t\\tmargin-bottom: 0;\\n\\n\\t\\t}\\n\\t}\\n}\\n.avatardiv {\\n\\tdisplay: inline-block;\\n\\tmargin-bottom: -23px;\\n}\\n.subject {\\n\\tmargin-left: 8px;\\n\\tcursor: default;\\n}\\n\\n.envelope {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n}\\n\\n.envelope--header {\\n\\tposition: relative;\\n\\tdisplay: flex;\\n\\tpadding: 10px;\\n\\tmargin-bottom: 3px;\\n\\tborder-radius: var(--border-radius);\\n\\n\\t&:hover {\\n\\t\\tbackground-color: var(--color-background-hover);\\n\\t\\tborder-radius: 16px;\\n\\t}\\n}\\n.left {\\n\\tflex-grow: 1;\\n}\\n.icon-important {\\n\\t::v-deep path {\\n\\t\\tfill: #ffcc00;\\n\\t\\tstroke: var(--color-main-background);\\n\\t\\tcursor: pointer;\\n\\t}\\n\\n\\t&.app-content-list-item-star {\\n\\t\\tbackground-image: none;\\n\\t\\tposition: absolute;\\n\\t\\topacity: 1;\\n\\t\\twidth: 16px;\\n\\t\\theight: 16px;\\n\\t\\tmargin-left: -1px;\\n\\t\\tdisplay: flex;\\n\\n\\t\\t&:hover,\\n\\t\\t&:focus {\\n\\t\\t\\topacity: 0.5;\\n\\t\\t}\\n\\t}\\n}\\n.app-content-list-item-star.icon-starred {\\n\\tdisplay: inline-block;\\n\\tposition: absolute;\\n\\tmargin-top: -2px;\\n\\tmargin-left: 27px;\\n\\tcursor: pointer;\\n}\\n.left:not(.seen) {\\n\\tfont-weight: bold;\\n}\\n.tag-group__label {\\n\\tmargin: 0 7px;\\n\\tz-index: 2;\\n\\tfont-size: calc(var(--default-font-size) * 0.8);\\n\\tfont-weight: bold;\\n\\tpadding-left: 2px;\\n\\tpadding-right: 2px;\\n}\\n.tag-group__bg {\\n\\tposition: absolute;\\n\\twidth: 100%;\\n\\theight: 100%;\\n\\ttop: 0;\\n\\tleft: 0;\\n\\topacity: 15%;\\n}\\n.tag-group {\\n\\tdisplay: inline-block;\\n\\tborder: 1px solid transparent;\\n\\tborder-radius: var(--border-radius-pill);\\n\\tposition: relative;\\n\\tmargin: 0 1px;\\n\\toverflow: hidden;\\n\\tleft: 4px;\\n}\\n.envelope--header.list-item-style {\\n\\tborder-radius: 16px;\\n\\tbackground-color: var(--color-primary-light);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#mail-message{flex-grow:1}#mail-message .icon-loading:only-child:after{margin-top:20px}.mail-message-body{flex:1;margin-bottom:60px;position:relative}#mail-thread-header{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:30px 0;box-sizing:content-box !important;height:44px;width:100%;z-index:100;position:fixed;position:-webkit-sticky;position:sticky;top:0;background:-webkit-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255, 255, 255, 0));background:-o-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255, 255, 255, 0));background:-moz-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255, 255, 255, 0));background:linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255, 255, 255, 0))}#mail-thread-header-fields{width:0;padding-left:60px;flex:1 1 auto}#mail-thread-header-fields h2,#mail-thread-header-fields p{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-bottom:7px;margin-bottom:0}#mail-thread-header-fields .transparency{opacity:.6}#mail-thread-header-fields .transparency a{font-weight:bold}.attachment-popover{position:sticky;bottom:12px;text-align:center}.tooltip-inner{text-align:left}#mail-content{margin:10px 38px 50px 60px}.mail-message-body-html #mail-content{margin-bottom:-44px}#mail-content iframe{width:100%}#show-images-text{display:none}#mail-content a,.mail-signature a{color:#07d;border-bottom:1px dotted #07d;text-decoration:none;word-wrap:break-word}.icon-reply-white,.icon-reply-all-white{height:44px;min-width:44px;margin:0;padding:9px 18px 10px 32px}@media only screen and (max-width: 600px){.action-label{display:none}}@media only screen and (min-width: 600px){.icon-reply-white,.icon-reply-all-white{background-position:12px center}}@media print{#mail-thread-header-fields{position:relative}#header,.app-navigation,#reply-composer,#forward-button,#mail-message-has-blocked-content,.app-content-list,.message-composer,.mail-message-attachments{display:none !important}.app-content{margin-left:0 !important}.mail-message-body{margin-bottom:0 !important}}.message-source{font-family:monospace;white-space:pre-wrap;user-select:text}.avatar-header{max-height:24px;overflow:hidden}.avatar-more{display:inline;background-color:var(--color-background-dark);padding:0px 0px 1px 1px;border-radius:10px;cursor:pointer}.avatar-hidden{visibility:hidden}.popover__wrapper{max-width:500px}.app-content-list-item-star.icon-starred{display:none}.user-bubble__wrapper{margin-right:4px}.user-bubble__title{cursor:pointer}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Thread.vue\"],\"names\":[],\"mappings\":\"AA+PA,cACC,WAAA,CAGC,6CACC,eAAA,CAKH,mBACC,MAAA,CACA,kBAAA,CACA,iBAAA,CAGD,oBACC,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,kBAAA,CACA,cAAA,CAIA,iCAAA,CACA,WAAA,CACA,UAAA,CAEA,WAAA,CACA,cAAA,CACA,uBAAA,CACA,eAAA,CACA,KAAA,CACA,0HAAA,CACA,qHAAA,CACA,uHAAA,CACA,kHAAA,CAGD,2BAEC,OAAA,CACA,iBAAA,CAEA,aAAA,CACA,2DAEC,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,kBAAA,CACA,eAAA,CAGD,yCACC,UAAA,CACA,2CACC,gBAAA,CAKH,oBACC,eAAA,CACA,WAAA,CACA,iBAAA,CAGD,eACC,eAAA,CAGD,cACC,0BAAA,CAEA,sCACC,mBAAA,CAIF,qBACC,UAAA,CAGD,kBACC,YAAA,CAGD,kCAEC,UAAA,CACA,6BAAA,CACA,oBAAA,CACA,oBAAA,CAGD,wCAEC,WAAA,CACA,cAAA,CACA,QAAA,CACA,0BAAA,CAKD,0CACC,cACC,YAAA,CAAA,CAGF,0CACC,wCAEC,+BAAA,CAAA,CAIF,aACC,2BACC,iBAAA,CAGD,wJAQC,uBAAA,CAED,aACC,wBAAA,CAED,mBACC,0BAAA,CAAA,CAIF,gBACC,qBAAA,CACA,oBAAA,CACA,gBAAA,CAGD,eACC,eAAA,CACA,eAAA,CAED,aACC,cAAA,CACA,6CAAA,CACA,uBAAA,CACA,kBAAA,CACA,cAAA,CAED,eACC,iBAAA,CAED,kBACC,eAAA,CAGD,yCACC,YAAA,CAED,sBACC,gBAAA,CAED,oBACC,cAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n#mail-message {\\n\\tflex-grow: 1;\\n\\n\\t.icon-loading {\\n\\t\\t&:only-child:after {\\n\\t\\t\\tmargin-top: 20px;\\n\\t\\t}\\n\\t}\\n}\\n\\n.mail-message-body {\\n\\tflex: 1;\\n\\tmargin-bottom: 60px;\\n\\tposition: relative;\\n}\\n\\n#mail-thread-header {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tjustify-content: space-between;\\n\\talign-items: center;\\n\\tpadding: 30px 0;\\n\\t// somehow ios doesn't care about this !important rule\\n\\t// so we have to manually set left/right padding to chidren\\n\\t// for 100% to be used\\n\\tbox-sizing: content-box !important;\\n\\theight: 44px;\\n\\twidth: 100%;\\n\\n\\tz-index: 100;\\n\\tposition: fixed; // ie fallback\\n\\tposition: -webkit-sticky; // ios/safari fallback\\n\\tposition: sticky;\\n\\ttop: 0;\\n\\tbackground: -webkit-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255,255,255,0));\\n\\tbackground: -o-linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\\n\\tbackground: -moz-linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\\n\\tbackground: linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\\n}\\n\\n#mail-thread-header-fields {\\n\\t// initial width\\n\\twidth: 0;\\n\\tpadding-left: 60px;\\n\\t// grow and try to fill 100%\\n\\tflex: 1 1 auto;\\n\\th2,\\n\\tp {\\n\\t\\twhite-space: nowrap;\\n\\t\\toverflow: hidden;\\n\\t\\ttext-overflow: ellipsis;\\n\\t\\tpadding-bottom: 7px;\\n\\t\\tmargin-bottom: 0;\\n\\t}\\n\\n\\t.transparency {\\n\\t\\topacity: 0.6;\\n\\t\\ta {\\n\\t\\t\\tfont-weight: bold;\\n\\t\\t}\\n\\t}\\n}\\n\\n.attachment-popover {\\n\\tposition: sticky;\\n\\tbottom: 12px;\\n\\ttext-align: center;\\n}\\n\\n.tooltip-inner {\\n\\ttext-align: left;\\n}\\n\\n#mail-content {\\n\\tmargin: 10px 38px 50px 60px;\\n\\n\\t.mail-message-body-html & {\\n\\t\\tmargin-bottom: -44px; // accounting for the sticky attachment button\\n\\t}\\n}\\n\\n#mail-content iframe {\\n\\twidth: 100%;\\n}\\n\\n#show-images-text {\\n\\tdisplay: none;\\n}\\n\\n#mail-content a,\\n.mail-signature a {\\n\\tcolor: #07d;\\n\\tborder-bottom: 1px dotted #07d;\\n\\ttext-decoration: none;\\n\\tword-wrap: break-word;\\n}\\n\\n.icon-reply-white,\\n.icon-reply-all-white {\\n\\theight: 44px;\\n\\tmin-width: 44px;\\n\\tmargin: 0;\\n\\tpadding: 9px 18px 10px 32px;\\n}\\n\\n/* Show action button label and move icon to the left\\n   on screens larger than 600px */\\n@media only screen and (max-width: 600px) {\\n\\t.action-label {\\n\\t\\tdisplay: none;\\n\\t}\\n}\\n@media only screen and (min-width: 600px) {\\n\\t.icon-reply-white,\\n\\t.icon-reply-all-white {\\n\\t\\tbackground-position: 12px center;\\n\\t}\\n}\\n\\n@media print {\\n\\t#mail-thread-header-fields {\\n\\t\\tposition: relative;\\n\\t}\\n\\n\\t#header,\\n\\t.app-navigation,\\n\\t#reply-composer,\\n\\t#forward-button,\\n\\t#mail-message-has-blocked-content,\\n\\t.app-content-list,\\n\\t.message-composer,\\n\\t.mail-message-attachments {\\n\\t\\tdisplay: none !important;\\n\\t}\\n\\t.app-content {\\n\\t\\tmargin-left: 0 !important;\\n\\t}\\n\\t.mail-message-body {\\n\\t\\tmargin-bottom: 0 !important;\\n\\t}\\n}\\n\\n.message-source {\\n\\tfont-family: monospace;\\n\\twhite-space: pre-wrap;\\n\\tuser-select: text;\\n}\\n\\n.avatar-header {\\n\\tmax-height: 24px;\\n\\toverflow: hidden;\\n}\\n.avatar-more {\\n\\tdisplay: inline;\\n\\tbackground-color: var(--color-background-dark);\\n\\tpadding: 0px 0px 1px 1px;\\n\\tborder-radius: 10px;\\n\\tcursor: pointer;\\n}\\n.avatar-hidden {\\n\\tvisibility: hidden;\\n}\\n.popover__wrapper {\\n\\tmax-width: 500px;\\n}\\n\\n.app-content-list-item-star.icon-starred {\\n\\tdisplay: none;\\n}\\n.user-bubble__wrapper {\\n\\tmargin-right: 4px;\\n}\\n.user-bubble__title {\\n\\tcursor: pointer;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".v-popover>.trigger[data-v-407d295e]>{z-index:1}.icon-info[data-v-407d295e]{background-image:var(--icon-info-000)}.important-info[data-v-407d295e]{max-width:230px;padding:16px}.app-content-list-item[data-v-407d295e]:hover{background:transparent}.button[data-v-407d295e]{background-color:var(--color-main-background);width:44px;height:44px;border:0;margin-bottom:17px}.button[data-v-407d295e]:hover,.button[data-v-407d295e]:focus{background-color:var(--color-background-dark)}#app-content-wrapper[data-v-407d295e]{display:flex}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MailboxThread.vue\"],\"names\":[],\"mappings\":\"AA+LA,sCACC,SAAA,CAGD,4BACC,qCAAA,CAGD,iCACC,eAAA,CACA,YAAA,CAGD,8CACC,sBAAA,CAGD,yBACC,6CAAA,CACA,UAAA,CACA,WAAA,CACA,QAAA,CACA,kBAAA,CAEA,8DAEC,6CAAA,CAIF,sCACC,YAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.v-popover > .trigger > {\\n\\tz-index: 1;\\n}\\n\\n.icon-info {\\n\\tbackground-image: var(--icon-info-000);\\n}\\n\\n.important-info {\\n\\tmax-width: 230px;\\n\\tpadding: 16px;\\n}\\n\\n.app-content-list-item:hover {\\n\\tbackground: transparent;\\n}\\n\\n.button {\\n\\tbackground-color: var(--color-main-background);\\n\\twidth: 44px;\\n\\theight: 44px;\\n\\tborder: 0;\\n\\tmargin-bottom: 17px;\\n\\n\\t&:hover,\\n\\t&:focus {\\n\\t\\tbackground-color: var(--color-background-dark);\\n\\t}\\n}\\n\\n#app-content-wrapper {\\n\\tdisplay: flex;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"[data-v-8e7f1bfa] .app-content-details{margin:0 auto;max-width:900px;display:flex;flex-direction:column;flex:1 1 100%;min-width:0}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/views/Home.vue\"],\"names\":[],\"mappings\":\"AAmHA,uCACC,aAAA,CACA,eAAA,CACA,YAAA,CACA,qBAAA,CACA,aAAA,CACA,WAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n::v-deep .app-content-details {\\n\\tmargin: 0 auto;\\n\\tmax-width: 900px;\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tflex: 1 1 100%;\\n\\tmin-width: 0;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Content',{directives:[{name:\"shortkey\",rawName:\"v-shortkey.once\",value:(['c']),expression:\"['c']\",modifiers:{\"once\":true}}],attrs:{\"app-name\":\"mail\"},nativeOn:{\"shortkey\":function($event){return _vm.onNewMessage.apply(null, arguments)}}},[_c('Navigation'),_vm._v(\" \"),(_vm.activeAccount)?_c('MailboxThread',{attrs:{\"account\":_vm.activeAccount,\"mailbox\":_vm.activeMailbox}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SectionTitle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SectionTitle.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2020 Greta Doçi <gretadoci@gmail.com>\n  -\n  - @author 2020 Greta Doçi <gretadoci@gmail.com>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div id=\"priority\">\n\t\t<div class=\"app-content-list-item\">\n\t\t\t<h2>{{ name }}</h2>\n\t\t</div>\n\t</div>\n</template>\n<script>\nexport default {\n\tname: 'SectionTitle',\n\tprops: {\n\t\tname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n#priority {\n\tdisplay: inline-block;\n}\n.app-content-list-item:hover {\n\tbackground-color: transparent;\n\topacity: 0.8;\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SectionTitle.vue?vue&type=style&index=0&id=95f06344&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./SectionTitle.vue?vue&type=template&id=95f06344&scoped=true&\"\nimport script from \"./SectionTitle.vue?vue&type=script&lang=js&\"\nexport * from \"./SectionTitle.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SectionTitle.vue?vue&type=style&index=0&id=95f06344&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"95f06344\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"priority\"}},[_c('div',{staticClass:\"app-content-list-item\"},[_c('h2',[_vm._v(_vm._s(_vm.name))])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* eslint-disable */\n\n/**\n * Vendored and fixed version of the abandoned https://github.com/ElemeFE/vue-infinite-scroll lib\n */\n\nconst ctx = '@@InfiniteScroll';\n\nvar throttle = function (fn, delay) {\n  var now, lastExec, timer, context, args; //eslint-disable-line\n\n  var execute = function () {\n    fn.apply(context, args);\n    lastExec = now;\n  };\n\n  return function () {\n    context = this;\n    args = arguments;\n\n    now = Date.now();\n\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n    }\n\n    if (lastExec) {\n      var diff = delay - (now - lastExec);\n      if (diff < 0) {\n        execute();\n      } else {\n        timer = setTimeout(() => {\n          execute();\n        }, diff);\n      }\n    } else {\n      execute();\n    }\n  };\n};\n\nvar getScrollTop = function (element) {\n  if (element === window) {\n    return Math.max(window.pageYOffset || 0, document.documentElement.scrollTop);\n  }\n\n  return element.scrollTop;\n};\n\nvar getComputedStyle = document.defaultView.getComputedStyle;\n\nvar getScrollEventTarget = function (element) {\n  var currentNode = element;\n  // bugfix, see http://w3help.org/zh-cn/causes/SD9013 and http://stackoverflow.com/questions/17016740/onscroll-function-is-not-working-for-chrome\n  while (currentNode && currentNode.tagName !== 'HTML' && currentNode.tagName !== 'BODY' && currentNode.nodeType === 1) {\n    var overflowY = getComputedStyle(currentNode).overflowY;\n    if (overflowY === 'scroll' || overflowY === 'auto') {\n      return currentNode;\n    }\n    currentNode = currentNode.parentNode;\n  }\n  return window;\n};\n\nvar getVisibleHeight = function (element) {\n  if (element === window) {\n    return document.documentElement.clientHeight;\n  }\n\n  return element.clientHeight;\n};\n\nvar getElementTop = function (element) {\n  if (element === window) {\n    return getScrollTop(window);\n  }\n  return element.getBoundingClientRect().top + getScrollTop(window);\n};\n\nvar isAttached = function (element) {\n  var currentNode = element.parentNode;\n  while (currentNode) {\n    if (currentNode.tagName === 'HTML') {\n      return true;\n    }\n    if (currentNode.nodeType === 11) {\n      return false;\n    }\n    currentNode = currentNode.parentNode;\n  }\n  return false;\n};\n\nvar doBind = function () {\n  if (this.binded) return; // eslint-disable-line\n  this.binded = true;\n\n  var directive = this;\n  var element = directive.el;\n\n  var throttleDelayExpr = element.getAttribute('infinite-scroll-throttle-delay');\n  var throttleDelay = 200;\n  if (throttleDelayExpr) {\n    throttleDelay = Number(directive.vm[throttleDelayExpr] || throttleDelayExpr);\n    if (isNaN(throttleDelay) || throttleDelay < 0) {\n      throttleDelay = 200;\n    }\n  }\n  directive.throttleDelay = throttleDelay;\n\n  directive.scrollEventTarget = getScrollEventTarget(element);\n  directive.scrollListener = throttle(doCheck.bind(directive), directive.throttleDelay);\n  directive.scrollEventTarget.addEventListener('scroll', directive.scrollListener);\n\n  this.vm.$on('hook:beforeDestroy', function () {\n    directive.scrollEventTarget.removeEventListener('scroll', directive.scrollListener);\n  });\n\n  var disabledExpr = element.getAttribute('infinite-scroll-disabled');\n  var disabled = false;\n\n  if (disabledExpr) {\n    this.vm.$watch(disabledExpr, function(value) {\n      directive.disabled = value;\n      if (!value && directive.immediateCheck) {\n        doCheck.call(directive);\n      }\n    });\n    disabled = Boolean(directive.vm[disabledExpr]);\n  }\n  directive.disabled = disabled;\n\n  var distanceExpr = element.getAttribute('infinite-scroll-distance');\n  var distance = 0;\n  if (distanceExpr) {\n    distance = Number(directive.vm[distanceExpr] || distanceExpr);\n    if (isNaN(distance)) {\n      distance = 0;\n    }\n  }\n  directive.distance = distance;\n\n  var immediateCheckExpr = element.getAttribute('infinite-scroll-immediate-check');\n  var immediateCheck = true;\n  if (immediateCheckExpr) {\n    immediateCheck = Boolean(directive.vm[immediateCheckExpr]);\n  }\n  directive.immediateCheck = immediateCheck;\n\n  if (immediateCheck) {\n    doCheck.call(directive);\n  }\n\n  var eventName = element.getAttribute('infinite-scroll-listen-for-event');\n  if (eventName) {\n    directive.vm.$on(eventName, function() {\n      doCheck.call(directive);\n    });\n  }\n};\n\nvar doCheck = function (force) {\n  var scrollEventTarget = this.scrollEventTarget;\n  var element = this.el;\n  var distance = this.distance;\n\n  if (force !== true && this.disabled) return; //eslint-disable-line\n  var viewportScrollTop = getScrollTop(scrollEventTarget);\n  var viewportBottom = viewportScrollTop + getVisibleHeight(scrollEventTarget);\n\n  var shouldTrigger = false;\n\n  if (scrollEventTarget === element) {\n    shouldTrigger = scrollEventTarget.scrollHeight - viewportBottom <= distance;\n  } else {\n    var elementBottom = getElementTop(element) - getElementTop(scrollEventTarget) + element.offsetHeight + viewportScrollTop;\n\n    shouldTrigger = viewportBottom + distance >= elementBottom;\n  }\n\n  if (shouldTrigger && this.expression) {\n    this.expression();\n  }\n};\n\nexport default {\n  bind(el, binding, vnode) {\n    el[ctx] = {\n      el,\n      vm: vnode.context,\n      expression: binding.value\n    };\n    const args = arguments;\n    console.info('binding', el, binding, vnode)\n    el[ctx].vm.$nextTick(function () {\n      if (isAttached(el)) {\n        doBind.call(el[ctx], args);\n      }\n\n      el[ctx].bindTryCount = 0;\n\n      var tryBind = function () {\n        if (el[ctx].bindTryCount > 10) return; //eslint-disable-line\n        el[ctx].bindTryCount++;\n        if (isAttached(el)) {\n          doBind.call(el[ctx], args);\n        } else {\n          setTimeout(tryBind, 50);\n        }\n      };\n\n      tryBind();\n    });\n  },\n\n  unbind(el) {\n    if (el && el[ctx] && el[ctx].scrollEventTarget)\n      el[ctx].scrollEventTarget.removeEventListener('scroll', el[ctx].scrollListener);\n  }\n};\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmptyMailbox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmptyMailbox.vue?vue&type=script&lang=js&\"","<template>\n\t<div id=\"emptycontent\">\n\t\t<div class=\"icon-mail\" />\n\t\t<h2>{{ t('mail', 'No messages in this mailbox') }}</h2>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: 'EmptyMailbox',\n}\n</script>\n","import { render, staticRenderFns } from \"./EmptyMailbox.vue?vue&type=template&id=c9ba26fa&\"\nimport script from \"./EmptyMailbox.vue?vue&type=script&lang=js&\"\nexport * from \"./EmptyMailbox.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"emptycontent\"}},[_c('div',{staticClass:\"icon-mail\"}),_vm._v(\" \"),_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'No messages in this mailbox')))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import dragEventBus from '../util/dragEventBus'\nimport defer from 'lodash/defer'\n\nexport class DraggableEnvelope {\n\n\tconstructor(el, componentInstance, options) {\n\t\tthis.el = el\n\t\tthis.options = options\n\t\tthis.registerListeners.bind(this)(el)\n\t\tthis.setInitialAttributes()\n\t}\n\n\tsetInitialAttributes() {\n\t\tthis.el.setAttribute('draggable', 'true')\n\t\tthis.el.classList.add('draggable-envelope')\n\t}\n\n\tupdate(el, instance) {\n\t\tthis.options = instance.options\n\t}\n\n\tregisterListeners(el) {\n\t\tel.addEventListener('dragstart', this.onDragStart.bind(this))\n\t\tel.addEventListener('dragend', this.onDragEnd.bind(this))\n\t}\n\n\tremoveListeners(el) {\n\t\tel.removeEventListener('dragstart', this.onDragStart)\n\t\tel.removeEventListener('dragend', this.onDragEnd)\n\t}\n\n\tonDragStart(event) {\n\t\tconst { accountId, mailboxId, selectedEnvelopes } = this.options\n\n\t\tevent.dataTransfer.clearData()\n\t\tevent.dataTransfer.effectAllowed = 'move'\n\n\t\tconst envelopes = []\n\t\tif (selectedEnvelopes.length) {\n\t\t\t// handle dragged selection mode items\n\t\t\tselectedEnvelopes.forEach((envelope, index) => {\n\t\t\t\tenvelopes.push({\n\t\t\t\t\taccountId,\n\t\t\t\t\tmailboxId,\n\t\t\t\t\tenvelopeId: envelope.databaseId,\n\t\t\t\t\tdraggableLabel: `${envelope.subject} (${envelope.from[0].label})`,\n\t\t\t\t})\n\t\t\t})\n\t\t} else {\n\t\t\t// handle single dragged item\n\t\t\tconst { envelopeId, draggableLabel } = this.options\n\t\t\tenvelopes.push({ accountId, mailboxId, envelopeId, draggableLabel })\n\t\t}\n\n\t\tevent.dataTransfer.setData('text/plain', JSON.stringify(envelopes))\n\t\tthis.attachGhost({ event, envelopes })\n\n\t\tdragEventBus.$emit('dragStart', {\n\t\t\taccountId,\n\t\t\tmailboxId,\n\t\t\titemCount: envelopes.length,\n\t\t})\n\t}\n\n\tonDragEnd(event) {\n\t\tdragEventBus.$emit('dragEnd', { accountId: this.options.accountId })\n\t}\n\n\tattachGhost({ event, envelopes }) {\n\t\tconst baseClass = 'draggable-envelope-ghost'\n\t\tconst dragNode = document.createElement('div')\n\t\tdragNode.classList.add(baseClass)\n\n\t\tconst counterNode = document.createElement('span')\n\t\tcounterNode.classList.add(`${baseClass}--counter`)\n\t\tconst textCountNode = document.createTextNode(envelopes.length)\n\t\tcounterNode.appendChild(textCountNode)\n\t\tdragNode.appendChild(counterNode)\n\n\t\tconst labelWrapperNode = document.createElement('div')\n\t\tlabelWrapperNode.classList.add(`${baseClass}--label-wrapper`)\n\n\t\tenvelopes.forEach(envelope => {\n\t\t\tconst labelNode = document.createElement('div')\n\t\t\tlabelNode.classList.add(`${baseClass}--label-wrapper--label`)\n\t\t\tconst textLabelNode = document.createTextNode(envelope.draggableLabel)\n\t\t\tlabelNode.appendChild(textLabelNode)\n\t\t\tlabelWrapperNode.appendChild(labelNode)\n\t\t})\n\n\t\tdragNode.appendChild(labelWrapperNode)\n\t\tdocument.body.appendChild(dragNode)\n\n\t\tevent.dataTransfer.setDragImage(dragNode, 0, 15)\n\n\t\t// the item can be removed immediately, because the\n\t\t// browser will take a \"screenshot\" of the dragImage\n\t\t// upon initialization to be used while dragging\n\t\tdefer(() => {\n\t\t\tdocument.body.removeChild(dragNode)\n\t\t})\n\t}\n\n}\n","import { DraggableEnvelope } from './draggable-envelope'\n\nlet instances = []\n\nexport const DraggableEnvelopeDirective = {\n\tbind(el, binding, vnode) {\n\t\tconst instance = new DraggableEnvelope(el, vnode.context, binding.value)\n\t\tinstances.push(instance)\n\t},\n\tcomponentUpdated(el, binding) {\n\t\tconst options = binding.value\n\t\tsetTimeout(() => {\n\t\t\tinstances.forEach(instance => {\n\t\t\t\tinstance.options.selectedEnvelopes = options.selectedEnvelopes\n\t\t\t\tinstance.update(el, instance)\n\t\t\t})\n\t\t})\n\t},\n\tunbind(el) {\n\t\tinstances = instances.filter((instance) => instance.el !== el)\n\t},\n}\n\nexport default DraggableEnvelope\n","/**\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport moment from '@nextcloud/moment'\nimport negate from 'lodash/fp/negate'\n\nimport { html } from './util/text'\n\n/**\n * @param {Text} original original\n * @param {object} from from\n * @param {Number} date date\n * @param {boolean} replyOnTop put reply on top?\n * @returns {Text}\n */\nexport const buildReplyBody = (original, from, date, replyOnTop = true) => {\n\tconst startEnd = '<p></p><p></p>'\n\tconst plainBody = '<br>&gt; ' + original.value.replace(/\\n/g, '<br>&gt; ')\n\tconst htmlBody = `<blockquote>${original.value}</blockquote>`\n\tconst quoteStart = '<div class=\"quote\">'\n\tconst quoteEnd = '</div>'\n\n\tswitch (original.format) {\n\tcase 'plain':\n\t\tif (from) {\n\t\t\tconst dateString = moment.unix(date).format('LLL')\n\t\t\treturn replyOnTop\n\t\t\t\t? html(`${startEnd}${quoteStart}\"${from.label}\" ${from.email} – ${dateString}` + plainBody + quoteEnd)\n\t\t\t\t: html(`${quoteStart}\"${from.label}\" ${from.email} – ${dateString}` + plainBody + quoteEnd + startEnd)\n\t\t} else {\n\t\t\treturn replyOnTop\n\t\t\t\t? html(`${startEnd}${quoteStart}${plainBody}${quoteEnd}`)\n\t\t\t\t: html(`${quoteStart}${plainBody}${quoteEnd}${startEnd}`)\n\t\t}\n\tcase 'html':\n\t\tif (from) {\n\t\t\tconst dateString = moment.unix(date).format('LLL')\n\t\t\treturn replyOnTop\n\t\t\t\t? html(`${startEnd}${quoteStart}\"${from.label}\" ${from.email} – ${dateString}<br>${htmlBody}${quoteEnd}`)\n\t\t\t\t: html(`${quoteStart}\"${from.label}\" ${from.email} – ${dateString}<br>${htmlBody}${quoteEnd}${startEnd}`)\n\t\t} else {\n\t\t\treturn replyOnTop\n\t\t\t\t? html(`${startEnd}${quoteStart}${htmlBody}${quoteEnd}`)\n\t\t\t\t: html(`${quoteStart}${htmlBody}${quoteEnd}${startEnd}`)\n\t\t}\n\t}\n\n\tthrow new Error(`can't build a reply for the format ${original.format}`)\n}\n\nconst RecipientType = Object.seal({\n\tNone: 0,\n\tTo: 1,\n\tCc: 2,\n})\n\nexport const buildRecipients = (envelope, ownAddress) => {\n\tlet recipientType = RecipientType.None\n\tconst isOwnAddress = (a) => a.email === ownAddress.email\n\tconst isNotOwnAddress = negate(isOwnAddress)\n\n\t// Locate why we received this envelope\n\t// Can be in 'to', 'cc' or unknown\n\tlet replyingAddress = envelope.to.find(isOwnAddress)\n\tif (replyingAddress !== undefined) {\n\t\trecipientType = RecipientType.To\n\t} else {\n\t\treplyingAddress = envelope.cc.find(isOwnAddress)\n\t\tif (replyingAddress !== undefined) {\n\t\t\trecipientType = RecipientType.Cc\n\t\t} else {\n\t\t\treplyingAddress = ownAddress\n\t\t}\n\t}\n\n\tlet to = []\n\tlet cc = []\n\tif (recipientType === RecipientType.To) {\n\t\t// Send to everyone except yourself, plus the original sender if not ourself\n\t\tto = envelope.to.filter(isNotOwnAddress)\n\t\tto = to.concat(envelope.from.filter(isNotOwnAddress))\n\n\t\t// CC remains the same\n\t\tcc = envelope.cc\n\t} else if (recipientType === RecipientType.Cc) {\n\t\t// Send to the same people, plus the sender if not ourself\n\t\tto = envelope.to.concat(envelope.from.filter(isNotOwnAddress))\n\n\t\t// All CC values are being kept except the replying address\n\t\tcc = envelope.cc.filter(isNotOwnAddress)\n\t} else {\n\t\t// Send to the same recipient and the sender (if not ourself) -> answer all\n\t\tto = envelope.to\n\t\tto = to.concat(envelope.from.filter(isNotOwnAddress))\n\n\t\t// Keep CC values\n\t\tcc = envelope.cc\n\t}\n\n\t// edge case: pure self-sent email\n\tif (to.length === 0) {\n\t\tto = envelope.from\n\t}\n\n\treturn {\n\t\tto,\n\t\tfrom: replyingAddress ? [replyingAddress] : [],\n\t\tcc,\n\t}\n}\n\nconst replyPrepends = [\n\t'antw',\n\t'atb',\n\t'aw',\n\t'bls',\n\t'odp',\n\t'r',\n\t're',\n\t'ref',\n\t'res',\n\t'rif',\n\t'sv',\n\t'vá',\n\t'vs',\n\t'ynt',\n\t'απ',\n\t'σχετ',\n\t'השב',\n\t'回复',\n\t'回覆',\n]\n\n/*\n * Ref https://tools.ietf.org/html/rfc5322#section-3.6.5\n */\nexport const buildReplySubject = (original) => {\n\tif (replyPrepends.some((prepend) => original.toLowerCase().startsWith(`${prepend}:`))) {\n\t\treturn original\n\t}\n\n\treturn `Re: ${original}`\n}\n\n// TODO: https://en.wikipedia.org/wiki/List_of_email_subject_abbreviations#Abbreviations_in_other_languages\nconst forwardPrepends = [\n\t'doorst',\n\t'enc',\n\t'fs',\n\t'fw',\n\t'fwd',\n\t'i',\n\t'i̇lt',\n\t'pd',\n\t'rv',\n\t'továbbítás',\n\t'tr',\n\t'trs',\n\t'vb',\n\t'vl',\n\t'vs',\n\t'wg',\n\t'yml',\n\t'ΠΡΘ',\n\t'הועבר',\n\t'إعادة توجيه',\n\t'رد',\n\t'轉寄',\n\t'转发',\n]\n\nexport const buildForwardSubject = (original) => {\n\tif (forwardPrepends.some((prepend) => original.toLowerCase().startsWith(`${prepend}:`))) {\n\t\treturn original\n\t}\n\n\treturn `Fwd: ${original}`\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MoveModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MoveModal.vue?vue&type=script&lang=js&\"","<template>\n\t<MailboxPicker :account=\"account\"\n\t\t:selected.sync=\"destMailboxId\"\n\t\t:loading=\"moving\"\n\t\t:label-select=\"moveThread ? t('mail', 'Move thread') : t('mail', 'Move message')\"\n\t\t:label-select-loading=\"moveThread ? t('mail', 'Moving thread') : t('mail', 'Moving message')\"\n\t\t@select=\"onMove\"\n\t\t@close=\"onClose\" />\n</template>\n\n<script>\nimport logger from '../logger'\nimport MailboxPicker from './MailboxPicker'\n\nexport default {\n\tname: 'MoveModal',\n\tcomponents: {\n\t\tMailboxPicker,\n\t},\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tenvelopes: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmoveThread: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tmoving: false,\n\t\t\tdestMailboxId: undefined,\n\t\t}\n\t},\n\tmethods: {\n\t\tonClose() {\n\t\t\tthis.$emit('close')\n\t\t},\n\t\tasync onMove() {\n\t\t\tthis.moving = true\n\n\t\t\ttry {\n\t\t\t\tconst envelopes = this.envelopes\n\t\t\t\t\t.filter(envelope => envelope.mailboxId !== this.destMailboxId)\n\n\t\t\t\tif (envelopes.length === 0) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tfor (const envelope of envelopes) {\n\t\t\t\t\tif (this.moveThread) {\n\t\t\t\t\t\tawait this.$store.dispatch('moveThread', { envelope, destMailboxId: this.destMailboxId })\n\t\t\t\t\t} else {\n\t\t\t\t\t\tawait this.$store.dispatch('moveMessage', { id: envelope.databaseId, destMailboxId: this.destMailboxId })\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tawait this.$store.dispatch('syncEnvelopes', { mailboxId: this.destMailboxId })\n\t\t\t\tthis.$emit('move')\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not move messages', {\n\t\t\t\t\terror,\n\t\t\t\t})\n\t\t\t} finally {\n\t\t\t\tthis.moving = false\n\t\t\t\tthis.$emit('close')\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./MoveModal.vue?vue&type=template&id=de89f7bc&\"\nimport script from \"./MoveModal.vue?vue&type=script&lang=js&\"\nexport * from \"./MoveModal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('MailboxPicker',{attrs:{\"account\":_vm.account,\"selected\":_vm.destMailboxId,\"loading\":_vm.moving,\"label-select\":_vm.moveThread ? _vm.t('mail', 'Move thread') : _vm.t('mail', 'Move message'),\"label-select-loading\":_vm.moveThread ? _vm.t('mail', 'Moving thread') : _vm.t('mail', 'Moving message')},on:{\"update:selected\":function($event){_vm.destMailboxId=$event},\"select\":_vm.onMove,\"close\":_vm.onClose}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - @copyright 2021 Greta Doci <gretadoci@gmail.com>\n  -\n  - @author 2021 Greta Doci <gretadoci@gmail.com>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<Modal size=\"large\" @close=\"onClose\">\n\t\t<div class=\"modal-content\">\n\t\t\t<h2 class=\"tag-title\">\n\t\t\t\t{{ t('mail', 'Edit tags') }}\n\t\t\t</h2>\n\t\t\t<div v-for=\"tag in tags\" :key=\"tag.id\" class=\"tag-group\">\n\t\t\t\t<button class=\"tag-group__label\"\n\t\t\t\t\t:style=\"{\n\t\t\t\t\t\tcolor: convertHex(tag.color, 1),\n\t\t\t\t\t\t'background-color': convertHex(tag.color, 0.15)\n\t\t\t\t\t}\">\n\t\t\t\t\t{{ tag.displayName }}\n\t\t\t\t</button>\n\t\t\t\t<button v-if=\"!isSet(tag.imapLabel)\"\n\t\t\t\t\tclass=\"tag-actions\"\n\t\t\t\t\t@click=\"addTag(tag.imapLabel)\">\n\t\t\t\t\t{{ t('mail','Add') }}\n\t\t\t\t</button>\n\t\t\t\t<button v-else\n\t\t\t\t\tclass=\"tag-actions\"\n\t\t\t\t\t@click=\"removeTag(tag.imapLabel)\">\n\t\t\t\t\t{{ t('mail','Remove') }}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<h2 class=\"tag-title\">\n\t\t\t\t{{ t('mail', 'Add tag') }}\n\t\t\t</h2>\n\t\t\t<div class=\"create-tag\">\n\t\t\t\t<button v-if=\"!editing\"\n\t\t\t\t\tclass=\"tagButton\"\n\t\t\t\t\t@click=\"addTagInput\">\n\t\t\t\t\t{{ t('mail', 'Add tag') }}\n\t\t\t\t</button>\n\t\t\t\t<ActionInput v-if=\"editing\" icon=\"icon-tag\" @submit=\"createTag\" />\n\t\t\t\t<ActionText\n\t\t\t\t\tv-if=\"showSaving\"\n\t\t\t\t\ticon=\"icon-loading-small\">\n\t\t\t\t\t{{ t('mail', 'Saving tag …') }}\n\t\t\t\t</ActionText>\n\t\t\t</div>\n\t\t</div>\n\t</Modal>\n</template>\n\n<script>\nimport Modal from '@nextcloud/vue/dist/Components/Modal'\nimport ActionText from '@nextcloud/vue/dist/Components/ActionText'\nimport ActionInput from '@nextcloud/vue/dist/Components/ActionInput'\nimport { showError } from '@nextcloud/dialogs'\n\nfunction randomColor() {\n\tlet randomHexColor = ((1 << 24) * Math.random() | 0).toString(16)\n\twhile (randomHexColor.length < 6) {\n\t\trandomHexColor = '0' + randomHexColor\n\t}\n\treturn '#' + randomHexColor\n}\nexport default {\n\tname: 'TagModal',\n\tcomponents: {\n\t\tModal,\n\t\tActionText,\n\t\tActionInput,\n\t},\n\tprops: {\n\t\tenvelope: {\n\t\t\t// The envelope on which this menu will act\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tisAdded: false,\n\t\t\tediting: false,\n\t\t\ttagLabel: true,\n\t\t\ttagInput: false,\n\t\t\tshowSaving: false,\n\t\t\tcolor: randomColor(),\n\t\t}\n\t},\n\tcomputed: {\n\t\ttags() {\n\t\t\treturn this.$store.getters.getTags.filter((tag) => tag.imapLabel !== '$label1')\n\t\t},\n\t},\n\tmethods: {\n\t\tonClose() {\n\t\t\tthis.$emit('close')\n\t\t},\n\t\tisSet(imapLabel) {\n\t\t\treturn this.$store.getters.getEnvelopeTags(this.envelope.databaseId).some(tag => tag.imapLabel === imapLabel)\n\t\t},\n\t\taddTag(imapLabel) {\n\t\t\tthis.isAdded = true\n\t\t\tthis.$store.dispatch('addEnvelopeTag', { envelope: this.envelope, imapLabel })\n\t\t},\n\t\tremoveTag(imapLabel) {\n\t\t\tthis.isAdded = false\n\t\t\tthis.$store.dispatch('removeEnvelopeTag', { envelope: this.envelope, imapLabel })\n\t\t},\n\t\taddTagInput() {\n\t\t\tthis.editing = true\n\t\t\tthis.showSaving = false\n\t\t},\n\t\tasync createTag(event) {\n\t\t\tthis.editing = true\n\t\t\tconst displayName = event.target.querySelector('input[type=text]').value\n\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('createTag', {\n\t\t\t\t\tdisplayName,\n\t\t\t\t\tcolor: randomColor(displayName),\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tconsole.debug(error)\n\t\t\t\tshowError(this.t('mail', 'An error occurred, unable to create the tag.'))\n\t\t\t} finally {\n\t\t\t\tthis.showSaving = false\n\t\t\t\tthis.tagLabel = true\n\t\t\t}\n\t\t},\n\t\tconvertHex(color, opacity) {\n\t\t\tif (color.length === 4) {\n\t\t\t\tconst r = parseInt(color.substring(1, 2), 16)\n\t\t\t\tconst g = parseInt(color.substring(2, 3), 16)\n\t\t\t\tconst b = parseInt(color.substring(3, 4), 16)\n\t\t\t\treturn `rgba(${r}, ${g}, ${b}, ${opacity})`\n\t\t\t} else {\n\t\t\t\tconst r = parseInt(color.substring(1, 3), 16)\n\t\t\t\tconst g = parseInt(color.substring(3, 5), 16)\n\t\t\t\tconst b = parseInt(color.substring(5, 7), 16)\n\t\t\t\treturn `rgba(${r}, ${g}, ${b}, ${opacity})`\n\t\t\t}\n\t\t},\n\n\t},\n}\n\n</script>\n\n<style lang=\"scss\" scoped>\n::v-deep .modal-content {\n\tpadding-left: 20px;\n\tpadding-right: 20px;\n\t// modal jumps on the right when text is changed to 'remove'\n\twidth: 250px;\n\tmax-height: calc(100vh - 210px);\n\toverflow-y: auto;\n}\n.tag-title {\n\tmargin-top: 20px;\n\tmargin-left: 10px;\n}\n.tag-group {\n\tdisplay: block;\n\tposition: relative;\n\tmargin: 0 1px;\n\toverflow: hidden;\n\tleft: 4px;\n}\n.tag-actions {\n\tbackground-color: transparent;\n\tborder: none;\n\tfloat: right;\n\t&:hover,\n\t&:focus {\n\t\topacity: .7;\n\t}\n}\n.tag-group__label {\n\tz-index: 2;\n\tfont-weight: bold;\n\tborder: none;\n\tbackground-color: transparent;\n\tpadding-left: 10px;\n\tpadding-right: 10px;\n}\n.app-navigation-entry-bullet-wrapper {\n\twidth: 44px;\n\theight: 44px;\n\tdisplay: inline-block;\n\tposition: absolute;\n\tlist-style: none;\n\n\t.color0 {\n\t\twidth: 30px !important;\n\t\theight: 30px;\n\t\tborder-radius: 50%;\n\t\tbackground-size: 14px;\n\t\tmargin-top: -65px;\n\t\tmargin-left: 180px;\n\t\tz-index: 2;\n\t\tdisplay: flex;\n\t\tposition: relative;\n\t}\n}\n.icon-colorpicker {\n\tbackground-image: var(--icon-add-fff);\n}\n.tagButton {\n\tdisplay: inline-block;\n\tmargin-left: 10px;\n}\n.action {\n\tlist-style: none;\n}\n::v-deep .action-input {\n\tmargin-left: -31px;\n}\n::v-deep .icon-tag {\n\tbackground-image: none;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TagModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TagModal.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TagModal.vue?vue&type=style&index=0&id=268a25d4&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./TagModal.vue?vue&type=template&id=268a25d4&scoped=true&\"\nimport script from \"./TagModal.vue?vue&type=script&lang=js&\"\nexport * from \"./TagModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TagModal.vue?vue&type=style&index=0&id=268a25d4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"268a25d4\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Modal',{attrs:{\"size\":\"large\"},on:{\"close\":_vm.onClose}},[_c('div',{staticClass:\"modal-content\"},[_c('h2',{staticClass:\"tag-title\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Edit tags'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_vm._l((_vm.tags),function(tag){return _c('div',{key:tag.id,staticClass:\"tag-group\"},[_c('button',{staticClass:\"tag-group__label\",style:({\n\t\t\t\t\tcolor: _vm.convertHex(tag.color, 1),\n\t\t\t\t\t'background-color': _vm.convertHex(tag.color, 0.15)\n\t\t\t\t})},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(tag.displayName)+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),(!_vm.isSet(tag.imapLabel))?_c('button',{staticClass:\"tag-actions\",on:{\"click\":function($event){return _vm.addTag(tag.imapLabel)}}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail','Add'))+\"\\n\\t\\t\\t\")]):_c('button',{staticClass:\"tag-actions\",on:{\"click\":function($event){return _vm.removeTag(tag.imapLabel)}}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail','Remove'))+\"\\n\\t\\t\\t\")])])}),_vm._v(\" \"),_c('h2',{staticClass:\"tag-title\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Add tag'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"create-tag\"},[(!_vm.editing)?_c('button',{staticClass:\"tagButton\",on:{\"click\":_vm.addTagInput}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Add tag'))+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.editing)?_c('ActionInput',{attrs:{\"icon\":\"icon-tag\"},on:{\"submit\":_vm.createTag}}):_vm._e(),_vm._v(\" \"),(_vm.showSaving)?_c('ActionText',{attrs:{\"icon\":\"icon-loading-small\"}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Saving tag …'))+\"\\n\\t\\t\\t\")]):_vm._e()],1)],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Envelope.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Envelope.vue?vue&type=script&lang=js&\"","<template>\n\t<ListItem\n\t\tv-draggable-envelope=\"{\n\t\t\taccountId: data.accountId ? data.accountId : mailbox.accountId,\n\t\t\tmailboxId: data.mailboxId,\n\t\t\tenvelopeId: data.databaseId,\n\t\t\tdraggableLabel: `${data.subject} (${data.from[0].label})`,\n\t\t\tselectedEnvelopes,\n\t\t}\"\n\t\tclass=\"list-item-style\"\n\t\t:class=\"{seen: data.flags.seen, draft, selected: selected}\"\n\t\t:to=\"link\"\n\t\t:data-envelope-id=\"data.databaseId\"\n\t\t:title=\"addresses\"\n\t\t:details=\"formatted()\">\n\t\t<template #icon>\n\t\t\t<div\n\t\t\t\tv-if=\"mailbox.isUnified\"\n\t\t\t\tclass=\"mail-message-account-color\"\n\t\t\t\t:style=\"{'background-color': accountColor}\" />\n\t\t\t<div\n\t\t\t\tv-if=\"data.flags.flagged\"\n\t\t\t\tclass=\"app-content-list-item-star icon-starred\"\n\t\t\t\t:data-starred=\"data.flags.flagged ? 'true' : 'false'\"\n\t\t\t\t@click.prevent=\"onToggleFlagged\" />\n\t\t\t<div\n\t\t\t\tv-if=\"isImportant\"\n\t\t\t\tclass=\"app-content-list-item-star svg icon-important\"\n\t\t\t\t:data-starred=\"isImportant ? 'true' : 'false'\"\n\t\t\t\t@click.prevent=\"onToggleImportant\"\n\t\t\t\tv-html=\"importantSvg\" />\n\t\t\t<div\n\t\t\t\tv-if=\"data.flags.junk\"\n\t\t\t\tclass=\"app-content-list-item-star icon-junk\"\n\t\t\t\t:data-starred=\"data.flags.junk ? 'true' : 'false'\"\n\t\t\t\t@click.prevent=\"onToggleJunk\" />\n\t\t\t<div class=\"app-content-list-item-icon\">\n\t\t\t\t<Avatar :display-name=\"addresses\" :email=\"avatarEmail\" />\n\t\t\t\t<p v-if=\"selectMode\" class=\"app-content-list-item-select-checkbox\">\n\t\t\t\t\t<input :id=\"`select-checkbox-${data.uid}`\"\n\t\t\t\t\t\tclass=\"checkbox\"\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t:checked=\"selected\">\n\t\t\t\t\t<label\n\t\t\t\t\t\t:for=\"`select-checkbox-${data.uid}`\"\n\t\t\t\t\t\t@click.exact.prevent=\"toggleSelected\"\n\t\t\t\t\t\t@click.shift.prevent=\"onSelectMultiple\" />\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</template>\n\t\t<template #subtitle>\n\t\t\t<span v-if=\"data.flags.answered\" class=\"icon-reply\" />\n\t\t\t<span v-if=\"data.flags.hasAttachments === true\" class=\"icon-public icon-attachment\" />\n\t\t\t<span v-if=\"draft\" class=\"draft\">\n\t\t\t\t<em>{{ t('mail', 'Draft: ') }}</em>\n\t\t\t</span>\n\t\t\t{{ data.subject }}\n\t\t</template>\n\t\t<template #actions>\n\t\t\t<ActionButton icon=\"icon-important\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click.prevent=\"onToggleImportant\">\n\t\t\t\t{{\n\t\t\t\t\tisImportant ? t('mail', 'Mark unimportant') : t('mail', 'Mark important')\n\t\t\t\t}}\n\t\t\t</ActionButton>\n\t\t\t<ActionButton icon=\"icon-starred\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click.prevent=\"onToggleFlagged\">\n\t\t\t\t{{\n\t\t\t\t\tdata.flags.flagged ? t('mail', 'Mark unfavorite') : t('mail', 'Mark favorite')\n\t\t\t\t}}\n\t\t\t</ActionButton>\n\t\t\t<ActionButton icon=\"icon-mail\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click.prevent=\"onToggleSeen\">\n\t\t\t\t{{\n\t\t\t\t\tdata.flags.seen ? t('mail', 'Mark unread') : t('mail', 'Mark read')\n\t\t\t\t}}\n\t\t\t</ActionButton>\n\t\t\t<ActionButton icon=\"icon-junk\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click.prevent=\"onToggleJunk\">\n\t\t\t\t{{\n\t\t\t\t\tdata.flags.junk ? t('mail', 'Mark not spam') : t('mail', 'Mark as spam')\n\t\t\t\t}}\n\t\t\t</ActionButton>\n\t\t\t<ActionButton icon=\"icon-checkmark\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click.prevent=\"toggleSelected\">\n\t\t\t\t{{\n\t\t\t\t\tselected ? t('mail', 'Unselect') : t('mail', 'Select')\n\t\t\t\t}}\n\t\t\t</ActionButton>\n\t\t\t<ActionButton\n\t\t\t\ticon=\"icon-tag\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click.prevent=\"onOpenTagModal\">\n\t\t\t\t{{ t('mail', 'Edit tags') }}\n\t\t\t</ActionButton>\n\t\t\t<ActionButton icon=\"icon-external\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click.prevent=\"onOpenMoveModal\">\n\t\t\t\t{{ t('mail', 'Move thread') }}\n\t\t\t</ActionButton>\n\t\t\t<ActionRouter icon=\"icon-add\"\n\t\t\t\t:to=\"{\n\t\t\t\t\tname: 'message',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tmailboxId: $route.params.mailboxId,\n\t\t\t\t\t\tthreadId: 'asNew',\n\t\t\t\t\t\tfilter: $route.params.filter,\n\t\t\t\t\t},\n\t\t\t\t\tquery: {\n\t\t\t\t\t\tmessageId: data.databaseId,\n\t\t\t\t\t},\n\t\t\t\t}\">\n\t\t\t\t{{ t('mail', 'Edit as new message') }}\n\t\t\t</ActionRouter>\n\t\t\t<ActionButton icon=\"icon-delete\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click.prevent=\"onDelete\">\n\t\t\t\t{{ t('mail', 'Delete thread') }}\n\t\t\t</ActionButton>\n\t\t</template>\n\t\t<template #extra>\n\t\t\t<div\n\t\t\t\tv-if=\"mailbox.isUnified\"\n\t\t\t\tclass=\"mail-message-account-color\"\n\t\t\t\t:style=\"{'background-color': accountColor}\" />\n\t\t\t<div v-for=\"tag in tags\"\n\t\t\t\t:key=\"tag.id\"\n\t\t\t\tclass=\"tag-group\">\n\t\t\t\t<div class=\"tag-group__bg\"\n\t\t\t\t\t:style=\"{'background-color': tag.color}\" />\n\t\t\t\t<span class=\"tag-group__label\"\n\t\t\t\t\t:style=\"{color: tag.color}\">{{ tag.displayName }} </span>\n\t\t\t</div>\n\t\t\t<MoveModal v-if=\"showMoveModal\"\n\t\t\t\t:account=\"account\"\n\t\t\t\t:envelopes=\"[data]\"\n\t\t\t\t:move-thread=\"true\"\n\t\t\t\t@move=\"onMove\"\n\t\t\t\t@close=\"onCloseMoveModal\" />\n\t\t\t<TagModal\n\t\t\t\tv-if=\"showTagModal\"\n\t\t\t\t:account=\"account\"\n\t\t\t\t:envelope=\"data\"\n\t\t\t\t@close=\"onCloseTagModal\" />\n\t\t</template>\n\t</ListItem>\n</template>\n<script>\nimport ListItem from '@nextcloud/vue/dist/Components/ListItem'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport ActionRouter from '@nextcloud/vue/dist/Components/ActionRouter'\nimport Avatar from './Avatar'\nimport { calculateAccountColor } from '../util/AccountColor'\nimport moment from '@nextcloud/moment'\nimport importantSvg from '../../img/important.svg'\nimport { DraggableEnvelopeDirective } from '../directives/drag-and-drop/draggable-envelope'\nimport { buildRecipients as buildReplyRecipients } from '../ReplyBuilder'\nimport { showError } from '@nextcloud/dialogs'\nimport NoTrashMailboxConfiguredError\n\tfrom '../errors/NoTrashMailboxConfiguredError'\nimport logger from '../logger'\nimport { matchError } from '../errors/match'\nimport MoveModal from './MoveModal'\nimport TagModal from './TagModal'\n\nexport default {\n\tname: 'Envelope',\n\tcomponents: {\n\t\tListItem,\n\t\tAvatar,\n\t\tActionButton,\n\t\tActionRouter,\n\t\tMoveModal,\n\t\tTagModal,\n\t},\n\tdirectives: {\n\t\tdraggableEnvelope: DraggableEnvelopeDirective,\n\t},\n\tprops: {\n\t\twithReply: {\n\t\t\t// \"Reply\" action should only appear in envelopes from the envelope list\n\t\t\t// (Because in thread envelopes, this action is already set as primary button of this menu)\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tmailbox: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tselectMode: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tselected: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tselectedEnvelopes: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t\tdefault: () => [],\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\timportantSvg,\n\t\t\tshowMoveModal: false,\n\t\t\tshowTagModal: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\thasMultipleRecipients() {\n\t\t\tif (!this.account) {\n\t\t\t\tconsole.error('account is undefined', {\n\t\t\t\t\taccountId: this.data.accountId,\n\t\t\t\t})\n\t\t\t}\n\t\t\tconst recipients = buildReplyRecipients(this.envelope, {\n\t\t\t\tlabel: this.account.name,\n\t\t\t\temail: this.account.emailAddress,\n\t\t\t})\n\t\t\treturn recipients.to.concat(recipients.cc).length > 1\n\t\t},\n\t\taccountColor() {\n\t\t\tconst account = this.$store.getters.getAccount(this.data.accountId)\n\t\t\treturn calculateAccountColor(account?.emailAddress ?? '')\n\t\t},\n\t\tdraft() {\n\t\t\treturn this.data.flags.draft\n\t\t},\n\t\taccount() {\n\t\t\tconst accountId = this.data.accountId ?? this.data.accountId\n\t\t\treturn this.$store.getters.getAccount(accountId)\n\t\t},\n\t\tlink() {\n\t\t\tif (this.draft) {\n\t\t\t// TODO: does not work with a unified drafts mailbox\n\t\t\t//       the query should also contain the account and mailbox\n\t\t\t//       id for that to work\n\t\t\t\treturn {\n\t\t\t\t\tname: 'message',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t\t\tthreadId: 'new',\n\t\t\t\t\t\tdraftId: this.data.databaseId,\n\t\t\t\t\t},\n\t\t\t\t\texact: true,\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tname: 'message',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t\t\tthreadId: this.data.databaseId,\n\t\t\t\t\t},\n\t\t\t\t\texact: true,\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\taddresses() {\n\t\t\t// Show recipients' label/address in a sent mailbox\n\t\t\tif (this.mailbox.specialRole === 'sent') {\n\t\t\t\tconst recipients = [this.data.to, this.data.cc].flat().map(function(recipient) {\n\t\t\t\t\treturn recipient.label ? recipient.label : recipient.email\n\t\t\t\t})\n\t\t\t\treturn recipients.length > 0 ? recipients.join(', ') : t('mail', 'Blind copy recipients only')\n\t\t\t}\n\t\t\t// Show sender label/address in other mailbox types\n\t\t\treturn this.data.from.length === 0 ? '?' : this.data.from[0].label || this.data.from[0].email\n\t\t},\n\t\tavatarEmail() {\n\t\t\t// Show first recipients' avatar in a sent mailbox (or undefined when sent to Bcc only)\n\t\t\tif (this.mailbox.specialRole === 'sent') {\n\t\t\t\tconst recipients = [this.data.to, this.data.cc].flat().map(function(recipient) {\n\t\t\t\t\treturn recipient.email\n\t\t\t\t})\n\t\t\t\treturn recipients.length > 0 ? recipients[0] : undefined\n\t\t\t}\n\n\t\t\t// Show sender avatar in other mailbox types\n\t\t\tif (this.data.from.length > 0) {\n\t\t\t\treturn this.data.from[0].email\n\t\t\t} else {\n\t\t\t\treturn undefined\n\t\t\t}\n\t\t},\n\t\tisImportant() {\n\t\t\treturn this.$store.getters\n\t\t\t\t.getEnvelopeTags(this.data.databaseId)\n\t\t\t\t.some((tag) => tag.imapLabel === '$label1')\n\t\t},\n\t\ttags() {\n\t\t\treturn this.$store.getters.getEnvelopeTags(this.data.databaseId).filter((tag) => tag.imapLabel !== '$label1')\n\t\t},\n\t},\n\tmethods: {\n\t\tsetSelected(value) {\n\t\t\tif (this.selected !== value) {\n\t\t\t\tthis.$emit('update:selected', value)\n\t\t\t}\n\t\t},\n\t\tformatted() {\n\t\t\treturn moment.unix(this.data.dateInt).fromNow()\n\t\t},\n\t\tunselect() {\n\t\t\tif (this.selected) {\n\t\t\t\tthis.$emit('updated:selected', false)\n\t\t\t}\n\t\t},\n\t\ttoggleSelected() {\n\t\t\tthis.$emit('update:selected', !this.selected)\n\t\t},\n\t\tonSelectMultiple() {\n\t\t\tthis.$emit('select-multiple')\n\t\t},\n\t\tonToggleImportant() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeImportant', this.data)\n\t\t},\n\t\tonToggleFlagged() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeFlagged', this.data)\n\t\t},\n\t\tonToggleSeen() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeSeen', { envelope: this.data })\n\t\t},\n\t\tonToggleJunk() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeJunk', this.data)\n\t\t},\n\t\tasync onDelete() {\n\t\t\t// Remove from selection first\n\t\t\tthis.setSelected(false)\n\t\t\t// Delete\n\t\t\tthis.$emit('delete', this.data.databaseId)\n\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('deleteThread', {\n\t\t\t\t\tenvelope: this.data,\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tshowError(await matchError(error, {\n\t\t\t\t\t[NoTrashMailboxConfiguredError.getName()]() {\n\t\t\t\t\t\treturn t('mail', 'No trash mailbox configured')\n\t\t\t\t\t},\n\t\t\t\t\tdefault(error) {\n\t\t\t\t\t\tlogger.error('could not delete message', error)\n\t\t\t\t\t\treturn t('mail', 'Could not delete message')\n\t\t\t\t\t},\n\t\t\t\t}))\n\t\t\t}\n\t\t},\n\t\tonOpenMoveModal() {\n\t\t\tthis.showMoveModal = true\n\t\t},\n\t\tonMove() {\n\t\t\tthis.$emit('move')\n\t\t},\n\t\tonCloseMoveModal() {\n\t\t\tthis.showMoveModal = false\n\t\t},\n\t\tonOpenTagModal() {\n\t\t\tthis.showTagModal = true\n\t\t},\n\t\tonCloseTagModal() {\n\t\t\tthis.showTagModal = false\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.mail-message-account-color {\n\tposition: absolute;\n\tleft: 0px;\n\twidth: 2px;\n\theight: 69px;\n\tz-index: 1;\n}\n\n.icon-important {\n\t::v-deep path {\n\tfill: #ffcc00;\n\tstroke: var(--color-main-background);\n\t}\n\t.list-item:hover &,\n\t.list-item:focus &,\n\t.list-item.active & {\n\t::v-deep path {\n\tstroke: var(--color-background-dark);\n\t}\n\t}\n\n\t// In message list, but not the one in the action menu\n\t&.app-content-list-item-star {\n\tbackground-image: none;\n\tleft: 7px;\n\ttop: 13px;\n\topacity: 1;\n\n\t&:hover,\n\t&:focus {\n\topacity: 0.5;\n\t}\n\t}\n}\n\n.app-content-list-item-select-checkbox {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tposition: absolute;\n\tleft: 33px;\n\ttop: 35px;\n\tz-index: 50; // same as icon-starred\n}\n\n.list-item-style:not(.seen) {\n\tfont-weight: bold;\n}\n.list-item-style.selected {\n\tbackground-color: var(--color-background-dark);\n\tfont-weight: bold;\n}\n.icon-junk {\n\topacity: .2;\n\tdisplay: flex;\n\ttop: 6px;\n\tleft: 34px;\n\tbackground-size: 16px;\n\theight: 20px;\n\twidth: 20px;\n\tmargin: 0;\n\tpadding: 0;\n\tposition: absolute;\n\tz-index: 2;\n}\nlist-item-style.draft .app-content-list-item-line-two {\n\tfont-style: italic;\n}\n.list-item-style.active {\n\tbackground-color: var(--color-primary-light);\n\tborder-radius: 16px;\n}\n\n.icon-reply,\n.icon-attachment {\n\tdisplay: inline-block;\n\tvertical-align: text-top;\n}\n\n.icon-reply {\n\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=25)';\n\topacity: 0.25;\n}\n\n.icon-attachment {\n\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=25)';\n\topacity: 0.25;\n}\n\n\t// Fix layout of messages in list until we move to component\n\n.app-content-list .list-item {\n\tpadding-right: 0;\n\n\t.app-content-list-item-line-two {\n\tpadding-right: 0;\n\tmargin-top: -8px;\n\t}\n\n\t.app-content-list-item-menu {\n\tmargin-right: -2px;\n\tmargin-top: -8px;\n\n\t::v-deep .action-item__menu {\n\tright: 7px !important;\n\n\t.action-item__menu_arrow {\n\tright: 6px !important;\n\t}\n\t}\n\t}\n\n\t.app-content-list-item-details {\n\t\tpadding-right: 7px;\n\t\t}\n}\n::v-deep .list-item__extra {\n\tmargin-left: 41px !important;\n}\n.tag-group__label {\n\tmargin: 0 7px;\n\tz-index: 2;\n\tfont-size: calc(var(--default-font-size) * 0.8);\n\tfont-weight: bold;\n\tpadding-left: 2px;\n\tpadding-right: 2px;\n}\n.tag-group__bg {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tleft: 0;\n\topacity: 15%;\n}\n.tag-group {\n\tdisplay: inline-block;\n\tborder: 1px solid transparent;\n\tborder-radius: var(--border-radius-pill);\n\tposition: relative;\n\tmargin: 0 1px;\n\toverflow: hidden;\n\tleft: 4px;\n}\n::v-deep.list-item__wrapper {\n\tlist-style: none;\n}\n.app-content-list-item-star.icon-starred {\n\tdisplay: block;\n}\n::v-deep.icon-important.app-content-list-item-star {\n\tposition: absolute;\n\ttop: 7px;\n\tz-index: 1;\n}\n.app-content-list-item-star.icon-starred {\n\tdisplay: inline-block;\n\tposition: absolute;\n\tmargin-bottom: 32px;\n\tmargin-left: 28px;\n\tcursor: pointer;\n\tz-index: 1;\n}\n::v-deep .svg svg{\n\theight: 16px;\n\twidth: 16px;\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Envelope.vue?vue&type=style&index=0&id=97196126&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./Envelope.vue?vue&type=template&id=97196126&scoped=true&\"\nimport script from \"./Envelope.vue?vue&type=script&lang=js&\"\nexport * from \"./Envelope.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Envelope.vue?vue&type=style&index=0&id=97196126&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"97196126\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ListItem',{directives:[{name:\"draggable-envelope\",rawName:\"v-draggable-envelope\",value:({\n\t\taccountId: _vm.data.accountId ? _vm.data.accountId : _vm.mailbox.accountId,\n\t\tmailboxId: _vm.data.mailboxId,\n\t\tenvelopeId: _vm.data.databaseId,\n\t\tdraggableLabel: ((_vm.data.subject) + \" (\" + (_vm.data.from[0].label) + \")\"),\n\t\tselectedEnvelopes: _vm.selectedEnvelopes,\n\t}),expression:\"{\\n\\t\\taccountId: data.accountId ? data.accountId : mailbox.accountId,\\n\\t\\tmailboxId: data.mailboxId,\\n\\t\\tenvelopeId: data.databaseId,\\n\\t\\tdraggableLabel: `${data.subject} (${data.from[0].label})`,\\n\\t\\tselectedEnvelopes,\\n\\t}\"}],staticClass:\"list-item-style\",class:{seen: _vm.data.flags.seen, draft: _vm.draft, selected: _vm.selected},attrs:{\"to\":_vm.link,\"data-envelope-id\":_vm.data.databaseId,\"title\":_vm.addresses,\"details\":_vm.formatted()},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(_vm.mailbox.isUnified)?_c('div',{staticClass:\"mail-message-account-color\",style:({'background-color': _vm.accountColor})}):_vm._e(),_vm._v(\" \"),(_vm.data.flags.flagged)?_c('div',{staticClass:\"app-content-list-item-star icon-starred\",attrs:{\"data-starred\":_vm.data.flags.flagged ? 'true' : 'false'},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleFlagged.apply(null, arguments)}}}):_vm._e(),_vm._v(\" \"),(_vm.isImportant)?_c('div',{staticClass:\"app-content-list-item-star svg icon-important\",attrs:{\"data-starred\":_vm.isImportant ? 'true' : 'false'},domProps:{\"innerHTML\":_vm._s(_vm.importantSvg)},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleImportant.apply(null, arguments)}}}):_vm._e(),_vm._v(\" \"),(_vm.data.flags.junk)?_c('div',{staticClass:\"app-content-list-item-star icon-junk\",attrs:{\"data-starred\":_vm.data.flags.junk ? 'true' : 'false'},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleJunk.apply(null, arguments)}}}):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"app-content-list-item-icon\"},[_c('Avatar',{attrs:{\"display-name\":_vm.addresses,\"email\":_vm.avatarEmail}}),_vm._v(\" \"),(_vm.selectMode)?_c('p',{staticClass:\"app-content-list-item-select-checkbox\"},[_c('input',{staticClass:\"checkbox\",attrs:{\"id\":(\"select-checkbox-\" + (_vm.data.uid)),\"type\":\"checkbox\"},domProps:{\"checked\":_vm.selected}}),_vm._v(\" \"),_c('label',{attrs:{\"for\":(\"select-checkbox-\" + (_vm.data.uid))},on:{\"click\":[function($event){if($event.ctrlKey||$event.shiftKey||$event.altKey||$event.metaKey){ return null; }$event.preventDefault();return _vm.toggleSelected.apply(null, arguments)},function($event){if(!$event.shiftKey){ return null; }$event.preventDefault();return _vm.onSelectMultiple.apply(null, arguments)}]}})]):_vm._e()],1)]},proxy:true},{key:\"subtitle\",fn:function(){return [(_vm.data.flags.answered)?_c('span',{staticClass:\"icon-reply\"}):_vm._e(),_vm._v(\" \"),(_vm.data.flags.hasAttachments === true)?_c('span',{staticClass:\"icon-public icon-attachment\"}):_vm._e(),_vm._v(\" \"),(_vm.draft)?_c('span',{staticClass:\"draft\"},[_c('em',[_vm._v(_vm._s(_vm.t('mail', 'Draft: ')))])]):_vm._e(),_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.data.subject)+\"\\n\\t\")]},proxy:true},{key:\"actions\",fn:function(){return [_c('ActionButton',{attrs:{\"icon\":\"icon-important\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleImportant.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.isImportant ? _vm.t('mail', 'Mark unimportant') : _vm.t('mail', 'Mark important'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-starred\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleFlagged.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.flags.flagged ? _vm.t('mail', 'Mark unfavorite') : _vm.t('mail', 'Mark favorite'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-mail\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleSeen.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.flags.seen ? _vm.t('mail', 'Mark unread') : _vm.t('mail', 'Mark read'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-junk\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleJunk.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.flags.junk ? _vm.t('mail', 'Mark not spam') : _vm.t('mail', 'Mark as spam'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-checkmark\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.toggleSelected.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.selected ? _vm.t('mail', 'Unselect') : _vm.t('mail', 'Select'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-tag\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onOpenTagModal.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Edit tags'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-external\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onOpenMoveModal.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Move thread'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('ActionRouter',{attrs:{\"icon\":\"icon-add\",\"to\":{\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: _vm.$route.params.mailboxId,\n\t\t\t\t\tthreadId: 'asNew',\n\t\t\t\t\tfilter: _vm.$route.params.filter,\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tmessageId: _vm.data.databaseId,\n\t\t\t\t},\n\t\t\t}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Edit as new message'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-delete\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onDelete.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Delete thread'))+\"\\n\\t\\t\")])]},proxy:true},{key:\"extra\",fn:function(){return [(_vm.mailbox.isUnified)?_c('div',{staticClass:\"mail-message-account-color\",style:({'background-color': _vm.accountColor})}):_vm._e(),_vm._v(\" \"),_vm._l((_vm.tags),function(tag){return _c('div',{key:tag.id,staticClass:\"tag-group\"},[_c('div',{staticClass:\"tag-group__bg\",style:({'background-color': tag.color})}),_vm._v(\" \"),_c('span',{staticClass:\"tag-group__label\",style:({color: tag.color})},[_vm._v(_vm._s(tag.displayName)+\" \")])])}),_vm._v(\" \"),(_vm.showMoveModal)?_c('MoveModal',{attrs:{\"account\":_vm.account,\"envelopes\":[_vm.data],\"move-thread\":true},on:{\"move\":_vm.onMove,\"close\":_vm.onCloseMoveModal}}):_vm._e(),_vm._v(\" \"),(_vm.showTagModal)?_c('TagModal',{attrs:{\"account\":_vm.account,\"envelope\":_vm.data},on:{\"close\":_vm.onCloseTagModal}}):_vm._e()]},proxy:true}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopeList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopeList.vue?vue&type=script&lang=js&\"","<template>\n\t<div>\n\t\t<transition name=\"multiselect-header\">\n\t\t\t<div v-if=\"selectMode\" key=\"multiselect-header\" class=\"multiselect-header\">\n\t\t\t\t<div class=\"button primary\" @click.prevent=\"markSelectedSeenOrUnseen\">\n\t\t\t\t\t<span id=\"action-label\">{{\n\t\t\t\t\t\tareAllSelectedRead\n\t\t\t\t\t\t\t? n(\n\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t'Mark {number} unread',\n\t\t\t\t\t\t\t\t'Mark {number} unread',\n\t\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: n(\n\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t'Mark {number} read',\n\t\t\t\t\t\t\t\t'Mark {number} read',\n\t\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t}}</span>\n\t\t\t\t</div>\n\t\t\t\t<Actions class=\"app-content-list-item-menu\" menu-align=\"right\">\n\t\t\t\t\t<ActionButton icon=\"icon-starred\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"favoriteOrUnfavoriteAll\">\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tareAllSelectedFavorite\n\t\t\t\t\t\t\t\t? n(\n\t\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t\t'Unfavorite {number}',\n\t\t\t\t\t\t\t\t\t'Unfavorite {number}',\n\t\t\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t: n(\n\t\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t\t'Favorite {number}',\n\t\t\t\t\t\t\t\t\t'Favorite {number}',\n\t\t\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton icon=\"icon-close\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"unselectAll\">\n\t\t\t\t\t\t{{ n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Unselect {number}',\n\t\t\t\t\t\t\t'Unselect {number}',\n\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton\n\t\t\t\t\t\tv-if=\"!account.isUnified\"\n\t\t\t\t\t\ticon=\"icon-external\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"onOpenMoveModal\">\n\t\t\t\t\t\t{{ n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Move {number} thread',\n\t\t\t\t\t\t\t'Move {number} threads',\n\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton\n\t\t\t\t\t\ticon=\"icon-forward\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"forwardSelectedAsAttachment\">\n\t\t\t\t\t\t{{ n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Forward {number} as attachment',\n\t\t\t\t\t\t\t'Forward {number} as attachment',\n\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton icon=\"icon-delete\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"deleteAllSelected\">\n\t\t\t\t\t\t{{ n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Delete {number} thread',\n\t\t\t\t\t\t\t'Delete {number} threads',\n\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t</Actions>\n\t\t\t\t<MoveModal\n\t\t\t\t\tv-if=\"showMoveModal\"\n\t\t\t\t\t:account=\"account\"\n\t\t\t\t\t:envelopes=\"selectedEnvelopes\"\n\t\t\t\t\t:move-thread=\"true\"\n\t\t\t\t\t@close=\"onCloseMoveModal\" />\n\t\t\t</div>\n\t\t</transition>\n\t\t<transition-group name=\"list\">\n\t\t\t<div id=\"list-refreshing\"\n\t\t\t\tkey=\"loading\"\n\t\t\t\tclass=\"icon-loading-small\"\n\t\t\t\t:class=\"{refreshing: refreshing}\" />\n\t\t\t<Envelope\n\t\t\t\tv-for=\"(env, index) in envelopes\"\n\t\t\t\t:key=\"env.databaseId\"\n\t\t\t\t:data=\"env\"\n\t\t\t\t:mailbox=\"mailbox\"\n\t\t\t\t:selected=\"selection.includes(env.databaseId)\"\n\t\t\t\t:select-mode=\"selectMode\"\n\t\t\t\t:selected-envelopes=\"selectedEnvelopes\"\n\t\t\t\t@delete=\"$emit('delete', env.databaseId)\"\n\t\t\t\t@update:selected=\"onEnvelopeSelectToggle(env, index, ...$event)\"\n\t\t\t\t@select-multiple=\"onEnvelopeSelectMultiple(env, index)\" />\n\t\t\t<div\n\t\t\t\tv-if=\"loadMoreButton && !loadingMore\"\n\t\t\t\t:key=\"'list-collapse-' + searchQuery\"\n\t\t\t\tclass=\"load-more\"\n\t\t\t\t@click=\"$emit('loadMore')\">\n\t\t\t\t{{ t('mail', 'Load more') }}\n\t\t\t</div>\n\t\t\t<div id=\"load-more-mail-messages\" key=\"loadingMore\" :class=\"{'icon-loading-small': loadingMore}\" />\n\t\t</transition-group>\n\t</div>\n</template>\n\n<script>\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport { showError } from '@nextcloud/dialogs'\n\nimport Envelope from './Envelope'\nimport logger from '../logger'\nimport MoveModal from './MoveModal'\nimport { matchError } from '../errors/match'\nimport NoTrashMailboxConfiguredError\n\tfrom '../errors/NoTrashMailboxConfiguredError'\nimport { differenceWith } from 'ramda'\nimport dragEventBus from '../directives/drag-and-drop/util/dragEventBus'\n\nexport default {\n\tname: 'EnvelopeList',\n\tcomponents: {\n\t\tActions,\n\t\tActionButton,\n\t\tEnvelope,\n\t\tMoveModal,\n\t},\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tmailbox: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tenvelopes: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tsearchQuery: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: undefined,\n\t\t},\n\t\trefreshing: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t\tdefault: true,\n\t\t},\n\t\tloadingMore: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tloadMoreButton: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tselection: [],\n\t\t\tshowMoveModal: false,\n\t\t\tlastToggledIndex: undefined,\n\t\t}\n\t},\n\tcomputed: {\n\t\tselectMode() {\n\t\t\t// returns true when in selection mode (where the user selects several emails at once)\n\t\t\treturn this.selection.length > 0\n\t\t},\n\t\tareAllSelectedRead() {\n\t\t\t// returns false if at least one selected message has not been read yet\n\t\t\treturn this.selectedEnvelopes.every((env) => env.flags.seen === true)\n\t\t},\n\t\tareAllSelectedFavorite() {\n\t\t\t// returns false if at least one selected message has not been favorited yet\n\t\t\treturn this.selectedEnvelopes.every((env) => env.flags.flagged === true)\n\t\t},\n\t\tselectedEnvelopes() {\n\t\t\treturn this.envelopes.filter((env) => this.selection.includes(env.databaseId))\n\t\t},\n\t},\n\twatch: {\n\t\tenvelopes(newVal, oldVal) {\n\t\t\t// Unselect vanished envelopes\n\t\t\tconst newIds = newVal.map((env) => env.databaseId)\n\t\t\tthis.selection = this.selection.filter((id) => newIds.includes(id))\n\t\t\tdifferenceWith((a, b) => a.databaseId === b.databaseId, oldVal, newVal)\n\t\t\t\t.forEach((env) => {\n\t\t\t\t\tenv.flags.selected = false\n\t\t\t\t})\n\t\t},\n\t},\n\tmounted() {\n\t\tdragEventBus.$on('envelopesDropped', this.unselectAll)\n\t},\n\tbeforeDestroy() {\n\t\tdragEventBus.$off('envelopesDropped', this.unselectAll)\n\t},\n\tmethods: {\n\t\tisEnvelopeSelected(idx) {\n\t\t\tif (this.selection.length === 0) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\treturn this.selection.includes(idx)\n\t\t},\n\t\tmarkSelectedSeenOrUnseen() {\n\t\t\tconst seen = !this.areAllSelectedRead\n\t\t\tthis.selectedEnvelopes.forEach((envelope) => {\n\t\t\t\tthis.$store.dispatch('toggleEnvelopeSeen', {\n\t\t\t\t\tenvelope,\n\t\t\t\t\tseen,\n\t\t\t\t})\n\t\t\t})\n\t\t\tthis.unselectAll()\n\t\t},\n\t\tfavoriteOrUnfavoriteAll() {\n\t\t\tconst favFlag = !this.areAllSelectedFavorite\n\t\t\tthis.selectedEnvelopes.forEach((envelope) => {\n\t\t\t\tthis.$store.dispatch('markEnvelopeFavoriteOrUnfavorite', {\n\t\t\t\t\tenvelope,\n\t\t\t\t\tfavFlag,\n\t\t\t\t})\n\t\t\t})\n\t\t\tthis.unselectAll()\n\t\t},\n\t\tasync deleteAllSelected() {\n\t\t\tfor (const envelope of this.selectedEnvelopes) {\n\t\t\t\t// Navigate if the message being deleted is the one currently viewed\n\t\t\t\t// Shouldn't we simply use $emit here?\n\t\t\t\t// Would be better to navigate after all messages have been deleted\n\t\t\t\tif (envelope.databaseId === this.$route.params.threadId) {\n\t\t\t\t\tconst index = this.envelopes.indexOf(envelope)\n\t\t\t\t\tlet next\n\t\t\t\t\tif (index === 0) {\n\t\t\t\t\t\tnext = this.envelopes[index + 1]\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnext = this.envelopes[index - 1]\n\t\t\t\t\t}\n\n\t\t\t\t\tif (next) {\n\t\t\t\t\t\tthis.$router.push({\n\t\t\t\t\t\t\tname: 'message',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\t\t\tthreadId: next.databaseId,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlogger.info(`deleting thread ${envelope.threadRootId}`)\n\t\t\t\ttry {\n\t\t\t\t\tawait this.$store.dispatch('deleteThread', {\n\t\t\t\t\t\tenvelope,\n\t\t\t\t\t})\n\t\t\t\t} catch (error) {\n\t\t\t\t\tshowError(await matchError(error, {\n\t\t\t\t\t\t[NoTrashMailboxConfiguredError.getName()]() {\n\t\t\t\t\t\t\treturn t('mail', 'No trash mailbox configured')\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault(error) {\n\t\t\t\t\t\t\tlogger.error('could not delete message', error)\n\t\t\t\t\t\t\treturn t('mail', 'Could not delete message')\n\t\t\t\t\t\t},\n\t\t\t\t\t}))\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Get new messages\n\t\t\tthis.$store.dispatch('fetchNextEnvelopes', {\n\t\t\t\tmailboxId: this.mailbox.databaseId,\n\t\t\t\tquery: this.searchQuery,\n\t\t\t\tquantity: this.selectedEnvelopes.length,\n\t\t\t})\n\n\t\t\tthis.unselectAll()\n\t\t},\n\t\tsetEnvelopeSelected(envelope, selected) {\n\t\t\tconst alreadySelected = this.selection.includes(envelope.databaseId)\n\t\t\tif (selected && !alreadySelected) {\n\t\t\t\tenvelope.flags.selected = true\n\t\t\t\tthis.selection.push(envelope.databaseId)\n\t\t\t} else if (!selected && alreadySelected) {\n\t\t\t\tenvelope.flags.selected = false\n\t\t\t\tthis.selection.splice(this.selection.indexOf(envelope.databaseId), 1)\n\t\t\t}\n\t\t},\n\t\tonEnvelopeSelectToggle(envelope, index, selected) {\n\t\t\tthis.lastToggledIndex = index\n\t\t\tthis.setEnvelopeSelected(envelope, selected)\n\t\t},\n\t\tonEnvelopeSelectMultiple(envelope, index) {\n\t\t\tif (this.lastToggledIndex === undefined) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst start = Math.min(this.lastToggledIndex, index)\n\t\t\tconst end = Math.max(this.lastToggledIndex, index)\n\t\t\tconst selected = this.selection.includes(envelope.databaseId)\n\t\t\tfor (let i = start; i <= end; i++) {\n\t\t\t\tthis.setEnvelopeSelected(this.envelopes[i], !selected)\n\t\t\t}\n\t\t\tthis.lastToggledIndex = index\n\t\t},\n\t\tunselectAll() {\n\t\t\tthis.envelopes.forEach((env) => {\n\t\t\t\tenv.flags.selected = false\n\t\t\t})\n\t\t\tthis.selection = []\n\t\t},\n\t\tonOpenMoveModal() {\n\t\t\tthis.showMoveModal = true\n\t\t},\n\t\tasync forwardSelectedAsAttachment() {\n\t\t\tconst selected = this.selection\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\tthreadId: 'new',\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tforwardedMessages: selected,\n\t\t\t\t},\n\t\t\t})\n\t\t\tthis.unselectAll()\n\t\t},\n\t\tonCloseMoveModal() {\n\t\t\tthis.showMoveModal = false\n\t\t\tthis.unselectAll()\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\ndiv {\n\t// So we can align the loading spinner in the Priority inbox\n\tposition: relative;\n}\n\n.load-more {\n\ttext-align: center;\n\tmargin-top: 10px;\n\tcursor: pointer;\n\tcolor: var(--color-text-maxcontrast);\n}\n\n.multiselect-header {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tjustify-content: center;\n\tbackground-color: var(--color-main-background-translucent);\n\tposition: sticky;\n\ttop: 0px;\n\theight: 48px;\n\tz-index: 100;\n}\n\n#load-more-mail-messages {\n\tmargin: 10px auto;\n\tpadding: 10px;\n\tmargin-top: 50px;\n\tmargin-bottom: 50px;\n}\n\n/* TODO: put this in core icons.css as general rule for buttons with icons */\n#load-more-mail-messages.icon-loading-small {\n\tpadding-left: 32px;\n\tbackground-position: 9px center;\n}\n\n#list-refreshing {\n\tposition: absolute;\n\tleft: calc(50% - 8px);\n\toverflow: hidden;\n\tpadding: 12px;\n\tbackground-color: var(--color-main-background);\n\tz-index: 1;\n\tborder-radius: var(--border-radius-pill);\n\tborder: 1px solid var(--color-border);\n\ttop: -24px;\n\topacity: 0;\n\ttransition-property: top, opacity;\n\ttransition-duration: 0.5s;\n\ttransition-timing-function: ease-in-out;\n\n\t&.refreshing {\n\t\ttop: 4px;\n\t\topacity: 1;\n\t}\n}\n\n.multiselect-header-enter-active,\n.multiselect-header-leave-active,\n.list-enter-active,\n.list-leave-active {\n\ttransition: all var(--animation-slow);\n}\n\n.multiselect-header-enter,\n.multiselect-header-leave-to,\n.list-enter,\n.list-leave-to {\n\topacity: 0;\n\theight: 0px;\n\ttransform: scaleY(0);\n}\n\n#action-label {\n\tvertical-align: middle;\n}\n@media only screen and (min-width: 600px) {\n\t#action-label {\n\t\tdisplay: block;\n\t}\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopeList.vue?vue&type=style&index=0&id=0c6cc3d8&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./EnvelopeList.vue?vue&type=template&id=0c6cc3d8&scoped=true&\"\nimport script from \"./EnvelopeList.vue?vue&type=script&lang=js&\"\nexport * from \"./EnvelopeList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EnvelopeList.vue?vue&type=style&index=0&id=0c6cc3d8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0c6cc3d8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('transition',{attrs:{\"name\":\"multiselect-header\"}},[(_vm.selectMode)?_c('div',{key:\"multiselect-header\",staticClass:\"multiselect-header\"},[_c('div',{staticClass:\"button primary\",on:{\"click\":function($event){$event.preventDefault();return _vm.markSelectedSeenOrUnseen.apply(null, arguments)}}},[_c('span',{attrs:{\"id\":\"action-label\"}},[_vm._v(_vm._s(_vm.areAllSelectedRead\n\t\t\t\t\t\t? _vm.n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Mark {number} unread',\n\t\t\t\t\t\t\t'Mark {number} unread',\n\t\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)\n\t\t\t\t\t\t: _vm.n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Mark {number} read',\n\t\t\t\t\t\t\t'Mark {number} read',\n\t\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)))])]),_vm._v(\" \"),_c('Actions',{staticClass:\"app-content-list-item-menu\",attrs:{\"menu-align\":\"right\"}},[_c('ActionButton',{attrs:{\"icon\":\"icon-starred\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.favoriteOrUnfavoriteAll.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.areAllSelectedFavorite\n\t\t\t\t\t\t\t? _vm.n(\n\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t'Unfavorite {number}',\n\t\t\t\t\t\t\t\t'Unfavorite {number}',\n\t\t\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: _vm.n(\n\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t'Favorite {number}',\n\t\t\t\t\t\t\t\t'Favorite {number}',\n\t\t\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-close\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.unselectAll.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.n(\n\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t'Unselect {number}',\n\t\t\t\t\t\t'Unselect {number}',\n\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t}\n\t\t\t\t\t))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),(!_vm.account.isUnified)?_c('ActionButton',{attrs:{\"icon\":\"icon-external\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onOpenMoveModal.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.n(\n\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t'Move {number} thread',\n\t\t\t\t\t\t'Move {number} threads',\n\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t}\n\t\t\t\t\t))+\"\\n\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-forward\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.forwardSelectedAsAttachment.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.n(\n\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t'Forward {number} as attachment',\n\t\t\t\t\t\t'Forward {number} as attachment',\n\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t}\n\t\t\t\t\t))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-delete\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.deleteAllSelected.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.n(\n\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t'Delete {number} thread',\n\t\t\t\t\t\t'Delete {number} threads',\n\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t}\n\t\t\t\t\t))+\"\\n\\t\\t\\t\\t\")])],1),_vm._v(\" \"),(_vm.showMoveModal)?_c('MoveModal',{attrs:{\"account\":_vm.account,\"envelopes\":_vm.selectedEnvelopes,\"move-thread\":true},on:{\"close\":_vm.onCloseMoveModal}}):_vm._e()],1):_vm._e()]),_vm._v(\" \"),_c('transition-group',{attrs:{\"name\":\"list\"}},[_c('div',{key:\"loading\",staticClass:\"icon-loading-small\",class:{refreshing: _vm.refreshing},attrs:{\"id\":\"list-refreshing\"}}),_vm._v(\" \"),_vm._l((_vm.envelopes),function(env,index){return _c('Envelope',{key:env.databaseId,attrs:{\"data\":env,\"mailbox\":_vm.mailbox,\"selected\":_vm.selection.includes(env.databaseId),\"select-mode\":_vm.selectMode,\"selected-envelopes\":_vm.selectedEnvelopes},on:{\"delete\":function($event){return _vm.$emit('delete', env.databaseId)},\"update:selected\":function($event){return _vm.onEnvelopeSelectToggle.apply(void 0, [ env, index ].concat( $event ))},\"select-multiple\":function($event){return _vm.onEnvelopeSelectMultiple(env, index)}}})}),_vm._v(\" \"),(_vm.loadMoreButton && !_vm.loadingMore)?_c('div',{key:'list-collapse-' + _vm.searchQuery,staticClass:\"load-more\",on:{\"click\":function($event){return _vm.$emit('loadMore')}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Load more'))+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('div',{key:\"loadingMore\",class:{'icon-loading-small': _vm.loadingMore},attrs:{\"id\":\"load-more-mail-messages\"}})],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport IssueTemplateBuilder from 'nextcloud_issuetemplate_builder'\n\nconst flattenError = (error) => {\n\tlet text = ''\n\tif (error.type) {\n\t\ttext += error.type + ': '\n\t}\n\ttext += error.message\n\ttext += '\\n'\n\tif (error.trace) {\n\t\ttext += flattenTrace(error.trace)\n\t}\n\tif (error.stack) {\n\t\ttext += error.stack\n\t}\n\treturn text\n}\n\nconst flattenTrace = (trace) => {\n\treturn trace.reduce(function(acc, entry) {\n\t\tlet text = ''\n\t\tif (entry.class) {\n\t\t\ttext += '  at ' + entry.class + '::' + entry.function\n\t\t} else {\n\t\t\ttext += '  at ' + entry.function\n\t\t}\n\t\tif (entry.file) {\n\t\t\ttext += '\\n     ' + entry.file + ', line ' + entry.line\n\t\t}\n\t\treturn acc + text + '\\n'\n\t}, '')\n}\n\nexport const getReportUrl = (error) => {\n\tconsole.error(error)\n\tlet message = error.message || 'An unkown error occurred.'\n\tif (!message.endsWith('.')) {\n\t\tmessage += '.'\n\t}\n\tconst builder = new IssueTemplateBuilder()\n\tconst template = builder\n\t\t.addEmptyStepsToReproduce()\n\t\t.addExpectedActualBehaviour()\n\t\t.addLogs('Error', flattenError(error))\n\t\t.render()\n\n\treturn (\n\t\t'https://github.com/nextcloud/mail/issues/new'\n\t\t+ '?title='\n\t\t+ encodeURIComponent(message)\n\t\t+ '&body='\n\t\t+ encodeURIComponent(template)\n\t)\n}\n","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"emptycontent\">\n\t\t<h2>{{ error }}</h2>\n\t\t<p>{{ message }}</p>\n\t\t<p v-if=\"data && data.debug\">\n\t\t\t<a class=\"button\"\n\t\t\t\t:href=\"reportUrl\"\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\trel=\"noopener\">{{ t('mail', 'Report this bug') }}</a>\n\t\t</p>\n\t</div>\n</template>\n\n<script>\nimport { getReportUrl } from '../util/CrashReport'\n\nexport default {\n\tname: 'Error',\n\tprops: {\n\t\terror: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t},\n\tcomputed: {\n\t\treportUrl() {\n\t\t\treturn getReportUrl(this.data)\n\t\t},\n\t},\n}\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Error.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Error.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Error.vue?vue&type=template&id=e2d62ba4&\"\nimport script from \"./Error.vue?vue&type=script&lang=js&\"\nexport * from \"./Error.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"emptycontent\"},[_c('h2',[_vm._v(_vm._s(_vm.error))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.message))]),_vm._v(\" \"),(_vm.data && _vm.data.debug)?_c('p',[_c('a',{staticClass:\"button\",attrs:{\"href\":_vm.reportUrl,\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(_vm._s(_vm.t('mail', 'Report this bug')))])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=script&lang=js&\"","<template>\n\t<div v-if=\"hint\" class=\"emptycontent\">\n\t\t<a class=\"icon-loading\" />\n\t\t<h2>{{ hint }}</h2>\n\t\t<transition name=\"fade\">\n\t\t\t<em v-if=\"slowHint && slow\">{{ slowHint }}</em>\n\t\t</transition>\n\t</div>\n\t<div v-else class=\"container icon-loading\" />\n</template>\n\n<script>\nexport default {\n\tname: 'Loading',\n\tprops: {\n\t\thint: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t\trequired: false,\n\t\t},\n\t\tslowHint: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t\trequired: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tslow: false,\n\t\t\tslowTimer: undefined,\n\t\t}\n\t},\n\tmounted() {\n\t\tclearTimeout(this.slowTimer)\n\n\t\tthis.slowTimer = setTimeout(() => {\n\t\t\tthis.slow = true\n\t\t}, 3500)\n\t},\n\tbeforeDestroy() {\n\t\tclearTimeout(this.slowTimer)\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.fade-enter-active,\n.fade-leave-active {\n\ttransition: opacity 0.5s;\n}\n.fade-enter,\n.fade-leave-to {\n\topacity: 0;\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=style&index=0&id=5dce5c60&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./Loading.vue?vue&type=template&id=5dce5c60&scoped=true&\"\nimport script from \"./Loading.vue?vue&type=script&lang=js&\"\nexport * from \"./Loading.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Loading.vue?vue&type=style&index=0&id=5dce5c60&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5dce5c60\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.hint)?_c('div',{staticClass:\"emptycontent\"},[_c('a',{staticClass:\"icon-loading\"}),_vm._v(\" \"),_c('h2',[_vm._v(_vm._s(_vm.hint))]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.slowHint && _vm.slow)?_c('em',[_vm._v(_vm._s(_vm.slowHint))]):_vm._e()])],1):_c('div',{staticClass:\"container icon-loading\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmptyMailboxSection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmptyMailboxSection.vue?vue&type=script&lang=js&\"","<template>\n\t<div id=\"emptycontent\">\n\t\t<slot> {{ t('mail', 'No messages') }}</slot>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: 'EmptyMailboxSection',\n}\n</script>\n<style scoped lang=\"scss\">\n#emptycontent {\n\tmargin-top: 10px;\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmptyMailboxSection.vue?vue&type=style&index=0&id=4512145e&scoped=true&lang=scss&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mailbox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mailbox.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<Error v-if=\"error\"\n\t\t:error=\"t('mail', 'Could not open mailbox')\"\n\t\tmessage=\"\"\n\t\trole=\"alert\" />\n\t<Loading v-else-if=\"loadingEnvelopes\" :hint=\"t('mail', 'Loading messages')\" role=\"alert\" />\n\t<Loading\n\t\tv-else-if=\"loadingCacheInitialization\"\n\t\t:hint=\"t('mail', 'Loading messages')\"\n\t\t:slow-hint=\"t('mail', 'Indexing your messages. This can take a bit longer for larger mailboxes.')\" />\n\t<EmptyMailboxSection v-else-if=\"isPriorityInbox && !hasMessages\" key=\"empty\" />\n\t<EmptyMailbox v-else-if=\"!hasMessages\" key=\"empty\" />\n\t<EnvelopeList\n\t\tv-else\n\t\t:account=\"account\"\n\t\t:mailbox=\"mailbox\"\n\t\t:search-query=\"searchQuery\"\n\t\t:envelopes=\"envelopesToShow\"\n\t\t:refreshing=\"refreshing\"\n\t\t:loading-more=\"loadingMore\"\n\t\t:load-more-button=\"showLoadMore\"\n\t\t@delete=\"onDelete\"\n\t\t@loadMore=\"loadMore\" />\n</template>\n\n<script>\nimport EmptyMailbox from './EmptyMailbox'\nimport EnvelopeList from './EnvelopeList'\nimport Error from './Error'\nimport { findIndex, propEq } from 'ramda'\nimport isMobile from '@nextcloud/vue/dist/Mixins/isMobile'\nimport Loading from './Loading'\nimport logger from '../logger'\nimport MailboxLockedError from '../errors/MailboxLockedError'\nimport MailboxNotCachedError from '../errors/MailboxNotCachedError'\nimport { matchError } from '../errors/match'\nimport { wait } from '../util/wait'\nimport EmptyMailboxSection from './EmptyMailboxSection'\nimport { showError } from '@nextcloud/dialogs'\nimport NoTrashMailboxConfiguredError\n\tfrom '../errors/NoTrashMailboxConfiguredError'\n\nexport default {\n\tname: 'Mailbox',\n\tcomponents: {\n\t\tEmptyMailboxSection,\n\t\tEmptyMailbox,\n\t\tEnvelopeList,\n\t\tError,\n\t\tLoading,\n\t},\n\tmixins: [isMobile],\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tmailbox: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tbus: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tpaginate: {\n\t\t\ttype: String,\n\t\t\tdefault: 'scroll',\n\t\t},\n\t\tinitialPageSize: {\n\t\t\ttype: Number,\n\t\t\tdefault: 20,\n\t\t},\n\t\topenFirst: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tsearchQuery: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tisPriorityInbox: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\terror: false,\n\t\t\trefreshing: false,\n\t\t\tloadingMore: false,\n\t\t\tloadingEnvelopes: true,\n\t\t\tloadingCacheInitialization: false,\n\t\t\tloadMailboxInterval: undefined,\n\t\t\texpanded: false,\n\t\t\tendReached: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tenvelopes() {\n\t\t\treturn this.$store.getters.getEnvelopes(this.mailbox.databaseId, this.searchQuery)\n\t\t},\n\t\tenvelopesToShow() {\n\t\t\tif (this.paginate === 'manual' && !this.expanded) {\n\t\t\t\treturn this.envelopes.slice(0, 5)\n\t\t\t}\n\t\t\treturn this.envelopes\n\t\t},\n\t\thasMessages() {\n\t\t\treturn this.envelopes.length > 0\n\t\t},\n\t\tshowLoadMore() {\n\t\t\treturn !this.endReached && this.paginate === 'manual'\n\t\t},\n\t},\n\twatch: {\n\t\t// Force the envelope list to re-render when user clicks on the folder it's currently in\n\t\t$route(to) {\n\t\t\tif (to.params.threadId === undefined && !this.isMobile) {\n\t\t\t\tconst first = this.envelopes[0]\n\t\t\t\tif (typeof first !== 'undefined') {\n\t\t\t\t\tlogger.debug('refreshing mailbox')\n\t\t\t\t\tif (this.$route.params.mailboxId === this.account.draftsMailboxId) {\n\t\t\t\t\t\tthis.$router.replace({\n\t\t\t\t\t\t\tname: 'message',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t\t\t\t\tthreadId: 'new',\n\t\t\t\t\t\t\t\tdraftId: first.databaseId,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$router.replace({\n\t\t\t\t\t\t\tname: 'message',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t\t\t\t\tthreadId: first.databaseId,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\taccount() {\n\t\t\tthis.loadEnvelopes()\n\t\t},\n\t\tmailbox() {\n\t\t\tthis.loadEnvelopes()\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug(`syncing mailbox ${this.mailbox.databaseId} (${this.searchQuery}) after mailbox change`)\n\t\t\t\t\tthis.sync(false)\n\t\t\t\t})\n\t\t},\n\t\tsearchQuery() {\n\t\t\tthis.loadEnvelopes()\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.bus.$on('loadMore', this.onScroll)\n\t\tthis.bus.$on('delete', this.onDelete)\n\t\tthis.bus.$on('shortcut', this.handleShortcut)\n\t\tthis.loadMailboxInterval = setInterval(this.loadMailbox, 60000)\n\t},\n\tasync mounted() {\n\t\tthis.loadEnvelopes()\n\t\t\t.then(() => {\n\t\t\t\tlogger.debug(`syncing mailbox ${this.mailbox.databaseId} (${this.searchQuery}) after mount`)\n\t\t\t\tthis.sync(false)\n\t\t\t})\n\t},\n\tdestroyed() {\n\t\tthis.bus.$off('loadMore', this.onScroll)\n\t\tthis.bus.$off('delete', this.onDelete)\n\t\tthis.bus.$off('shortcut', this.handleShortcut)\n\t\tthis.stopInterval()\n\t},\n\tmethods: {\n\t\tinitializeCache() {\n\t\t\tthis.loadingCacheInitialization = true\n\t\t\tthis.error = false\n\n\t\t\tlogger.debug(`syncing mailbox ${this.mailbox.databaseId} (${this.searchQuery}) during cache initalization`)\n\t\t\tthis.sync(true)\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.loadingCacheInitialization = false\n\n\t\t\t\t\treturn this.loadEnvelopes()\n\t\t\t\t})\n\t\t},\n\t\tasync loadEnvelopes() {\n\t\t\tlogger.debug(`Fetching envelopes for mailbox ${this.mailbox.databaseId} (${this.searchQuery})`, this.mailbox)\n\t\t\tthis.loadingEnvelopes = true\n\t\t\tthis.loadingCacheInitialization = false\n\t\t\tthis.error = false\n\n\t\t\ttry {\n\t\t\t\tconst envelopes = await this.$store.dispatch('fetchEnvelopes', {\n\t\t\t\t\tmailboxId: this.mailbox.databaseId,\n\t\t\t\t\tquery: this.searchQuery,\n\t\t\t\t\tlimit: this.initialPageSize,\n\t\t\t\t})\n\n\t\t\t\tlogger.debug(envelopes.length + ' envelopes fetched', { envelopes })\n\n\t\t\t\tthis.loadingEnvelopes = false\n\t\t\t\tif (this.openFirst && !this.isMobile && this.$route.name !== 'message' && envelopes.length > 0) {\n\t\t\t\t\t// Show first message\n\t\t\t\t\tconst first = envelopes[0]\n\n\t\t\t\t\t// Keep the selected account-mailbox combination, but navigate to the message\n\t\t\t\t\t// (it's not a bug that we don't use first.accountId and first.mailboxId here)\n\t\t\t\t\tlogger.debug('showing the first message of mailbox ' + this.$route.params.mailboxId)\n\t\t\t\t\tif (this.$route.params.mailboxId === this.account.draftsMailboxId) {\n\t\t\t\t\t\tthis.$router.replace({\n\t\t\t\t\t\t\tname: 'message',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t\t\t\t\tthreadId: 'new',\n\t\t\t\t\t\t\t\tdraftId: first.databaseId,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$router.replace({\n\t\t\t\t\t\t\tname: 'message',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t\t\t\t\tthreadId: first.databaseId,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tawait matchError(error, {\n\t\t\t\t\t[MailboxLockedError.getName()]: async(error) => {\n\t\t\t\t\t\tlogger.info(`Mailbox ${this.mailbox.databaseId} (${this.searchQuery}) is locked`, { error })\n\n\t\t\t\t\t\tawait wait(15 * 1000)\n\t\t\t\t\t\t// Keep trying\n\t\t\t\t\t\tawait this.loadEnvelopes()\n\t\t\t\t\t},\n\t\t\t\t\t[MailboxNotCachedError.getName()]: async(error) => {\n\t\t\t\t\t\tlogger.info(`Mailbox ${this.mailbox.databaseId} (${this.searchQuery}) not cached. Triggering initialization`, { error })\n\t\t\t\t\t\tthis.loadingEnvelopes = false\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait this.initializeCache()\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tlogger.error(`Could not initialize cache of mailbox ${this.mailbox.databaseId} (${this.searchQuery})`, { error })\n\t\t\t\t\t\t\tthis.error = error\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdefault: (error) => {\n\t\t\t\t\t\tlogger.error(`Could not fetch envelopes of mailbox ${this.mailbox.databaseId} (${this.searchQuery})`, { error })\n\t\t\t\t\t\tthis.loadingEnvelopes = false\n\t\t\t\t\t\tthis.error = error\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tasync loadMore() {\n\t\t\tif (!this.expanded) {\n\t\t\t\tlogger.debug('expanding envelope list')\n\t\t\t\tthis.expanded = true\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tlogger.debug('fetching next envelope page')\n\t\t\tthis.loadingMore = true\n\n\t\t\ttry {\n\t\t\t\tconst envelopes = await this.$store.dispatch('fetchNextEnvelopePage', {\n\t\t\t\t\tmailboxId: this.mailbox.databaseId,\n\t\t\t\t\tquery: this.searchQuery,\n\t\t\t\t})\n\t\t\t\tif (envelopes.length === 0) {\n\t\t\t\t\tlogger.info('envelope list end reached')\n\t\t\t\t\tthis.endReached = true\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not fetch next envelope page', { error })\n\t\t\t} finally {\n\t\t\t\tthis.loadingMore = false\n\t\t\t}\n\t\t},\n\t\tasync handleShortcut(e) {\n\t\t\tconst envelopes = this.envelopes\n\t\t\tconst currentId = parseInt(this.$route.params.threadId, 10)\n\n\t\t\tconst env = envelopes.find((e) => e.databaseId === currentId)\n\t\t\tconst idx = envelopes.indexOf(env)\n\t\t\tlet next\n\n\t\t\tif (e.srcKey !== 'refresh' && !env) {\n\t\t\t\tlogger.debug('envelope is not in the list, ignoring shortcut', {\n\t\t\t\t\tsrcKey: e.srcKey,\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tswitch (e.srcKey) {\n\t\t\tcase 'next':\n\t\t\tcase 'prev':\n\t\t\t\tif (e.srcKey === 'next') {\n\t\t\t\t\tnext = envelopes[idx + 1]\n\t\t\t\t} else {\n\t\t\t\t\tnext = envelopes[idx - 1]\n\t\t\t\t}\n\n\t\t\t\tif (!next) {\n\t\t\t\t\tlogger.debug('ignoring shortcut: head or tail of envelope list reached', {\n\t\t\t\t\t\tenvelopes,\n\t\t\t\t\t\tidx,\n\t\t\t\t\t\tsrcKey: e.srcKey,\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\t// Keep the selected account-mailbox combination, but navigate to a different message\n\t\t\t\t// (it's not a bug that we don't use next.accountId and next.mailboxId here)\n\t\t\t\tthis.$router.push({\n\t\t\t\t\tname: 'message',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t\t\tthreadId: next.databaseId,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t\tbreak\n\t\t\tcase 'del':\n\t\t\t\tlogger.debug('deleting', { env })\n\t\t\t\tthis.onDelete(env.databaseId)\n\t\t\t\ttry {\n\t\t\t\t\tawait this.$store.dispatch('deleteThread', {\n\t\t\t\t\t\tenvelope: env,\n\t\t\t\t\t})\n\t\t\t\t} catch (error) {\n\t\t\t\t\tlogger.error('could not delete envelope', {\n\t\t\t\t\t\tenv,\n\t\t\t\t\t\terror,\n\t\t\t\t\t})\n\n\t\t\t\t\tshowError(await matchError(error, {\n\t\t\t\t\t\t[NoTrashMailboxConfiguredError.getName()]() {\n\t\t\t\t\t\t\treturn t('mail', 'No trash mailbox configured')\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault() {\n\t\t\t\t\t\t\treturn t('mail', 'Could not delete message')\n\t\t\t\t\t\t},\n\t\t\t\t\t}))\n\t\t\t\t}\n\n\t\t\t\tbreak\n\t\t\tcase 'flag':\n\t\t\t\tlogger.debug('flagging envelope via shortkey', { env })\n\t\t\t\tthis.$store.dispatch('toggleEnvelopeFlagged', env).catch((error) =>\n\t\t\t\t\tlogger.error('could not flag envelope via shortkey', {\n\t\t\t\t\t\tenv,\n\t\t\t\t\t\terror,\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t\tbreak\n\t\t\tcase 'refresh':\n\t\t\t\tlogger.debug(`syncing mailbox ${this.mailbox.databaseId} (${this.searchQuery}) per shortcut`)\n\t\t\t\tthis.sync(false)\n\n\t\t\t\tbreak\n\t\t\tcase 'unseen':\n\t\t\t\tlogger.debug('marking message as seen/unseen via shortkey', { env })\n\t\t\t\tthis.$store.dispatch('toggleEnvelopeSeen', { envelope: env }).catch((error) =>\n\t\t\t\t\tlogger.error('could not mark envelope as seen/unseen via shortkey', {\n\t\t\t\t\t\tenv,\n\t\t\t\t\t\terror,\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tlogger.warn('shortcut ' + e.srcKey + ' is unknown. ignoring.')\n\t\t\t}\n\t\t},\n\t\tasync sync(init = false) {\n\t\t\tif (this.refreshing) {\n\t\t\t\tlogger.debug(`already sync'ing mailbox ${this.mailbox.databaseId} (${this.searchQuery}), aborting`, { init })\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.refreshing = true\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('syncEnvelopes', {\n\t\t\t\t\tmailboxId: this.mailbox.databaseId,\n\t\t\t\t\tquery: this.searchQuery,\n\t\t\t\t\tinit,\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tmatchError(error, {\n\t\t\t\t\t[MailboxLockedError.getName()](error) {\n\t\t\t\t\t\tlogger.info('Background sync failed because the mailbox is locked', { error, init })\n\t\t\t\t\t},\n\t\t\t\t\tdefault(error) {\n\t\t\t\t\t\tlogger.error('Could not sync envelopes: ' + error.message, { error, init })\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t} finally {\n\t\t\t\tthis.refreshing = false\n\t\t\t\tlogger.debug(`finished sync'ing mailbox ${this.mailbox.databaseId} (${this.searchQuery})`, { init })\n\t\t\t}\n\t\t},\n\t\t// onDelete(id): Load more message and navigate to other message if needed\n\t\t// id: The id of the message being delete\n\t\tonDelete(id) {\n\t\t\t// Get a new message\n\t\t\tthis.$store.dispatch('fetchNextEnvelopes', {\n\t\t\t\tmailboxId: this.mailbox.databaseId,\n\t\t\t\tquery: this.searchQuery,\n\t\t\t\tquantity: 1,\n\t\t\t})\n\t\t\tconst idx = findIndex(propEq('databaseId', id), this.envelopes)\n\t\t\tif (idx === -1) {\n\t\t\t\tlogger.debug('envelope to delete does not exist in envelope list')\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (id !== this.$route.params.threadId) {\n\t\t\t\tlogger.debug('other message open, not jumping to the next/previous message')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst next = this.envelopes[idx === 0 ? idx : idx - 1]\n\t\t\tif (!next) {\n\t\t\t\tlogger.debug('no next/previous envelope, not navigating')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Keep the selected mailbox, but navigate to a different message\n\t\t\t// (it's not a bug that we don't use next.mailboxId here)\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t\tthreadId: next.databaseId,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\tonScroll() {\n\t\t\tif (this.paginate !== 'scroll') {\n\t\t\t\tlogger.debug('ignoring scroll pagination')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.loadMore()\n\t\t},\n\t\tasync loadMailbox() {\n\t\t\t// When the account is unified or inbox, return nothing, else sync the mailbox\n\t\t\tif (this.account.isUnified || this.mailbox.specialRole === 'inbox') {\n\t\t\t\treturn\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tlogger.debug(`syncing mailbox ${this.mailbox.databaseId} (${this.searchQuery}) in background`)\n\t\t\t\tawait this.sync(false)\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('Background sync failed: ' + error.message, { error })\n\t\t\t}\n\t\t},\n\t\tstopInterval() {\n\t\t\tclearInterval(this.loadMailboxInterval)\n\t\t\tthis.loadMailboxInterval = undefined\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n// Fix vertical space between sections in priority inbox\n.nameimportant,\n.namestarred {\n\t::v-deep #load-more-mail-messages {\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 8px;\n\t}\n}\n</style>\n","import { render, staticRenderFns } from \"./EmptyMailboxSection.vue?vue&type=template&id=4512145e&scoped=true&\"\nimport script from \"./EmptyMailboxSection.vue?vue&type=script&lang=js&\"\nexport * from \"./EmptyMailboxSection.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EmptyMailboxSection.vue?vue&type=style&index=0&id=4512145e&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4512145e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"emptycontent\"}},[_vm._t(\"default\",function(){return [_vm._v(\" \"+_vm._s(_vm.t('mail', 'No messages')))]})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mailbox.vue?vue&type=style&index=0&id=73117de6&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./Mailbox.vue?vue&type=template&id=73117de6&scoped=true&\"\nimport script from \"./Mailbox.vue?vue&type=script&lang=js&\"\nexport * from \"./Mailbox.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Mailbox.vue?vue&type=style&index=0&id=73117de6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"73117de6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.error)?_c('Error',{attrs:{\"error\":_vm.t('mail', 'Could not open mailbox'),\"message\":\"\",\"role\":\"alert\"}}):(_vm.loadingEnvelopes)?_c('Loading',{attrs:{\"hint\":_vm.t('mail', 'Loading messages'),\"role\":\"alert\"}}):(_vm.loadingCacheInitialization)?_c('Loading',{attrs:{\"hint\":_vm.t('mail', 'Loading messages'),\"slow-hint\":_vm.t('mail', 'Indexing your messages. This can take a bit longer for larger mailboxes.')}}):(_vm.isPriorityInbox && !_vm.hasMessages)?_c('EmptyMailboxSection',{key:\"empty\"}):(!_vm.hasMessages)?_c('EmptyMailbox',{key:\"empty\"}):_c('EnvelopeList',{attrs:{\"account\":_vm.account,\"mailbox\":_vm.mailbox,\"search-query\":_vm.searchQuery,\"envelopes\":_vm.envelopesToShow,\"refreshing\":_vm.refreshing,\"loading-more\":_vm.loadingMore,\"load-more-button\":_vm.showLoadMore},on:{\"delete\":_vm.onDelete,\"loadMore\":_vm.loadMore}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\n * @copyright 2021 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2021 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport * as webdav from 'webdav'\nimport axios from '@nextcloud/axios'\nimport memoize from 'lodash/fp/memoize'\nimport { generateRemoteUrl } from '@nextcloud/router'\nimport { getCurrentUser } from '@nextcloud/auth'\n\nexport const getClient = memoize((service) => {\n\t// Add this so the server knows it is an request from the browser\n\taxios.defaults.headers['X-Requested-With'] = 'XMLHttpRequest'\n\n\t// force our axios\n\tconst patcher = webdav.getPatcher()\n\tpatcher.patch('request', axios)\n\n\treturn webdav.createClient(\n\t\tgenerateRemoteUrl(`dav/${service}/${getCurrentUser().uid}`)\n\t)\n})\n","/*\n * @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { getClient } from '../dav/client'\n\nexport async function getFileSize(path) {\n\tconst response = await getClient('files').stat(path, {\n\t\tdata: `<?xml version=\"1.0\"?>\n\t\t\t<d:propfind  xmlns:d=\"DAV:\"\n\t\t\t\txmlns:oc=\"http://owncloud.org/ns\">\n\t\t\t\t<d:prop>\n\t\t\t\t\t<oc:size />\n\t\t\t\t</d:prop>\n\t\t\t</d:propfind>`,\n\t\tdetails: true,\n\t})\n\n\treturn response?.data?.props?.size\n}\n","/*\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\n\nexport function saveAttachmentToFiles(id, attachmentId, directory) {\n\tconst url = generateUrl(\n\t\t'/apps/mail/api/messages/{id}/attachment/{attachmentId}',\n\t\t{\n\t\t\tid,\n\t\t\tattachmentId,\n\t\t}\n\t)\n\n\treturn Axios.post(url, {\n\t\ttargetPath: directory,\n\t})\n}\n\nexport function saveAttachmentsToFiles(id, directory) {\n\t// attachmentId = 0 means 'all attachments' (see MessageController.php::saveAttachement)\n\treturn saveAttachmentToFiles(id, 0, directory)\n}\n\nexport function downloadAttachment(url) {\n\treturn Axios.get(url).then((res) => res.data)\n}\n\nexport const uploadLocalAttachment = (file, progress) => {\n\tconst url = generateUrl('/apps/mail/api/attachments')\n\tconst data = new FormData()\n\tconst opts = {\n\t\tonUploadProgress: (prog) => progress(prog, prog.loaded, prog.total),\n\t}\n\tdata.append('attachment', file)\n\n\treturn Axios.post(url, data, opts)\n\t\t.then((resp) => resp.data)\n\t\t.then(({ id }) => {\n\t\t\treturn {\n\t\t\t\tfile,\n\t\t\t\tid,\n\t\t\t}\n\t\t})\n}\n","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  - @copyright 2020 Gary Kim <gary@garykim.dev>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"new-message-attachments\">\n\t\t<ul>\n\t\t\t<li v-for=\"attachment in value\" :key=\"attachment.id\">\n\t\t\t\t<div class=\"new-message-attachment-name\">\n\t\t\t\t\t{{ attachment.displayName }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"new-message-attachments-action svg icon-delete\" @click=\"onDelete(attachment)\" />\n\t\t\t</li>\n\t\t\t<li v-if=\"uploading\" class=\"attachments-upload-progress\">\n\t\t\t\t<div :class=\"{'icon-loading-small': uploading}\" />\n\t\t\t\t<div>{{ uploading ? t('mail', 'Uploading {percent}% …', {percent: uploadProgress}) : '' }}</div>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t<input ref=\"localAttachments\"\n\t\t\ttype=\"file\"\n\t\t\tmultiple\n\t\t\tstyle=\"display: none;\"\n\t\t\t@change=\"onLocalAttachmentSelected\">\n\t</div>\n</template>\n\n<script>\nimport map from 'lodash/fp/map'\nimport trimStart from 'lodash/fp/trimCharsStart'\nimport { getRequestToken } from '@nextcloud/auth'\nimport { formatFileSize } from '@nextcloud/files'\nimport prop from 'lodash/fp/prop'\nimport { getFilePickerBuilder, showWarning } from '@nextcloud/dialogs'\nimport sum from 'lodash/fp/sum'\nimport sumBy from 'lodash/fp/sumBy'\nimport { translate as t, translatePlural as n } from '@nextcloud/l10n'\n\nimport Vue from 'vue'\n\nimport logger from '../logger'\nimport { getFileSize } from '../service/FileService'\nimport { shareFile } from '../service/FileSharingService'\nimport { uploadLocalAttachment } from '../service/AttachmentService'\n\nexport default {\n\tname: 'ComposerAttachments',\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tbus: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tuploadSizeLimit: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tuploading: false,\n\t\t\tuploads: {},\n\t\t}\n\t},\n\tcomputed: {\n\t\tuploadProgress() {\n\t\t\tlet uploaded = 0\n\t\t\tlet total = 0\n\t\t\tfor (const id in this.uploads) {\n\t\t\t\tuploaded += this.uploads[id].uploaded\n\t\t\t\ttotal += this.uploads[id].total\n\t\t\t}\n\t\t\treturn ((uploaded / total) * 100).toFixed(1)\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.bus.$on('onAddLocalAttachment', this.onAddLocalAttachment)\n\t\tthis.bus.$on('onAddCloudAttachment', this.onAddCloudAttachment)\n\t\tthis.bus.$on('onAddCloudAttachmentLink', this.onAddCloudAttachmentLink)\n\t},\n\tmethods: {\n\t\tonAddLocalAttachment() {\n\t\t\tthis.$refs.localAttachments.click()\n\t\t},\n\t\temitNewAttachments(attachments) {\n\t\t\tthis.$emit('input', this.value.concat(attachments))\n\t\t},\n\t\ttotalSizeOfUpload() {\n\t\t\treturn Object.values(this.value).reduce((acc, upload) => {\n\t\t\t\tif (!upload.type === 'local') {\n\t\t\t\t\t// Ignore link shares\n\t\t\t\t\treturn acc\n\t\t\t\t}\n\n\t\t\t\treturn acc + upload.size\n\t\t\t}, 0)\n\t\t},\n\t\tonLocalAttachmentSelected(e) {\n\t\t\tthis.uploading = true\n\n\t\t\tVue.set(this, 'uploads', {})\n\n\t\t\tconst toUpload = sumBy(prop('size'), Object.values(e.target.files))\n\t\t\tconst newTotal = toUpload + this.totalSizeOfUpload()\n\t\t\tlogger.debug('checking upload size limit', {\n\t\t\t\texistingUploads: this.totalSizeOfUpload(),\n\t\t\t\ttoUpload,\n\t\t\t\tlimit: this.uploadSizeLimit,\n\t\t\t\tnewTotal,\n\t\t\t})\n\t\t\tif (this.uploadSizeLimit && newTotal > this.uploadSizeLimit) {\n\t\t\t\tthis.showAttachmentFileSizeWarning(e.target.files.length)\n\n\t\t\t\tthis.uploading = false\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst progress = (id) => (prog, uploaded) => {\n\t\t\t\tthis.uploads[id].uploaded = uploaded\n\t\t\t}\n\n\t\t\tconst promises = map((file) => {\n\t\t\t\tVue.set(this.uploads, file.name, {\n\t\t\t\t\ttotal: file.size,\n\t\t\t\t\tuploaded: 0,\n\t\t\t\t})\n\n\t\t\t\treturn uploadLocalAttachment(file, progress(file.name)).then(({ file, id }) => {\n\t\t\t\t\tlogger.info('uploaded')\n\t\t\t\t\tthis.emitNewAttachments([{\n\t\t\t\t\t\tfileName: file.name,\n\t\t\t\t\t\tdisplayName: trimStart('/', file.name),\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tsize: file.size,\n\t\t\t\t\t\ttype: 'local',\n\t\t\t\t\t}])\n\t\t\t\t})\n\n\t\t\t}, e.target.files)\n\n\t\t\tconst done = Promise.all(promises)\n\t\t\t\t.catch((error) => logger.error('could not upload all attachments', { error }))\n\t\t\t\t.then(() => (this.uploading = false))\n\n\t\t\tthis.$emit('upload', done)\n\n\t\t\treturn done\n\t\t},\n\t\tasync onAddCloudAttachment() {\n\t\t\tconst picker = getFilePickerBuilder(t('mail', 'Choose a file to add as attachment')).setMultiSelect(true).build()\n\n\t\t\ttry {\n\t\t\t\tconst paths = await picker.pick(t('mail', 'Choose a file to add as attachment'))\n\t\t\t\tconst fileSizes = await Promise.all(paths.map(getFileSize))\n\t\t\t\tconst newTotal = sum(fileSizes) + this.totalSizeOfUpload()\n\n\t\t\t\tif (this.uploadSizeLimit && newTotal > this.uploadSizeLimit) {\n\t\t\t\t\tthis.showAttachmentFileSizeWarning(paths.length)\n\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tthis.emitNewAttachments(paths.map(function(name) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tfileName: name,\n\t\t\t\t\t\tdisplayName: trimStart('/', name),\n\t\t\t\t\t\ttype: 'cloud',\n\t\t\t\t\t}\n\t\t\t\t}))\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not choose a file as attachment', { error })\n\t\t\t}\n\t\t},\n\t\tasync onAddCloudAttachmentLink() {\n\t\t\tconst picker = getFilePickerBuilder(t('mail', 'Choose a file to share as a link')).build()\n\n\t\t\ttry {\n\t\t\t\tconst path = await picker.pick(t('mail', 'Choose a file to share as a link'))\n\t\t\t\tconst url = await shareFile(path, getRequestToken())\n\n\t\t\t\tthis.appendToBodyAtCursor(`<a href=\"${url}\">${url}</a>`)\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not choose a file as attachment link', { error })\n\t\t\t}\n\t\t},\n\t\tshowAttachmentFileSizeWarning(num) {\n\t\t\tshowWarning(n(\n\t\t\t\t'mail',\n\t\t\t\t'The attachment exceed the allowed attachments size of {size}. Please share the file via link instead.',\n\t\t\t\t'The attachments exceed the allowed attachments size of {size}. Please share the files via link instead.',\n\t\t\t\tnum,\n\t\t\t\t{\n\t\t\t\t\tsize: formatFileSize(this.uploadSizeLimit),\n\t\t\t\t}\n\t\t\t))\n\t\t},\n\t\tonDelete(attachment) {\n\t\t\tthis.$emit(\n\t\t\t\t'input',\n\t\t\t\tthis.value.filter((a) => a !== attachment)\n\t\t\t)\n\t\t},\n\t\tappendToBodyAtCursor(toAppend) {\n\t\t\tthis.bus.$emit('appendToBodyAtCursor', toAppend)\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.new-message-attachments li {\n\tpadding: 10px;\n}\n\n.new-message-attachments-action {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tpadding: 22px;\n\topacity: 0.5;\n}\n\n/* attachment filenames */\n.new-message-attachment-name {\n\tdisplay: inline-block;\n}\n\n/* Colour the filename with a different color during attachment upload */\n.new-message-attachment-name.upload-ongoing {\n\tcolor: #0082c9;\n}\n\n/* Colour the filename in red if the attachment upload failed */\n.new-message-attachment-name.upload-warning {\n\tcolor: #d2322d;\n}\n\n/* Red ProgressBar for failed attachment uploads */\n.new-message-attachment-name.upload-warning .ui-progressbar-value {\n\tborder: 1px solid #e9322d;\n\tbackground: #e9322d;\n}\n\n.attachments-upload-progress {\n\tdisplay: flex;\n}\n\n.attachments-upload-progress > div {\n\tpadding-left: 3px;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachments.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachments.vue?vue&type=script&lang=js&\"","/**\n * @copyright Copyright (c) 2019 Marco Ambrosini <marcoambrosini@pm.me>\n * @copyright Copyright (c) 2020 Gary Kim <gary@garykim.dev>\n *\n * @author Marco Ambrosini <marcoambrosini@pm.me>\n * @author Gary Kim <gary@garykim.dev>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n// File originally from https://github.com/nextcloud/spreed/blob/bc22c21cf70a6243e7df7d838d49018c61468050/src/services/filesSharingServices.js\n// Slightly modified for use in Mail\n\nimport axios from '@nextcloud/axios'\nimport { generateOcsUrl } from '@nextcloud/router'\nimport { showError } from '@nextcloud/dialogs'\n\n/**\n * Makes a share link for a given file or directory.\n * @param {string} path The file path from the user's root directory. e.g. `/myfile.txt`\n * @param {string} token The conversation's token\n * @returns {string} url share link\n */\nconst shareFile = async function(path, token) {\n\ttry {\n\t\tconst res = await axios.post(generateOcsUrl('apps/files_sharing/api/v1/', 2) + 'shares', {\n\t\t\tshareType: 3, // OC.Share.SHARE_TYPE_LINK,\n\t\t\tpath,\n\t\t\tshareWith: token,\n\t\t})\n\t\treturn res.data.ocs.data.url\n\t} catch (error) {\n\t\tif (\n\t\t\terror.response\n\t\t\t&& error.response.data\n\t\t\t&& error.response.data.ocs\n\t\t\t&& error.response.data.ocs.meta\n\t\t\t&& error.response.data.ocs.meta.message\n\t\t) {\n\t\t\tconsole.error(`Error while sharing file: ${error.response.data.ocs.meta.message || 'Unknown error'}`)\n\t\t\tshowError(error.response.data.ocs.meta.message)\n\t\t\tthrow error\n\t\t} else {\n\t\t\tconsole.error('Error while sharing file: Unknown error')\n\t\t\tshowError(t('mail', 'Error while sharing file'))\n\t\t\tthrow error\n\t\t}\n\t}\n}\n\nexport { shareFile }\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachments.vue?vue&type=style&index=0&id=44ae67a0&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./ComposerAttachments.vue?vue&type=template&id=44ae67a0&scoped=true&\"\nimport script from \"./ComposerAttachments.vue?vue&type=script&lang=js&\"\nexport * from \"./ComposerAttachments.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ComposerAttachments.vue?vue&type=style&index=0&id=44ae67a0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"44ae67a0\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"new-message-attachments\"},[_c('ul',[_vm._l((_vm.value),function(attachment){return _c('li',{key:attachment.id},[_c('div',{staticClass:\"new-message-attachment-name\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(attachment.displayName)+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"new-message-attachments-action svg icon-delete\",on:{\"click\":function($event){return _vm.onDelete(attachment)}}})])}),_vm._v(\" \"),(_vm.uploading)?_c('li',{staticClass:\"attachments-upload-progress\"},[_c('div',{class:{'icon-loading-small': _vm.uploading}}),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.uploading ? _vm.t('mail', 'Uploading {percent}% …', {percent: _vm.uploadProgress}) : ''))])]):_vm._e()],2),_vm._v(\" \"),_c('input',{ref:\"localAttachments\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"multiple\":\"\"},on:{\"change\":_vm.onLocalAttachmentSelected}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @param {Text} message the message\n * @returns {boolean|*}\n */\nexport const isPgpgMessage = (message) =>\n\tmessage.format === 'plain' && message.value.startsWith('-----BEGIN PGP MESSAGE-----')\n","<!--\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div id=\"mailvelope-composer\" />\n</template>\n\n<script>\nimport logger from '../logger'\nimport { isPgpgMessage } from '../crypto/pgp'\n\nexport default {\n\tname: 'MailvelopeEditor',\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\trecipients: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tquotedText: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t\tisReplyOrForward: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\teditor: undefined,\n\t\t}\n\t},\n\tasync mounted() {\n\t\tconst isEncrypted = this.quotedText ? isPgpgMessage(this.quotedText) : false\n\t\tconst quotedMail = this.isReplyOrForward ? this.quotedText?.value : undefined\n\n\t\tthis.editor = await window.mailvelope.createEditorContainer('#mailvelope-composer', undefined, {\n\t\t\tquotedMail: isEncrypted ? quotedMail : undefined,\n\t\t})\n\t},\n\tmethods: {\n\t\tasync pull() {\n\t\t\tconst recipients = this.recipients.map((r) => r.email)\n\t\t\tlogger.info('encrypting message', { recipients })\n\t\t\tconst armored = await this.editor.encrypt(recipients)\n\t\t\tlogger.info('message encryted', { armored })\n\n\t\t\tthis.$emit('input', armored)\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n#mailvelope-composer {\n\twidth: 100%;\n\theight: 450px;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailvelopeEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailvelopeEditor.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailvelopeEditor.vue?vue&type=style&index=0&id=1320c887&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./MailvelopeEditor.vue?vue&type=template&id=1320c887&scoped=true&\"\nimport script from \"./MailvelopeEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./MailvelopeEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MailvelopeEditor.vue?vue&type=style&index=0&id=1320c887&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1320c887\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"mailvelope-composer\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\n * @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport logger from '../logger'\n\nlet mailvelope\n\nconst loadMailvelopeStatically = () => window.mailvelope\n\nconst loadMailvelopeDynamically = () =>\n\tnew Promise((resolve) => {\n\t\twindow.addEventListener('mailvelope', () => resolve(window.mailvelope), false)\n\t})\n\nexport const getMailvelope = async() => {\n\tif (mailvelope) {\n\t\treturn mailvelope\n\t}\n\n\tmailvelope = loadMailvelopeStatically()\n\tif (mailvelope) {\n\t\tlogger.debug('mailvelope found statically')\n\t\treturn mailvelope\n\t}\n\n\tlogger.debug('loading mailvelope dynamically')\n\tmailvelope = await loadMailvelopeDynamically()\n\tlogger.debug('mailvelope found dynamically')\n\treturn mailvelope\n}\n","<template>\n\t<div v-if=\"state === STATES.EDITING\" class=\"message-composer\">\n\t\t<div class=\"composer-fields mail-account\">\n\t\t\t<label class=\"from-label\" for=\"from\">\n\t\t\t\t{{ t('mail', 'From') }}\n\t\t\t</label>\n\t\t\t<Multiselect\n\t\t\t\tid=\"from\"\n\t\t\t\t:value=\"selectedAlias\"\n\t\t\t\t:options=\"aliases\"\n\t\t\t\tlabel=\"name\"\n\t\t\t\ttrack-by=\"selectId\"\n\t\t\t\t:searchable=\"false\"\n\t\t\t\t:custom-label=\"formatAliases\"\n\t\t\t\t:placeholder=\"t('mail', 'Select account')\"\n\t\t\t\t:clear-on-select=\"false\"\n\t\t\t\t@select=\"onAliasChange\" />\n\t\t</div>\n\t\t<div class=\"composer-fields\">\n\t\t\t<label class=\"to-label\" for=\"to\">\n\t\t\t\t{{ t('mail', 'To') }}\n\t\t\t</label>\n\t\t\t<Multiselect\n\t\t\t\tid=\"to\"\n\t\t\t\tref=\"toLabel\"\n\t\t\t\tv-model=\"selectTo\"\n\t\t\t\t:options=\"selectableRecipients\"\n\t\t\t\t:taggable=\"true\"\n\t\t\t\tlabel=\"label\"\n\t\t\t\ttrack-by=\"email\"\n\t\t\t\t:limit=\"4\"\n\t\t\t\t:multiple=\"true\"\n\t\t\t\t:placeholder=\"t('mail', 'Contact or email address …')\"\n\t\t\t\t:clear-on-select=\"false\"\n\t\t\t\t:close-on-select=\"false\"\n\t\t\t\t:show-no-options=\"false\"\n\t\t\t\t:preserve-search=\"true\"\n\t\t\t\t:hide-selected=\"true\"\n\t\t\t\t@keyup=\"onInputChanged\"\n\t\t\t\t@tag=\"onNewToAddr\"\n\t\t\t\t@search-change=\"onAutocomplete\" />\n\t\t\t<a v-if=\"!showCC\"\n\t\t\t\tclass=\"copy-toggle\"\n\t\t\t\thref=\"#\"\n\t\t\t\t@click.prevent=\"showCC = true\">\n\t\t\t\t{{ t('mail', '+ Cc/Bcc') }}\n\t\t\t</a>\n\t\t</div>\n\t\t<div v-if=\"showCC\" class=\"composer-fields\">\n\t\t\t<label for=\"cc\" class=\"cc-label\">\n\t\t\t\t{{ t('mail', 'Cc') }}\n\t\t\t</label>\n\t\t\t<Multiselect\n\t\t\t\tid=\"cc\"\n\t\t\t\tv-model=\"selectCc\"\n\t\t\t\t:options=\"selectableRecipients\"\n\t\t\t\t:taggable=\"true\"\n\t\t\t\tlabel=\"label\"\n\t\t\t\ttrack-by=\"email\"\n\t\t\t\t:multiple=\"true\"\n\t\t\t\t:placeholder=\"t('mail', '')\"\n\t\t\t\t:clear-on-select=\"false\"\n\t\t\t\t:show-no-options=\"false\"\n\t\t\t\t:preserve-search=\"true\"\n\t\t\t\t@keyup=\"onInputChanged\"\n\t\t\t\t@tag=\"onNewCcAddr\"\n\t\t\t\t@search-change=\"onAutocomplete\">\n\t\t\t\t<span slot=\"noOptions\">{{ t('mail', 'No contacts found.') }}</span>\n\t\t\t</Multiselect>\n\t\t</div>\n\t\t<div v-if=\"showCC\" class=\"composer-fields\">\n\t\t\t<label for=\"bcc\" class=\"bcc-label\">\n\t\t\t\t{{ t('mail', 'Bcc') }}\n\t\t\t</label>\n\t\t\t<Multiselect\n\t\t\t\tid=\"bcc\"\n\t\t\t\tv-model=\"selectBcc\"\n\t\t\t\t:options=\"selectableRecipients\"\n\t\t\t\t:taggable=\"true\"\n\t\t\t\tlabel=\"label\"\n\t\t\t\ttrack-by=\"email\"\n\t\t\t\t:multiple=\"true\"\n\t\t\t\t:placeholder=\"t('mail', '')\"\n\t\t\t\t:show-no-options=\"false\"\n\t\t\t\t:preserve-search=\"true\"\n\t\t\t\t@keyup=\"onInputChanged\"\n\t\t\t\t@tag=\"onNewBccAddr\"\n\t\t\t\t@search-change=\"onAutocomplete\">\n\t\t\t\t<span slot=\"noOptions\">{{ t('mail', 'No contacts found.') }}</span>\n\t\t\t</Multiselect>\n\t\t</div>\n\t\t<div class=\"composer-fields\">\n\t\t\t<label for=\"subject\" class=\"subject-label hidden-visually\">\n\t\t\t\t{{ t('mail', 'Subject') }}\n\t\t\t</label>\n\t\t\t<input\n\t\t\t\tid=\"subject\"\n\t\t\t\tv-model=\"subjectVal\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tname=\"subject\"\n\t\t\t\tclass=\"subject\"\n\t\t\t\tautocomplete=\"off\"\n\t\t\t\t:placeholder=\"t('mail', 'Subject …')\"\n\t\t\t\t@keyup=\"onInputChanged\">\n\t\t</div>\n\t\t<div v-if=\"noReply\" class=\"warning noreply-warning\">\n\t\t\t{{ t('mail', 'This message came from a noreply address so your reply will probably not be read.') }}\n\t\t</div>\n\t\t<div v-if=\"mailvelope.keysMissing.length\" class=\"warning noreply-warning\">\n\t\t\t{{\n\t\t\t\tt('mail', 'The following recipients do not have a PGP key: {recipients}.', {\n\t\t\t\t\trecipients: mailvelope.keysMissing.join(', '),\n\t\t\t\t})\n\t\t\t}}\n\t\t</div>\n\t\t<div class=\"composer-fields\">\n\t\t\t<!--@keypress=\"onBodyKeyPress\"-->\n\t\t\t<TextEditor\n\t\t\t\tv-if=\"!encrypt && editorPlainText\"\n\t\t\t\tkey=\"editor-plain\"\n\t\t\t\tv-model=\"bodyVal\"\n\t\t\t\tname=\"body\"\n\t\t\t\tclass=\"message-body\"\n\t\t\t\t:placeholder=\"t('mail', 'Write message …')\"\n\t\t\t\t:focus=\"isReply\"\n\t\t\t\t:bus=\"bus\"\n\t\t\t\t@input=\"onInputChanged\" />\n\t\t\t<TextEditor\n\t\t\t\tv-else-if=\"!encrypt && !editorPlainText\"\n\t\t\t\tkey=\"editor-rich\"\n\t\t\t\tv-model=\"bodyVal\"\n\t\t\t\t:html=\"true\"\n\t\t\t\tname=\"body\"\n\t\t\t\tclass=\"message-body\"\n\t\t\t\t:placeholder=\"t('mail', 'Write message …')\"\n\t\t\t\t:focus=\"isReply\"\n\t\t\t\t:bus=\"bus\"\n\t\t\t\t@input=\"onInputChanged\" />\n\t\t\t<MailvelopeEditor\n\t\t\t\tv-else\n\t\t\t\tref=\"mailvelopeEditor\"\n\t\t\t\tv-model=\"bodyVal\"\n\t\t\t\t:recipients=\"allRecipients\"\n\t\t\t\t:quoted-text=\"body\"\n\t\t\t\t:is-reply-or-forward=\"isReply || isForward\" />\n\t\t</div>\n\t\t<div class=\"composer-actions\">\n\t\t\t<ComposerAttachments v-model=\"attachments\"\n\t\t\t\t:bus=\"bus\"\n\t\t\t\t:upload-size-limit=\"attachmentSizeLimit\"\n\t\t\t\t@upload=\"onAttachmentsUploading\" />\n\t\t\t<div class=\"composer-actions-right\">\n\t\t\t\t<p class=\"composer-actions-draft\">\n\t\t\t\t\t<span v-if=\"!canSaveDraft\" id=\"draft-status\">{{ t('mail', 'Cannot save draft because this account does not have a drafts mailbox configured.') }}</span>\n\t\t\t\t\t<span v-else-if=\"savingDraft === true\" id=\"draft-status\">{{ t('mail', 'Saving draft …') }}</span>\n\t\t\t\t\t<span v-else-if=\"savingDraft === false\" id=\"draft-status\">{{ t('mail', 'Draft saved') }}</span>\n\t\t\t\t</p>\n\t\t\t\t<Actions>\n\t\t\t\t\t<ActionButton icon=\"icon-upload\" @click=\"onAddLocalAttachment\">\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tt('mail', 'Upload attachment')\n\t\t\t\t\t\t}}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton icon=\"icon-folder\" @click=\"onAddCloudAttachment\">\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tt('mail', 'Add attachment from Files')\n\t\t\t\t\t\t}}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton :disabled=\"encrypt\" icon=\"icon-public\" @click=\"onAddCloudAttachmentLink\">\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\taddShareLink\n\t\t\t\t\t\t}}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionCheckbox\n\t\t\t\t\t\t:checked=\"!encrypt && !editorPlainText\"\n\t\t\t\t\t\t:disabled=\"encrypt\"\n\t\t\t\t\t\t@check=\"editorMode = 'html'\"\n\t\t\t\t\t\t@uncheck=\"editorMode = 'plaintext'\">\n\t\t\t\t\t\t{{ t('mail', 'Enable formatting') }}\n\t\t\t\t\t</ActionCheckbox>\n\t\t\t\t\t<ActionCheckbox\n\t\t\t\t\t\t:checked=\"requestMdn\"\n\t\t\t\t\t\t@check=\"requestMdn = true\"\n\t\t\t\t\t\t@uncheck=\"requestMdn = false\">\n\t\t\t\t\t\t{{ t('mail', 'Request a read receipt') }}\n\t\t\t\t\t</ActionCheckbox>\n\t\t\t\t\t<ActionCheckbox\n\t\t\t\t\t\tv-if=\"mailvelope.available\"\n\t\t\t\t\t\t:checked=\"encrypt\"\n\t\t\t\t\t\t@check=\"encrypt = true\"\n\t\t\t\t\t\t@uncheck=\"encrypt = false\">\n\t\t\t\t\t\t{{ t('mail', 'Encrypt message with Mailvelope') }}\n\t\t\t\t\t</ActionCheckbox>\n\t\t\t\t\t<ActionLink v-else\n\t\t\t\t\t\thref=\"https://www.mailvelope.com/\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\ticon=\"icon-password\">\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tt('mail', 'Looking for a way to encrypt your emails? Install the Mailvelope browser extension!')\n\t\t\t\t\t\t}}\n\t\t\t\t\t</ActionLink>\n\t\t\t\t</Actions>\n\t\t\t\t<div>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclass=\"submit-message send primary icon-confirm-white\"\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t:value=\"submitButtonTitle\"\n\t\t\t\t\t\t:disabled=\"!canSend\"\n\t\t\t\t\t\t@click=\"onSend\">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<Loading v-else-if=\"state === STATES.UPLOADING\" :hint=\"t('mail', 'Uploading attachments …')\" role=\"alert\" />\n\t<Loading v-else-if=\"state === STATES.SENDING\" :hint=\"t('mail', 'Sending …')\" role=\"alert\" />\n\t<div v-else-if=\"state === STATES.ERROR\" class=\"emptycontent\" role=\"alert\">\n\t\t<h2>{{ t('mail', 'Error sending your message') }}</h2>\n\t\t<p v-if=\"errorText\">\n\t\t\t{{ errorText }}\n\t\t</p>\n\t\t<button class=\"button\" @click=\"state = STATES.EDITING\">\n\t\t\t{{ t('mail', 'Go back') }}\n\t\t</button>\n\t\t<button class=\"button primary\" @click=\"onSend\">\n\t\t\t{{ t('mail', 'Retry') }}\n\t\t</button>\n\t</div>\n\t<div v-else-if=\"state === STATES.WARNING\" class=\"emptycontent\" role=\"alert\">\n\t\t<h2>{{ t('mail', 'Warning sending your message') }}</h2>\n\t\t<p v-if=\"errorText\">\n\t\t\t{{ errorText }}\n\t\t</p>\n\t\t<button class=\"button primary\" @click=\"state = STATES.EDITING\">\n\t\t\t{{ t('mail', 'Go back') }}\n\t\t</button>\n\t\t<button class=\"button\" @click=\"onForceSend\">\n\t\t\t{{ t('mail', 'Send anyway') }}\n\t\t</button>\n\t</div>\n\t<div v-else class=\"emptycontent\">\n\t\t<h2>{{ t('mail', 'Message sent!') }}</h2>\n\t\t<button v-if=\"!isReply\" class=\"button primary\" @click=\"reset\">\n\t\t\t{{ t('mail', 'Write another message') }}\n\t\t</button>\n\t</div>\n</template>\n\n<script>\nimport debounce from 'lodash/fp/debounce'\nimport uniqBy from 'lodash/fp/uniqBy'\nimport isArray from 'lodash/fp/isArray'\nimport trimStart from 'lodash/fp/trimCharsStart'\nimport Autosize from 'vue-autosize'\nimport debouncePromise from 'debounce-promise'\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport ActionCheckbox from '@nextcloud/vue/dist/Components/ActionCheckbox'\nimport ActionLink from '@nextcloud/vue/dist/Components/ActionLink'\nimport Multiselect from '@nextcloud/vue/dist/Components/Multiselect'\nimport { showError } from '@nextcloud/dialogs'\nimport { translate as t } from '@nextcloud/l10n'\nimport Vue from 'vue'\n\nimport ComposerAttachments from './ComposerAttachments'\nimport { findRecipient } from '../service/AutocompleteService'\nimport { detect, html, plain, toHtml, toPlain } from '../util/text'\nimport Loading from './Loading'\nimport logger from '../logger'\nimport TextEditor from './TextEditor'\nimport { buildReplyBody } from '../ReplyBuilder'\nimport MailvelopeEditor from './MailvelopeEditor'\nimport { getMailvelope } from '../crypto/mailvelope'\nimport { isPgpgMessage } from '../crypto/pgp'\nimport { matchError } from '../errors/match'\nimport NoSentMailboxConfiguredError\n\tfrom '../errors/NoSentMailboxConfiguredError'\nimport NoDraftsMailboxConfiguredError\n\tfrom '../errors/NoDraftsMailboxConfiguredError'\nimport ManyRecipientsError\n\tfrom '../errors/ManyRecipientsError'\n\nconst debouncedSearch = debouncePromise(findRecipient, 500)\n\nconst NO_ALIAS_SET = -1\n\nVue.use(Autosize)\n\nconst STATES = Object.seal({\n\tEDITING: 0,\n\tUPLOADING: 1,\n\tSENDING: 2,\n\tERROR: 3,\n\tWARNING: 4,\n\tFINISHED: 5,\n})\n\nexport default {\n\tname: 'Composer',\n\tcomponents: {\n\t\tMailvelopeEditor,\n\t\tActions,\n\t\tActionButton,\n\t\tActionCheckbox,\n\t\tActionLink,\n\t\tComposerAttachments,\n\t\tLoading,\n\t\tMultiselect,\n\t\tTextEditor,\n\t},\n\tprops: {\n\t\tfromAccount: {\n\t\t\ttype: Number,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t\tto: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tcc: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tbcc: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tsubject: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tbody: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => html(''),\n\t\t},\n\t\tdraft: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t\tsend: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t\treplyTo: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t\tforwardFrom: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t},\n\tdata() {\n\t\tlet bodyVal = toHtml(this.body).value\n\t\tif (bodyVal.length === 0) {\n\t\t\t// an empty body (e.g \"\") does not trigger an onInput event.\n\t\t\t// but to append the signature a onInput event is required.\n\t\t\tbodyVal = '<p></p><p></p>'\n\t\t}\n\t\treturn {\n\t\t\tshowCC: this.cc.length > 0,\n\t\t\tselectedAlias: NO_ALIAS_SET, // Fixed in `beforeMount`\n\t\t\tautocompleteRecipients: this.to.concat(this.cc).concat(this.bcc),\n\t\t\tnewRecipients: [],\n\t\t\tsubjectVal: this.subject,\n\t\t\tbodyVal,\n\t\t\tattachments: [],\n\t\t\tnoReply: this.to.some((to) => to.email.startsWith('noreply@') || to.email.startsWith('no-reply@')),\n\t\t\tdraftsPromise: Promise.resolve(),\n\t\t\tattachmentsPromise: Promise.resolve(),\n\t\t\tcanSaveDraft: true,\n\t\t\tsavingDraft: undefined,\n\t\t\tsaveDraftDebounced: debounce(10 * 1000, this.saveDraft),\n\t\t\tstate: STATES.EDITING,\n\t\t\terrorText: undefined,\n\t\t\tSTATES,\n\t\t\tselectTo: this.to,\n\t\t\tselectCc: this.cc,\n\t\t\tselectBcc: this.bcc,\n\t\t\tbus: new Vue(),\n\t\t\tencrypt: false,\n\t\t\tmailvelope: {\n\t\t\t\tavailable: false,\n\t\t\t\tkeyRing: undefined,\n\t\t\t\tkeysMissing: [],\n\t\t\t},\n\t\t\teditorMode: 'html',\n\t\t\taddShareLink: t('mail', 'Add share link from {productName} Files', { productName: OC?.theme?.name ?? 'Nextcloud' }),\n\t\t\trequestMdn: false,\n\t\t\tappendSignature: true,\n\t\t}\n\t},\n\tcomputed: {\n\t\taliases() {\n\t\t\tlet cnt = 0\n\t\t\tconst accounts = this.$store.getters.accounts.filter((a) => !a.isUnified)\n\t\t\tconst aliases = accounts.flatMap((account) => [\n\t\t\t\t{\n\t\t\t\t\tid: account.id,\n\t\t\t\t\taliasId: null,\n\t\t\t\t\tselectId: cnt++,\n\t\t\t\t\teditorMode: account.editorMode,\n\t\t\t\t\tsignature: account.signature,\n\t\t\t\t\tname: account.name,\n\t\t\t\t\temailAddress: account.emailAddress,\n\t\t\t\t\tsignatureAboveQuote: account.signatureAboveQuote,\n\t\t\t\t},\n\t\t\t\taccount.aliases.map((alias) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: account.id,\n\t\t\t\t\t\taliasId: alias.id,\n\t\t\t\t\t\tselectId: cnt++,\n\t\t\t\t\t\teditorMode: account.editorMode,\n\t\t\t\t\t\tsignature: alias.signature,\n\t\t\t\t\t\tname: alias.name,\n\t\t\t\t\t\temailAddress: alias.alias,\n\t\t\t\t\t\tsignatureAboveQuote: account.signatureAboveQuote,\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t])\n\t\t\treturn aliases.flat()\n\t\t},\n\t\tallRecipients() {\n\t\t\treturn this.selectTo.concat(this.selectCc).concat(this.selectBcc)\n\t\t},\n\t\tattachmentSizeLimit() {\n\t\t\treturn this.$store.getters.getPreference('attachment-size-limit')\n\t\t},\n\t\tselectableRecipients() {\n\t\t\treturn this.newRecipients\n\t\t\t\t.concat(this.autocompleteRecipients)\n\t\t\t\t.map((recipient) => ({ ...recipient, label: recipient.label || recipient.email }))\n\t\t},\n\t\tisForward() {\n\t\t\treturn this.forwardFrom !== undefined\n\t\t},\n\t\tisReply() {\n\t\t\treturn this.replyTo !== undefined\n\t\t},\n\t\tcanSend() {\n\t\t\tif (this.encrypt && this.mailvelope.keysMissing.length) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\treturn this.selectTo.length > 0 || this.selectCc.length > 0 || this.selectBcc.length > 0\n\t\t},\n\t\teditorPlainText() {\n\t\t\treturn this.editorMode === 'plaintext'\n\t\t},\n\t\tsubmitButtonTitle() {\n\t\t\tif (!this.mailvelope.available) {\n\t\t\t\treturn t('mail', 'Send')\n\t\t\t}\n\n\t\t\treturn this.encrypt ? t('mail', 'Encrypt and send') : t('mail', 'Send unencrypted')\n\t\t},\n\t},\n\twatch: {\n\t\t'$route.params.threadId'() {\n\t\t\tthis.reset()\n\t\t},\n\t\tallRecipients() {\n\t\t\tthis.checkRecipientsKeys()\n\t\t},\n\t\taliases(newAliases) {\n\t\t\tconsole.debug('aliases changed')\n\t\t\tif (this.selectedAlias === NO_ALIAS_SET) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst newAlias = newAliases.find(alias => alias.id === this.selectedAlias.id && alias.aliasId === this.selectedAlias.aliasId)\n\t\t\tif (newAlias === undefined) {\n\t\t\t\t// selected alias does not exist anymore.\n\t\t\t\tthis.onAliasChange(newAliases[0])\n\t\t\t} else {\n\t\t\t\t// update the selected alias\n\t\t\t\tthis.onAliasChange(newAlias)\n\t\t\t}\n\t\t},\n\t},\n\tasync beforeMount() {\n\t\tthis.setAlias()\n\t\tthis.initBody()\n\n\t\tawait this.onMailvelopeLoaded(await getMailvelope())\n\t},\n\tmounted() {\n\t\tif (!this.isReply) {\n\t\t\tthis.$refs.toLabel.$el.focus()\n\t\t}\n\n\t\t// event is triggered when user clicks 'new message' in navigation\n\t\tthis.$root.$on('newMessage', () => {\n\t\t\tthis.draftsPromise\n\t\t\t\t.then(() => {\n\t\t\t\t\treturn this.saveDraft(this.getMessageData)\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\t// wait for the draft to be saved before resetting the message content\n\t\t\t\t\tthis.reset()\n\t\t\t\t})\n\t\t})\n\n\t\t// Add attachments in case of forward\n\t\tif (this.forwardFrom?.attachments !== undefined) {\n\t\t\tthis.forwardFrom.attachments.forEach(att => {\n\t\t\t\tthis.attachments.push({\n\t\t\t\t\tfileName: att.fileName,\n\t\t\t\t\tdisplayName: trimStart('/', att.fileName),\n\t\t\t\t\tid: att.id,\n\t\t\t\t\tmessageId: this.forwardFrom.databaseId,\n\t\t\t\t\ttype: 'message-attachment',\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\n\t\t// Add messages forwarded as attachments\n\t\tlet forwards = []\n\t\tif (this.$route.query.forwardedMessages && !isArray(this.$route.query.forwardedMessages)) {\n\t\t\tforwards = [this.$route.query.forwardedMessages]\n\t\t} else if (this.$route.query.forwardedMessages && isArray(this.$route.query.forwardedMessages)) {\n\t\t\tforwards = this.$route.query.forwardedMessages\n\t\t}\n\t\tforwards.forEach(id => {\n\t\t\tconst env = this.$store.getters.getEnvelope(id)\n\t\t\tif (!env) {\n\t\t\t\t// TODO: also happens when the composer page is reloaded\n\t\t\t\tshowError(t('mail', 'Message {id} could not be found', {\n\t\t\t\t\tid,\n\t\t\t\t}))\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.attachments.push({\n\t\t\t\tdisplayName: env.subject + '.eml',\n\t\t\t\tid,\n\t\t\t\ttype: 'message',\n\t\t\t})\n\t\t})\n\t},\n\tbeforeDestroy() {\n\t\tthis.$root.$off('newMessage')\n\n\t\twindow.removeEventListener('mailvelope', this.onMailvelopeLoaded)\n\t},\n\tmethods: {\n\t\tsetAlias() {\n\t\t\tconst previous = this.selectedAlias\n\t\t\tif (this.fromAccount) {\n\t\t\t\tthis.selectedAlias = this.aliases.find((alias) => alias.id === this.fromAccount)\n\t\t\t} else {\n\t\t\t\tthis.selectedAlias = this.aliases[0]\n\t\t\t}\n\t\t\tif (previous === NO_ALIAS_SET) {\n\t\t\t\tthis.editorMode = this.selectedAlias.editorMode\n\t\t\t}\n\t\t},\n\t\tasync checkRecipientsKeys() {\n\t\t\tif (!this.encrypt || !this.mailvelope.available) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst recipients = this.allRecipients.map((r) => r.email)\n\t\t\tconst keysValid = await this.mailvelope.keyRing.validKeyForAddress(recipients)\n\t\t\tlogger.debug('recipients keys validated', { recipients, keysValid })\n\t\t\tthis.mailvelope.keysMissing = recipients.filter((r) => keysValid[r] === false)\n\t\t},\n\t\tinitBody() {\n\t\t\t/** @var {Text} body **/\n\t\t\tlet body\n\t\t\tif (this.replyTo) {\n\t\t\t\tbody = buildReplyBody(\n\t\t\t\t\tthis.editorPlainText ? toPlain(this.body) : toHtml(this.body),\n\t\t\t\t\tthis.replyTo.from[0],\n\t\t\t\t\tthis.replyTo.dateInt,\n\t\t\t\t\tthis.$store.getters.getPreference('reply-mode', 'top') === 'top'\n\t\t\t\t).value\n\t\t\t} else if (this.forwardFrom) {\n\t\t\t\tbody = buildReplyBody(\n\t\t\t\t\tthis.editorPlainText ? toPlain(this.body) : toHtml(this.body),\n\t\t\t\t\tthis.forwardFrom.from[0],\n\t\t\t\t\tthis.forwardFrom.dateInt,\n\t\t\t\t\tthis.$store.getters.getPreference('reply-mode', 'top') === 'top'\n\t\t\t\t).value\n\t\t\t} else {\n\t\t\t\tbody = this.bodyVal\n\t\t\t}\n\t\t\tthis.bodyVal = html(body).value\n\t\t},\n\t\trecipientToRfc822(recipient) {\n\t\t\tif (recipient.email === recipient.label) {\n\t\t\t\t// From mailto or sender without proper label\n\t\t\t\treturn recipient.email\n\t\t\t} else if (recipient.label === '') {\n\t\t\t\t// Invalid label\n\t\t\t\treturn recipient.email\n\t\t\t} else if (recipient.email.search(/^[a-zA-Z]+:/) === 0) {\n\t\t\t\t// Group integration\n\t\t\t\treturn recipient.email\n\t\t\t} else {\n\t\t\t\t// Proper layout with label\n\t\t\t\treturn `\"${recipient.label}\" <${recipient.email}>`\n\t\t\t}\n\t\t},\n\t\tgetMessageData(id) {\n\t\t\treturn {\n\t\t\t\taccount: this.selectedAlias.id,\n\t\t\t\taliasId: this.selectedAlias.aliasId,\n\t\t\t\tto: this.selectTo.map(this.recipientToRfc822).join(', '),\n\t\t\t\tcc: this.selectCc.map(this.recipientToRfc822).join(', '),\n\t\t\t\tbcc: this.selectBcc.map(this.recipientToRfc822).join(', '),\n\t\t\t\tdraftId: id,\n\t\t\t\tsubject: this.subjectVal,\n\t\t\t\tbody: this.encrypt ? plain(this.bodyVal) : html(this.bodyVal),\n\t\t\t\tattachments: this.attachments,\n\t\t\t\tmessageId: this.replyTo ? this.replyTo.databaseId : undefined,\n\t\t\t\tisHtml: !this.editorPlainText,\n\t\t\t\trequestMdn: this.requestMdn,\n\t\t\t}\n\t\t},\n\t\tsaveDraft(data) {\n\t\t\tthis.savingDraft = true\n\t\t\tthis.draftsPromise = this.draftsPromise\n\t\t\t\t.then((id) => {\n\t\t\t\t\tconst draftData = data(id)\n\t\t\t\t\tif (\n\t\t\t\t\t\t!id\n\t\t\t\t\t\t&& !draftData.subject\n\t\t\t\t\t\t&& !draftData.body\n\t\t\t\t\t\t&& !draftData.cc\n\t\t\t\t\t\t&& !draftData.bcc\n\t\t\t\t\t\t&& !draftData.to\n\t\t\t\t\t) {\n\t\t\t\t\t\t// this might happen after a call to reset()\n\t\t\t\t\t\t// where the text input gets reset as well\n\t\t\t\t\t\t// and fires an input event\n\t\t\t\t\t\tlogger.debug('Nothing substantial to save, ignoring draft save')\n\t\t\t\t\t\tthis.savingDraft = false\n\t\t\t\t\t\treturn id\n\t\t\t\t\t}\n\t\t\t\t\treturn this.draft(draftData)\n\t\t\t\t})\n\t\t\t\t.then((uid) => {\n\t\t\t\t\t// It works (again)\n\t\t\t\t\tthis.canSaveDraft = true\n\n\t\t\t\t\treturn uid\n\t\t\t\t})\n\t\t\t\t.catch(async(error) => {\n\t\t\t\t\tconsole.error('could not save draft', error)\n\t\t\t\t\tconst canSave = await matchError(error, {\n\t\t\t\t\t\t[NoDraftsMailboxConfiguredError.getName()]() {\n\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault() {\n\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t\tif (!canSave) {\n\t\t\t\t\t\tthis.canSaveDraft = false\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then((uid) => {\n\t\t\t\t\tthis.savingDraft = false\n\t\t\t\t\treturn uid\n\t\t\t\t})\n\t\t\treturn this.draftsPromise\n\t\t},\n\t\tonInputChanged() {\n\t\t\tthis.saveDraftDebounced(this.getMessageData)\n\t\t\tif (this.appendSignature) {\n\t\t\t\tconst signatureValue = toHtml(detect(this.selectedAlias.signature)).value\n\t\t\t\tthis.bus.$emit('insertSignature', signatureValue, this.selectedAlias.signatureAboveQuote)\n\t\t\t\tthis.appendSignature = false\n\t\t\t}\n\t\t},\n\t\tonAliasChange(alias) {\n\t\t\tlogger.debug('changed alias', { alias })\n\t\t\tthis.selectedAlias = alias\n\t\t\tthis.appendSignature = true\n\t\t\tthis.onInputChanged()\n\t\t},\n\t\tonAddLocalAttachment() {\n\t\t\tthis.bus.$emit('onAddLocalAttachment')\n\t\t},\n\t\tonAddCloudAttachment() {\n\t\t\tthis.bus.$emit('onAddCloudAttachment')\n\t\t},\n\t\tonAddCloudAttachmentLink() {\n\t\t\tthis.bus.$emit('onAddCloudAttachmentLink')\n\t\t},\n\t\tonAutocomplete(term) {\n\t\t\tif (term === undefined || term === '') {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tdebouncedSearch(term).then((results) => {\n\t\t\t\tthis.autocompleteRecipients = uniqBy('email')(this.autocompleteRecipients.concat(results))\n\t\t\t})\n\t\t},\n\t\tonAttachmentsUploading(uploaded) {\n\t\t\tthis.attachmentsPromise = this.attachmentsPromise\n\t\t\t\t.then(() => uploaded)\n\t\t\t\t.catch((error) => logger.error('could not upload attachments', { error }))\n\t\t\t\t.then(() => logger.debug('attachments uploaded'))\n\t\t},\n\t\tasync onMailvelopeLoaded(mailvelope) {\n\t\t\tthis.encrypt = isPgpgMessage(this.body)\n\t\t\tthis.mailvelope.available = true\n\t\t\tlogger.info('Mailvelope loaded', {\n\t\t\t\tencrypt: this.encrypt,\n\t\t\t\tisPgpgMessage: isPgpgMessage(this.body),\n\t\t\t\tkeyRing: this.mailvelope.keyRing,\n\t\t\t})\n\t\t\tthis.mailvelope.keyRing = await mailvelope.getKeyring()\n\t\t\tawait this.checkRecipientsKeys()\n\t\t},\n\t\tonNewToAddr(addr) {\n\t\t\tthis.onNewAddr(addr, this.selectTo)\n\t\t},\n\t\tonNewCcAddr(addr) {\n\t\t\tthis.onNewAddr(addr, this.selectCc)\n\t\t},\n\t\tonNewBccAddr(addr) {\n\t\t\tthis.onNewAddr(addr, this.selectBcc)\n\t\t},\n\t\tonNewAddr(addr, list) {\n\t\t\tconst res = {\n\t\t\t\tlabel: addr, // TODO: parse if possible\n\t\t\t\temail: addr, // TODO: parse if possible\n\t\t\t}\n\t\t\tthis.newRecipients.push(res)\n\t\t\tlist.push(res)\n\t\t},\n\t\tasync onSend(_, force = false) {\n\t\t\tif (this.encrypt) {\n\t\t\t\tlogger.debug('get encrypted message from mailvelope')\n\t\t\t\tawait this.$refs.mailvelopeEditor.pull()\n\t\t\t}\n\n\t\t\tthis.state = STATES.UPLOADING\n\n\t\t\tawait this.attachmentsPromise\n\t\t\t\t.then(() => (this.state = STATES.SENDING))\n\t\t\t\t.then(() => this.draftsPromise)\n\t\t\t\t.then(this.getMessageData)\n\t\t\t\t.then((data) => this.send({ ...data, force }))\n\t\t\t\t.then(() => logger.info('message sent'))\n\t\t\t\t.then(() => (this.state = STATES.FINISHED))\n\t\t\t\t.catch(async(error) => {\n\t\t\t\t\tlogger.error('could not send message', { error });\n\t\t\t\t\t[this.errorText, this.state] = await matchError(error, {\n\t\t\t\t\t\t[NoSentMailboxConfiguredError.getName()]() {\n\t\t\t\t\t\t\treturn [t('mail', 'No sent mailbox configured. Please pick one in the account settings.'), STATES.ERROR]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t[ManyRecipientsError.getName()]() {\n\t\t\t\t\t\t\treturn [t('mail', 'You are trying to send to many recipients in To and/or Cc. Consider using Bcc to hide recipient addresses.'), STATES.WARNING]\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault(error) {\n\t\t\t\t\t\t\tif (error && error.toString) {\n\t\t\t\t\t\t\t\treturn [error.toString(), STATES.ERROR]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t})\n\n\t\t\t// Sync sent mailbox when it's currently open\n\t\t\tconst account = this.$store.getters.getAccount(this.selectedAlias.id)\n\t\t\tif (parseInt(this.$route.params.mailboxId, 10) === account.sentMailboxId) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.$store.dispatch('syncEnvelopes', {\n\t\t\t\t\t\tmailboxId: account.sentMailboxId,\n\t\t\t\t\t\tquery: '',\n\t\t\t\t\t\tinit: false,\n\t\t\t\t\t})\n\t\t\t\t}, 500)\n\t\t\t}\n\t\t},\n\t\tasync onForceSend() {\n\t\t\tawait this.onSend(null, true)\n\t\t},\n\t\treset() {\n\t\t\tthis.draftsPromise = Promise.resolve() // \"resets\" draft uid as well\n\t\t\tthis.selectTo = []\n\t\t\tthis.selectCc = []\n\t\t\tthis.selectBcc = []\n\t\t\tthis.subjectVal = ''\n\t\t\tthis.bodyVal = '<p></p><p></p>'\n\t\t\tthis.attachments = []\n\t\t\tthis.errorText = undefined\n\t\t\tthis.state = STATES.EDITING\n\t\t\tthis.autocompleteRecipients = []\n\t\t\tthis.newRecipients = []\n\t\t\tthis.requestMdn = false\n\t\t\tthis.appendSignature = true\n\n\t\t\tthis.setAlias()\n\t\t\tthis.initBody()\n\t\t\tVue.nextTick(() => {\n\t\t\t\t// toLabel may not be on the DOM yet\n\t\t\t\t// (because \"Message sent\" is shown)\n\t\t\t\t// so we defer the focus call\n\t\t\t\tthis.$refs.toLabel.$el.focus()\n\t\t\t})\n\t\t},\n\t\t/**\n\t\t * Format aliases for the Multiselect\n\t\t * @param {Object} alias the alias to format\n\t\t * @returns {string}\n\t\t */\n\t\tformatAliases(alias) {\n\t\t\tif (!alias.name) {\n\t\t\t\treturn alias.emailAddress\n\t\t\t}\n\n\t\t\treturn `${alias.name} <${alias.emailAddress}>`\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.message-composer {\n\tmargin: 0;\n\tz-index: 100;\n}\n\n.composer-actions {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: flex-end;\n\tjustify-content: space-between;\n\tposition: sticky;\n\tbottom: 0;\n\tpadding: 12px;\n\tbackground: linear-gradient(rgba(255, 255, 255, 0), var(--color-main-background-translucent) 50%);\n}\n\n.composer-actions-right {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.composer-fields {\n\tdisplay: flex;\n\talign-items: center;\n\tborder-top: 1px solid var(--color-border);\n\n\t&.mail-account {\n\t\tborder-top: none;\n\n\t\t& > .multiselect {\n\t\t\tmax-width: none;\n\t\t\tmin-height: auto;\n\t\t}\n\t}\n\n\t.multiselect,\n\tinput,\n\tTextEditor {\n\t\tflex-grow: 1;\n\t\tmax-width: none;\n\t\tborder: none;\n\t\tborder-radius: 0;\n\t}\n\n\t.multiselect {\n\t\tmargin-right: 12px;\n\t}\n}\n\n.subject {\n\tfont-size: 20px;\n\tfont-weight: bold;\n\tmargin: 0;\n\tpadding: 24px 12px;\n}\n\n.warning-box {\n\tpadding: 5px 12px;\n\tborder-radius: 0;\n}\n\n.message-body {\n\tmin-height: 300px;\n\twidth: 100%;\n\tmargin: 0;\n\tpadding: 12px;\n\tborder: none !important;\n\toutline: none !important;\n\tbox-shadow: none !important;\n}\n\n#draft-status {\n\tpadding: 5px;\n\topacity: 0.5;\n\tfont-size: small;\n}\n\n.from-label,\n.to-label,\n.copy-toggle,\n.cc-label,\n.bcc-label {\n\tpadding: 12px;\n\tcursor: text;\n\tcolor: var(--color-text-maxcontrast);\n\twidth: 100px;\n\ttext-align: right;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n\n.bcc-label {\n\ttop: initial;\n\tbottom: 0;\n}\n\n.copy-toggle {\n\tcursor: pointer;\n\twidth: initial;\n\n\t&:hover,\n\t&:focus {\n\t\tcolor: var(--color-main-text);\n\t}\n}\n\n.reply {\n\tmin-height: 100px;\n}\n\n.send {\n\tpadding: 12px 18px 13px 36px;\n\tbackground-position: 12px center;\n\tmargin-left: 4px;\n}\n::v-deep .multiselect .multiselect__tags {\n\tborder: none !important;\n}\n.submit-message.send.primary.icon-confirm-white {\n\tcolor: var(--color-main-background);\n}\n</style>\n","/*\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\n\nexport const findRecipient = (term) => {\n\tconst url = generateUrl('/apps/mail/api/autoComplete?term={term}', {\n\t\tterm,\n\t})\n\n\treturn Axios.get(url).then((resp) => resp.data)\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=style&index=0&id=ee7216e4&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./Composer.vue?vue&type=template&id=ee7216e4&scoped=true&\"\nimport script from \"./Composer.vue?vue&type=script&lang=js&\"\nexport * from \"./Composer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Composer.vue?vue&type=style&index=0&id=ee7216e4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ee7216e4\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.state === _vm.STATES.EDITING)?_c('div',{staticClass:\"message-composer\"},[_c('div',{staticClass:\"composer-fields mail-account\"},[_c('label',{staticClass:\"from-label\",attrs:{\"for\":\"from\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'From'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('Multiselect',{attrs:{\"id\":\"from\",\"value\":_vm.selectedAlias,\"options\":_vm.aliases,\"label\":\"name\",\"track-by\":\"selectId\",\"searchable\":false,\"custom-label\":_vm.formatAliases,\"placeholder\":_vm.t('mail', 'Select account'),\"clear-on-select\":false},on:{\"select\":_vm.onAliasChange}})],1),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields\"},[_c('label',{staticClass:\"to-label\",attrs:{\"for\":\"to\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'To'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('Multiselect',{ref:\"toLabel\",attrs:{\"id\":\"to\",\"options\":_vm.selectableRecipients,\"taggable\":true,\"label\":\"label\",\"track-by\":\"email\",\"limit\":4,\"multiple\":true,\"placeholder\":_vm.t('mail', 'Contact or email address …'),\"clear-on-select\":false,\"close-on-select\":false,\"show-no-options\":false,\"preserve-search\":true,\"hide-selected\":true},on:{\"keyup\":_vm.onInputChanged,\"tag\":_vm.onNewToAddr,\"search-change\":_vm.onAutocomplete},model:{value:(_vm.selectTo),callback:function ($$v) {_vm.selectTo=$$v},expression:\"selectTo\"}}),_vm._v(\" \"),(!_vm.showCC)?_c('a',{staticClass:\"copy-toggle\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.showCC = true}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', '+ Cc/Bcc'))+\"\\n\\t\\t\")]):_vm._e()],1),_vm._v(\" \"),(_vm.showCC)?_c('div',{staticClass:\"composer-fields\"},[_c('label',{staticClass:\"cc-label\",attrs:{\"for\":\"cc\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Cc'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('Multiselect',{attrs:{\"id\":\"cc\",\"options\":_vm.selectableRecipients,\"taggable\":true,\"label\":\"label\",\"track-by\":\"email\",\"multiple\":true,\"placeholder\":_vm.t('mail', ''),\"clear-on-select\":false,\"show-no-options\":false,\"preserve-search\":true},on:{\"keyup\":_vm.onInputChanged,\"tag\":_vm.onNewCcAddr,\"search-change\":_vm.onAutocomplete},model:{value:(_vm.selectCc),callback:function ($$v) {_vm.selectCc=$$v},expression:\"selectCc\"}},[_c('span',{attrs:{\"slot\":\"noOptions\"},slot:\"noOptions\"},[_vm._v(_vm._s(_vm.t('mail', 'No contacts found.')))])])],1):_vm._e(),_vm._v(\" \"),(_vm.showCC)?_c('div',{staticClass:\"composer-fields\"},[_c('label',{staticClass:\"bcc-label\",attrs:{\"for\":\"bcc\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Bcc'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('Multiselect',{attrs:{\"id\":\"bcc\",\"options\":_vm.selectableRecipients,\"taggable\":true,\"label\":\"label\",\"track-by\":\"email\",\"multiple\":true,\"placeholder\":_vm.t('mail', ''),\"show-no-options\":false,\"preserve-search\":true},on:{\"keyup\":_vm.onInputChanged,\"tag\":_vm.onNewBccAddr,\"search-change\":_vm.onAutocomplete},model:{value:(_vm.selectBcc),callback:function ($$v) {_vm.selectBcc=$$v},expression:\"selectBcc\"}},[_c('span',{attrs:{\"slot\":\"noOptions\"},slot:\"noOptions\"},[_vm._v(_vm._s(_vm.t('mail', 'No contacts found.')))])])],1):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields\"},[_c('label',{staticClass:\"subject-label hidden-visually\",attrs:{\"for\":\"subject\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Subject'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.subjectVal),expression:\"subjectVal\"}],staticClass:\"subject\",attrs:{\"id\":\"subject\",\"type\":\"text\",\"name\":\"subject\",\"autocomplete\":\"off\",\"placeholder\":_vm.t('mail', 'Subject …')},domProps:{\"value\":(_vm.subjectVal)},on:{\"keyup\":_vm.onInputChanged,\"input\":function($event){if($event.target.composing){ return; }_vm.subjectVal=$event.target.value}}})]),_vm._v(\" \"),(_vm.noReply)?_c('div',{staticClass:\"warning noreply-warning\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'This message came from a noreply address so your reply will probably not be read.'))+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.mailvelope.keysMissing.length)?_c('div',{staticClass:\"warning noreply-warning\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'The following recipients do not have a PGP key: {recipients}.', {\n\t\t\t\trecipients: _vm.mailvelope.keysMissing.join(', '),\n\t\t\t}))+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields\"},[(!_vm.encrypt && _vm.editorPlainText)?_c('TextEditor',{key:\"editor-plain\",staticClass:\"message-body\",attrs:{\"name\":\"body\",\"placeholder\":_vm.t('mail', 'Write message …'),\"focus\":_vm.isReply,\"bus\":_vm.bus},on:{\"input\":_vm.onInputChanged},model:{value:(_vm.bodyVal),callback:function ($$v) {_vm.bodyVal=$$v},expression:\"bodyVal\"}}):(!_vm.encrypt && !_vm.editorPlainText)?_c('TextEditor',{key:\"editor-rich\",staticClass:\"message-body\",attrs:{\"html\":true,\"name\":\"body\",\"placeholder\":_vm.t('mail', 'Write message …'),\"focus\":_vm.isReply,\"bus\":_vm.bus},on:{\"input\":_vm.onInputChanged},model:{value:(_vm.bodyVal),callback:function ($$v) {_vm.bodyVal=$$v},expression:\"bodyVal\"}}):_c('MailvelopeEditor',{ref:\"mailvelopeEditor\",attrs:{\"recipients\":_vm.allRecipients,\"quoted-text\":_vm.body,\"is-reply-or-forward\":_vm.isReply || _vm.isForward},model:{value:(_vm.bodyVal),callback:function ($$v) {_vm.bodyVal=$$v},expression:\"bodyVal\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"composer-actions\"},[_c('ComposerAttachments',{attrs:{\"bus\":_vm.bus,\"upload-size-limit\":_vm.attachmentSizeLimit},on:{\"upload\":_vm.onAttachmentsUploading},model:{value:(_vm.attachments),callback:function ($$v) {_vm.attachments=$$v},expression:\"attachments\"}}),_vm._v(\" \"),_c('div',{staticClass:\"composer-actions-right\"},[_c('p',{staticClass:\"composer-actions-draft\"},[(!_vm.canSaveDraft)?_c('span',{attrs:{\"id\":\"draft-status\"}},[_vm._v(_vm._s(_vm.t('mail', 'Cannot save draft because this account does not have a drafts mailbox configured.')))]):(_vm.savingDraft === true)?_c('span',{attrs:{\"id\":\"draft-status\"}},[_vm._v(_vm._s(_vm.t('mail', 'Saving draft …')))]):(_vm.savingDraft === false)?_c('span',{attrs:{\"id\":\"draft-status\"}},[_vm._v(_vm._s(_vm.t('mail', 'Draft saved')))]):_vm._e()]),_vm._v(\" \"),_c('Actions',[_c('ActionButton',{attrs:{\"icon\":\"icon-upload\"},on:{\"click\":_vm.onAddLocalAttachment}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Upload attachment'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-folder\"},on:{\"click\":_vm.onAddCloudAttachment}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Add attachment from Files'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"disabled\":_vm.encrypt,\"icon\":\"icon-public\"},on:{\"click\":_vm.onAddCloudAttachmentLink}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.addShareLink)+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionCheckbox',{attrs:{\"checked\":!_vm.encrypt && !_vm.editorPlainText,\"disabled\":_vm.encrypt},on:{\"check\":function($event){_vm.editorMode = 'html'},\"uncheck\":function($event){_vm.editorMode = 'plaintext'}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Enable formatting'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionCheckbox',{attrs:{\"checked\":_vm.requestMdn},on:{\"check\":function($event){_vm.requestMdn = true},\"uncheck\":function($event){_vm.requestMdn = false}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Request a read receipt'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),(_vm.mailvelope.available)?_c('ActionCheckbox',{attrs:{\"checked\":_vm.encrypt},on:{\"check\":function($event){_vm.encrypt = true},\"uncheck\":function($event){_vm.encrypt = false}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Encrypt message with Mailvelope'))+\"\\n\\t\\t\\t\\t\")]):_c('ActionLink',{attrs:{\"href\":\"https://www.mailvelope.com/\",\"target\":\"_blank\",\"icon\":\"icon-password\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Looking for a way to encrypt your emails? Install the Mailvelope browser extension!'))+\"\\n\\t\\t\\t\\t\")])],1),_vm._v(\" \"),_c('div',[_c('input',{staticClass:\"submit-message send primary icon-confirm-white\",attrs:{\"type\":\"submit\",\"disabled\":!_vm.canSend},domProps:{\"value\":_vm.submitButtonTitle},on:{\"click\":_vm.onSend}})])],1)],1)]):(_vm.state === _vm.STATES.UPLOADING)?_c('Loading',{attrs:{\"hint\":_vm.t('mail', 'Uploading attachments …'),\"role\":\"alert\"}}):(_vm.state === _vm.STATES.SENDING)?_c('Loading',{attrs:{\"hint\":_vm.t('mail', 'Sending …'),\"role\":\"alert\"}}):(_vm.state === _vm.STATES.ERROR)?_c('div',{staticClass:\"emptycontent\",attrs:{\"role\":\"alert\"}},[_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'Error sending your message')))]),_vm._v(\" \"),(_vm.errorText)?_c('p',[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.errorText)+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),_c('button',{staticClass:\"button\",on:{\"click\":function($event){_vm.state = _vm.STATES.EDITING}}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Go back'))+\"\\n\\t\")]),_vm._v(\" \"),_c('button',{staticClass:\"button primary\",on:{\"click\":_vm.onSend}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Retry'))+\"\\n\\t\")])]):(_vm.state === _vm.STATES.WARNING)?_c('div',{staticClass:\"emptycontent\",attrs:{\"role\":\"alert\"}},[_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'Warning sending your message')))]),_vm._v(\" \"),(_vm.errorText)?_c('p',[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.errorText)+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),_c('button',{staticClass:\"button primary\",on:{\"click\":function($event){_vm.state = _vm.STATES.EDITING}}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Go back'))+\"\\n\\t\")]),_vm._v(\" \"),_c('button',{staticClass:\"button\",on:{\"click\":_vm.onForceSend}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Send anyway'))+\"\\n\\t\")])]):_c('div',{staticClass:\"emptycontent\"},[_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'Message sent!')))]),_vm._v(\" \"),(!_vm.isReply)?_c('button',{staticClass:\"button primary\",on:{\"click\":_vm.reset}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Write another message'))+\"\\n\\t\")]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * Mail\n *\n * This code is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License, version 3,\n * as published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License, version 3,\n * along with this program.  If not, see <http://www.gnu.org/licenses/>\n *\n */\n\nimport { translate as t } from '@nextcloud/l10n'\n\nconst smileys = [':-(', ':-/', ':-\\\\', ':-|', \":'-(\", \":'-/\", \":'-\\\\\", \":'-|\"]\n\nconst getRandomSmiley = () => {\n\treturn smileys[Math.floor(Math.random() * smileys.length)]\n}\n\n/**\n * @param {Folder} folder a folder\n * @returns {string}\n */\nexport const getRandomFolderErrorMessage = (folder) => {\n\tconst folderName = folder.get('name')\n\tconst rawTexts = [\n\t\tt('mail', 'Could not load {tag}{name}{endtag}', {\n\t\t\tname: folderName,\n\t\t}),\n\t\tt('mail', 'Could not load {tag}{name}{endtag}', {\n\t\t\tname: folderName,\n\t\t}),\n\t\tt('mail', 'There was a problem loading {tag}{name}{endtag}', {\n\t\t\tname: folderName,\n\t\t}),\n\t]\n\tconst texts = rawTexts.map((text) => text.replace('{tag}', '<strong>').replace('{endtag}', '</strong>'))\n\tconst text = texts[Math.floor(Math.random() * texts.length)]\n\treturn text + ' ' + getRandomSmiley()\n}\n\n/**\n * @returns {string}\n */\nexport const getRandomMessageErrorMessage = () => {\n\tconst texts = [\n\t\tt('mail', 'Could not load your message'),\n\t\tt('mail', 'Could not load the desired message'),\n\t\tt('mail', 'Could not load the message'),\n\t]\n\tconst text = texts[Math.floor(Math.random() * texts.length)]\n\treturn text + ' ' + getRandomSmiley()\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewMessageDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewMessageDetail.vue?vue&type=script&lang=js&\"","<template>\n\t<AppContentDetails>\n\t\t<Loading v-if=\"loading\" />\n\t\t<Error\n\t\t\tv-else-if=\"error\"\n\t\t\t:error=\"error && error.message ? error.message : t('mail', 'Not found')\"\n\t\t\t:message=\"errorMessage\"\n\t\t\t:data=\"error\"\n\t\t\trole=\"alert\" />\n\t\t<Composer\n\t\t\tv-else\n\t\t\t:from-account=\"composerData.accountId\"\n\t\t\t:to=\"composerData.to\"\n\t\t\t:cc=\"composerData.cc\"\n\t\t\t:bcc=\"composerData.bcc\"\n\t\t\t:subject=\"composerData.subject\"\n\t\t\t:body=\"composerData.body\"\n\t\t\t:draft=\"saveDraft\"\n\t\t\t:send=\"sendMessage\"\n\t\t\t:reply-to=\"composerData.replyTo\"\n\t\t\t:forward-from=\"composerData.forwardFrom\" />\n\t</AppContentDetails>\n</template>\n\n<script>\nimport AppContentDetails from '@nextcloud/vue/dist/Components/AppContentDetails'\nimport Axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\nimport { showWarning } from '@nextcloud/dialogs'\nimport { translate as t } from '@nextcloud/l10n'\n\nimport { buildForwardSubject, buildReplySubject, buildRecipients as buildReplyRecipients } from '../ReplyBuilder'\nimport Composer from './Composer'\nimport Error from './Error'\nimport { getRandomMessageErrorMessage } from '../util/ErrorMessageFactory'\nimport { detect, html, plain, toPlain } from '../util/text'\nimport Loading from './Loading'\nimport logger from '../logger'\nimport { saveDraft, sendMessage } from '../service/MessageService'\n\nexport default {\n\tname: 'NewMessageDetail',\n\tcomponents: {\n\t\tAppContentDetails,\n\t\tComposer,\n\t\tError,\n\t\tLoading,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: false,\n\t\t\tdraft: undefined,\n\t\t\toriginal: undefined,\n\t\t\toriginalBody: undefined,\n\t\t\terrorMessage: '',\n\t\t\terror: undefined,\n\t\t\tnewDraftId: undefined,\n\t\t}\n\t},\n\tcomputed: {\n\t\tcomposerData() {\n\t\t\tif (this.draft !== undefined) {\n\t\t\t\tlogger.info('todo: handle draft data', { draft: this.draft })\n\t\t\t\treturn {\n\t\t\t\t\tto: this.draft.to,\n\t\t\t\t\tcc: this.draft.cc,\n\t\t\t\t\tbcc: this.draft.bcc,\n\t\t\t\t\tsubject: this.draft.subject,\n\t\t\t\t\tbody: this.draft.hasHtmlBody ? html(this.draft.body) : plain(this.draft.body),\n\t\t\t\t}\n\t\t\t} else if (this.$route.query.messageId !== undefined) {\n\t\t\t\t// Forward or reply to a message\n\t\t\t\tconst message = this.original\n\t\t\t\tlogger.debug('forwarding or replying to message', { message })\n\n\t\t\t\tif (this.$route.params.threadId === 'reply') {\n\t\t\t\t\tlogger.debug('simple reply', {\n\t\t\t\t\t\tmessage,\n\t\t\t\t\t})\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\taccountId: message.accountId,\n\t\t\t\t\t\tto: message.from,\n\t\t\t\t\t\tcc: [],\n\t\t\t\t\t\tsubject: buildReplySubject(message.subject),\n\t\t\t\t\t\tbody: this.originalBody,\n\t\t\t\t\t\toriginalBody: this.originalBody,\n\t\t\t\t\t\treplyTo: message,\n\t\t\t\t\t}\n\t\t\t\t} else if (this.$route.params.threadId === 'replyAll') {\n\t\t\t\t\tlogger.debug('replying to all', { original: this.original })\n\t\t\t\t\tconst account = this.$store.getters.getAccount(message.accountId)\n\t\t\t\t\tconst recipients = buildReplyRecipients(message, {\n\t\t\t\t\t\temail: account.emailAddress,\n\t\t\t\t\t\tlabel: account.name,\n\t\t\t\t\t})\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\taccountId: message.accountId,\n\t\t\t\t\t\tto: recipients.to,\n\t\t\t\t\t\tcc: recipients.cc,\n\t\t\t\t\t\tsubject: buildReplySubject(message.subject),\n\t\t\t\t\t\tbody: this.originalBody,\n\t\t\t\t\t\toriginalBody: this.originalBody,\n\t\t\t\t\t\treplyTo: message,\n\t\t\t\t\t}\n\t\t\t\t} else if (this.$route.params.threadId === 'asNew') {\n\t\t\t\t\tlogger.debug('composing as new', { original: this.original })\n\n\t\t\t\t\tif (this.original.attachments.length) {\n\t\t\t\t\t\tshowWarning(t('mail', 'Attachments were not copied. Please add them manually.'))\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\taccountId: message.accountId,\n\t\t\t\t\t\tto: message.to,\n\t\t\t\t\t\tcc: message.cc,\n\t\t\t\t\t\tsubject: message.subject,\n\t\t\t\t\t\tbody: this.originalBody,\n\t\t\t\t\t\toriginalBody: this.originalBody,\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// forward\n\t\t\t\t\treturn {\n\t\t\t\t\t\taccountId: message.accountId,\n\t\t\t\t\t\tto: [],\n\t\t\t\t\t\tcc: [],\n\t\t\t\t\t\tsubject: buildForwardSubject(message.subject),\n\t\t\t\t\t\tbody: this.originalBody,\n\t\t\t\t\t\toriginalBody: this.originalBody,\n\t\t\t\t\t\tforwardFrom: message,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// New or mailto: message\n\t\t\t\tlogger.debug('composing a new message or handling a mailto link', {\n\t\t\t\t\tthreadId: this.$route.params.threadId,\n\t\t\t\t})\n\n\t\t\t\tlet accountId\n\t\t\t\t// Only preselect an account when we're not in a unified mailbox\n\t\t\t\tif (this.$route.params.accountId !== 0 && this.$route.params.accountId !== '0') {\n\t\t\t\t\taccountId = parseInt(this.$route.params.accountId, 10)\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\taccountId,\n\t\t\t\t\tto: this.stringToRecipients(this.$route.query.to),\n\t\t\t\t\tcc: this.stringToRecipients(this.$route.query.cc),\n\t\t\t\t\tsubject: this.$route.query.subject || '',\n\t\t\t\t\tbody: this.$route.query.body ? detect(this.$route.query.body) : html(''),\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t},\n\twatch: {\n\t\t$route(to, from) {\n\t\t\t// `saveDraft` replaced the current URL with the updated draft UID\n\t\t\t// in that case we don't really start a new draft but just keep the\n\t\t\t// URL consistent, hence not loading anything\n\t\t\tif (to.name === 'message' && this.draft\n\t\t\t\t&& (\n\t\t\t\t\tto.params.draftId === parseInt(this.draft.databaseId, 10)\n\t\t\t\t\t|| to.params.draftId === this.newDraftId\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tlogger.debug('detected navigation to current (new) draft UID, not reloading')\n\t\t\t\treturn\n\t\t\t}\n\t\t\tlogger.debug('the  draft ID changed, we have to fetch the draft', {\n\t\t\t\tcurrentId: this?.draft?.databaseId ?? 'no draft currently loaded',\n\t\t\t\tnewId: to.params.draftId,\n\t\t\t})\n\n\t\t\tthis.fetchMessage()\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.fetchMessage()\n\t},\n\tmethods: {\n\t\tstringToRecipients(str) {\n\t\t\tif (str === undefined) {\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tlabel: str,\n\t\t\t\t\temail: str,\n\t\t\t\t},\n\t\t\t]\n\t\t},\n\t\tfetchMessage() {\n\t\t\tif (this.$route.params.draftId !== undefined) {\n\t\t\t\treturn this.fetchDraftMessage(this.$route.params.draftId)\n\t\t\t} else if (this.$route.query.messageId !== undefined) {\n\t\t\t\treturn this.fetchOriginalMessage(this.$route.query.messageId)\n\t\t\t}\n\t\t},\n\t\tfetchDraftMessage(id) {\n\t\t\tthis.loading = true\n\t\t\tthis.draft = undefined\n\t\t\tthis.error = undefined\n\t\t\tthis.errorMessage = ''\n\n\t\t\tthis.$store\n\t\t\t\t.dispatch('fetchMessage', id)\n\t\t\t\t.then((draft) => {\n\t\t\t\t\tif (draft.databaseId !== parseInt(this.$route.params.draftId, 10)) {\n\t\t\t\t\t\tlogger.debug(\"User navigated away, loaded draft won't be shown\", {\n\t\t\t\t\t\t\tdraft,\n\t\t\t\t\t\t\tdraftId: this.$route.params.draftId,\n\t\t\t\t\t\t})\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.draft = draft\n\n\t\t\t\t\tif (this.draft === undefined) {\n\t\t\t\t\t\tlogger.info('draft could not be found', { id })\n\t\t\t\t\t\tthis.errorMessage = getRandomMessageErrorMessage()\n\t\t\t\t\t\tthis.loading = false\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.loading = false\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tlogger.error(`could not load draft ${id}`, { error })\n\t\t\t\t\tif (error.isError) {\n\t\t\t\t\t\tthis.errorMessage = t('mail', 'Could not load your draft')\n\t\t\t\t\t\tthis.error = error\n\t\t\t\t\t\tthis.loading = false\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t},\n\t\tasync fetchOriginalMessage(id) {\n\t\t\tthis.loading = true\n\t\t\tthis.error = undefined\n\t\t\tthis.errorMessage = ''\n\n\t\t\tlogger.debug(`fetching original message ${id}`)\n\n\t\t\ttry {\n\t\t\t\tconst message = await this.$store.dispatch('fetchMessage', id)\n\t\t\t\tif (message.databaseId !== parseInt(this.$route.query.messageId, 10)) {\n\t\t\t\t\tlogger.debug(\"User navigated away, loaded original message won't be used\", {\n\t\t\t\t\t\tmessage,\n\t\t\t\t\t\tmessageId: message.databaseId,\n\t\t\t\t\t\turlId: this.$route.query.messageId,\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tlogger.debug('original message fetched', { message })\n\t\t\t\tthis.original = message\n\n\t\t\t\tlet body = plain(message.body || '')\n\t\t\t\tif (message.hasHtmlBody) {\n\t\t\t\t\tlogger.debug('original message has HTML body')\n\t\t\t\t\tconst resp = await Axios.get(\n\t\t\t\t\t\tgenerateUrl('/apps/mail/api/messages/{id}/html?plain=true', {\n\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\n\t\t\t\t\tbody = html(resp.data)\n\t\t\t\t}\n\t\t\t\tthis.originalBody = body\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not load original message ' + id, { error })\n\t\t\t\tif (error.isError) {\n\t\t\t\t\tthis.errorMessage = t('mail', 'Could not load original message')\n\t\t\t\t\tthis.error = error\n\t\t\t\t\tthis.loading = false\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\t\tasync saveDraft(data) {\n\t\t\tif (data.draftId === undefined && this.draft) {\n\t\t\t\tlogger.debug('draft data does not have a draftId, adding one', { draft: this.draft, data, id: this.draft.databaseId })\n\t\t\t\tdata.draftId = this.draft.databaseId\n\t\t\t}\n\t\t\tconst dataForServer = {\n\t\t\t\t...data,\n\t\t\t\tbody: data.isHtml ? data.body.value : toPlain(data.body).value,\n\t\t\t}\n\t\t\tconst { id } = await saveDraft(data.account, dataForServer)\n\n\t\t\t// Remove old draft envelope\n\t\t\tthis.$store.commit('removeEnvelope', { id: data.draftId })\n\t\t\tthis.$store.commit('removeMessage', { id: data.draftId })\n\n\t\t\t// Fetch new draft envelope\n\t\t\tawait this.$store.dispatch('fetchEnvelope', id)\n\n\t\t\t// Update route to new draft (actual redirect will be skipped)\n\t\t\tconst account = this.$store.getters.getAccount(data.account)\n\t\t\tif (parseInt(this.$route.params.mailboxId, 10) === account.draftsMailboxId) {\n\t\t\t\tthis.newDraftId = id\n\t\t\t\tthis.$router.replace({\n\t\t\t\t\tto: 'message',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\tthreadId: this.$route.params.threadId,\n\t\t\t\t\t\tdraftId: id,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t}\n\n\t\t\treturn id\n\t\t},\n\t\tasync sendMessage(data) {\n\t\t\tlogger.debug('sending message', { data })\n\t\t\tconst dataForServer = {\n\t\t\t\t...data,\n\t\t\t\tbody: data.isHtml ? data.body.value : toPlain(data.body).value,\n\t\t\t}\n\t\t\tawait sendMessage(data.account, dataForServer)\n\n\t\t\t// Remove old draft envelope\n\t\t\tthis.$store.commit('removeEnvelope', { id: data.draftId })\n\t\t\tthis.$store.commit('removeMessage', { id: data.draftId })\n\t\t},\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./NewMessageDetail.vue?vue&type=template&id=51b93a42&\"\nimport script from \"./NewMessageDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./NewMessageDetail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppContentDetails',[(_vm.loading)?_c('Loading'):(_vm.error)?_c('Error',{attrs:{\"error\":_vm.error && _vm.error.message ? _vm.error.message : _vm.t('mail', 'Not found'),\"message\":_vm.errorMessage,\"data\":_vm.error,\"role\":\"alert\"}}):_c('Composer',{attrs:{\"from-account\":_vm.composerData.accountId,\"to\":_vm.composerData.to,\"cc\":_vm.composerData.cc,\"bcc\":_vm.composerData.bcc,\"subject\":_vm.composerData.subject,\"body\":_vm.composerData.body,\"draft\":_vm.saveDraft,\"send\":_vm.sendMessage,\"reply-to\":_vm.composerData.replyTo,\"forward-from\":_vm.composerData.forwardFrom}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoMessageSelected.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoMessageSelected.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<AppContentDetails>\n\t\t<div class=\"icon icon-mail\" />\n\t\t<h2>{{ t('mail', 'No message selected') }}</h2>\n\t\t<p />\n\t</AppContentDetails>\n</template>\n\n<script>\nimport AppContentDetails from '@nextcloud/vue/dist/Components/AppContentDetails'\n\nexport default {\n\tname: 'NoMessageSelected',\n\tcomponents: {\n\t\tAppContentDetails,\n\t},\n}\n</script>\n\n<style scoped>\n.app-content-details {\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n}\n\n.icon {\n\theight: 64px;\n\twidth: 64px;\n\tmargin: 0 auto 15px;\n\tbackground-size: 64px;\n\topacity: 0.4;\n}\n\nh2,\np {\n\ttext-align: center;\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoMessageSelected.vue?vue&type=style&index=0&id=0f812b2d&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./NoMessageSelected.vue?vue&type=template&id=0f812b2d&scoped=true&\"\nimport script from \"./NoMessageSelected.vue?vue&type=script&lang=js&\"\nexport * from \"./NoMessageSelected.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NoMessageSelected.vue?vue&type=style&index=0&id=0f812b2d&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0f812b2d\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppContentDetails',[_c('div',{staticClass:\"icon icon-mail\"}),_vm._v(\" \"),_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'No message selected')))]),_vm._v(\" \"),_c('p')])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\n * @copyright 2021 Kristian Lebold <kristian@lebold.info>\n *\n * @author 2021 Kristian Lebold <kristian@lebold.info>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\n\nexport const findMatches = (mail) => {\n\tconst url = generateUrl('/apps/mail/api/contactIntegration/match/{mail}', {\n\t\tmail,\n\t})\n\n\treturn Axios.get(url).then((resp) => resp.data)\n}\n\nexport const addToContact = (id, mailAddr) => {\n\tconst url = generateUrl('/apps/mail/api/contactIntegration/add')\n\n\treturn Axios.put(url, { uid: id, mail: mailAddr }).then((resp) => resp.data)\n}\n\nexport const newContact = (name, mailAddr) => {\n\tconst url = generateUrl('/apps/mail/api/contactIntegration/new')\n\n\treturn Axios.put(url, { contactName: name, mail: mailAddr }).then((resp) => resp.data)\n}\n\nexport const autoCompleteByName = (term) => {\n\tconst url = generateUrl('/apps/mail/api/contactIntegration/autoComplete/{term}', {\n\t\tterm,\n\t})\n\n\treturn Axios.get(url).then((resp) => resp.data)\n}\n","<!--\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<Popover trigger=\"click\" class=\"contact-popover\">\n\t\t<UserBubble slot=\"trigger\"\n\t\t\t:display-name=\"label\"\n\t\t\t:avatar-image=\"avatarUrlAbsolute\"\n\t\t\t@click=\"onClickOpenContactDialog\">\n\t\t\t<span class=\"user-bubble-email\">{{ email }}</span>\n\t\t</UserBubble>\n\t\t<div class=\"contact-wrapper\">\n\t\t\t<div v-if=\"contactsWithEmail && contactsWithEmail.length > 0\" class=\"contact-existing\">\n\t\t\t\t<span class=\"icon-details\">\n\t\t\t\t\t{{ t('mail', 'Contacts with this address') }}:\n\t\t\t\t</span>\n\t\t\t\t<span>\n\t\t\t\t\t{{ contactsWithEmailComputed }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div v-if=\"selection === ContactSelectionStateEnum.select\">\n\t\t\t\t<a class=\"icon-reply\" @click=\"onClickReply\">\n\t\t\t\t\t<span class=\"action-label\">{{ t('mail', 'Reply') }}</span>\n\t\t\t\t</a>\n\t\t\t\t<a class=\"icon-user\" @click=\"selection = ContactSelectionStateEnum.existing\">\n\t\t\t\t\t<span class=\"action-label\">{{ t('mail', 'Add to Contact') }}</span>\n\t\t\t\t</a>\n\t\t\t\t<a class=\"icon-add\" @click=\"selection = ContactSelectionStateEnum.new\">\n\t\t\t\t\t<span class=\"action-label\">{{ t('mail', 'New Contact') }}</span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\t<div v-else class=\"contact-input-wrapper\">\n\t\t\t\t<Multiselect\n\t\t\t\t\tv-if=\"selection === ContactSelectionStateEnum.existing\"\n\t\t\t\t\tid=\"contact-selection\"\n\t\t\t\t\tref=\"contact-selection-label\"\n\t\t\t\t\tv-model=\"selectedContact\"\n\t\t\t\t\t:options=\"selectableContacts\"\n\t\t\t\t\t:taggable=\"true\"\n\t\t\t\t\tlabel=\"label\"\n\t\t\t\t\ttrack-by=\"label\"\n\t\t\t\t\t:multiple=\"false\"\n\t\t\t\t\t:placeholder=\"t('name', 'Contact name …')\"\n\t\t\t\t\t:clear-on-select=\"false\"\n\t\t\t\t\t:show-no-options=\"false\"\n\t\t\t\t\t:preserve-search=\"true\"\n\t\t\t\t\t@search-change=\"onAutocomplete\" />\n\n\t\t\t\t<input v-else-if=\"selection === ContactSelectionStateEnum.new\" v-model=\"newContactName\">\n\t\t\t</div>\n\t\t\t<div v-if=\"selection !== ContactSelectionStateEnum.select\">\n\t\t\t\t<a class=\"icon-close\" type=\"button\" @click=\"selection = ContactSelectionStateEnum.select\">\n\t\t\t\t\t{{ t('mail', 'Go back') }}\n\t\t\t\t</a>\n\t\t\t\t<a\n\t\t\t\t\tv-close-popover\n\t\t\t\t\t:disabled=\"addButtonDisabled\"\n\t\t\t\t\tclass=\"icon-checkmark\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t@click=\"onClickAddToContact\">\n\t\t\t\t\t{{ t('mail', 'Add') }}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t</Popover>\n</template>\n\n<script>\nimport { generateUrl } from '@nextcloud/router'\nimport UserBubble from '@nextcloud/vue/dist/Components/UserBubble'\nimport Popover from '@nextcloud/vue/dist/Components/Popover'\nimport Multiselect from '@nextcloud/vue/dist/Components/Multiselect'\n\nimport { fetchAvatarUrlMemoized } from '../service/AvatarService'\nimport { addToContact, findMatches, newContact, autoCompleteByName } from '../service/ContactIntegrationService'\nimport uniqBy from 'lodash/fp/uniqBy'\nimport debouncePromise from 'debounce-promise'\n\nconst debouncedSearch = debouncePromise(autoCompleteByName, 500)\n\nconst ContactSelectionStateEnum = Object.freeze({ new: 1, existing: 2, select: 3 })\n\nexport default {\n\tname: 'RecipientBubble',\n\tcomponents: {\n\t\tUserBubble,\n\t\tPopover,\n\t\tMultiselect,\n\t},\n\tprops: {\n\t\temail: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tlabel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tavatarUrl: undefined,\n\t\t\tloadingContacts: false,\n\t\t\tcontactsWithEmail: [],\n\t\t\tautoCompleteContacts: [],\n\t\t\tselectedContact: '',\n\t\t\tnewContactName: '',\n\t\t\tContactSelectionStateEnum,\n\t\t\tselection: ContactSelectionStateEnum.select,\n\t\t\tisContactPopoverOpen: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tavatarUrlAbsolute() {\n\t\t\tif (!this.avatarUrl) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (this.avatarUrl.startsWith('http')) {\n\t\t\t\treturn this.avatarUrl\n\t\t\t}\n\n\t\t\t// Make it an absolute URL because the user bubble component doesn't work with relative URLs\n\t\t\treturn window.location.protocol + '//' + window.location.host + generateUrl(this.avatarUrl)\n\t\t},\n\t\tselectableContacts() {\n\t\t\treturn this.autoCompleteContacts\n\t\t\t\t.map((contact) => ({ ...contact, label: contact.label }))\n\t\t},\n\t\tcontactsWithEmailComputed() {\n\t\t\tlet additional = ''\n\t\t\tif (this.contactsWithEmail && this.contactsWithEmail.length > 3) {\n\t\t\t\tadditional = ` + ${this.contactsWithEmail.length - 3}`\n\t\t\t}\n\t\t\treturn this.contactsWithEmail.slice(0, 3).map(e => e.label).join(', ').concat(additional)\n\t\t},\n\t\taddButtonDisabled() {\n\t\t\treturn !((this.selection === ContactSelectionStateEnum.existing && this.selectedContact)\n\t\t\t\t\t|| (this.selection === ContactSelectionStateEnum.new && this.newContactName.trim() !== ''))\n\t\t},\n\t},\n\tasync mounted() {\n\t\ttry {\n\t\t\tthis.avatarUrl = await fetchAvatarUrlMemoized(this.email)\n\t\t} catch (error) {\n\t\t\tconsole.debug('no avatar for ' + this.email, {\n\t\t\t\terror,\n\t\t\t})\n\t\t}\n\t\tthis.newContactName = this.label\n\t},\n\tmethods: {\n\t\tonClickReply() {\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: 'priority', // TODO: figure out current mailbox\n\t\t\t\t\tthreadId: 'new',\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tto: this.email,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\tonClickOpenContactDialog() {\n\t\t\tif (this.contactsWithEmail.length === 0) { // TODO fix me\n\t\t\t\tfindMatches(this.email).then(res => {\n\t\t\t\t\tif (res && res.length > 0) {\n\t\t\t\t\t\tthis.contactsWithEmail = res\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tonClickAddToContact() {\n\t\t\tif (this.selection === ContactSelectionStateEnum.new) {\n\t\t\t\tif (this.newContactName !== '') {\n\t\t\t\t\tnewContact(this.newContactName.trim(), this.email).then(res => console.debug('ContactIntegration', res))\n\t\t\t\t}\n\t\t\t} else if (this.selection === ContactSelectionStateEnum.existing) {\n\t\t\t\tif (this.selectedContact) {\n\t\t\t\t\taddToContact(this.selectedContact.id, this.email).then(res => console.debug('ContactIntegration', res))\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonAutocomplete(term) {\n\t\t\tif (term === undefined || term === '') {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tdebouncedSearch(term).then((results) => {\n\t\t\t\tthis.autoCompleteContacts = uniqBy('id')(this.autoCompleteContacts.concat(results))\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.user-bubble__title {\n\tmax-width: 30vw;\n}\n.user-bubble-email {\n\tmargin: 10px;\n}\n\n.contact-popover {\n\tdisplay: inline-block;\n}\n.contact-wrapper {\n\tpadding:10px;\n\tmin-width: 300px;\n\n\ta {\n\t\topacity: 0.7;\n\t}\n\ta:hover {\n\t\topacity: 1;\n\t}\n}\n.contact-input-wrapper {\n\tmargin-top: 10px;\n    margin-bottom: 10px;\n\tinput,\n\t.multiselect {\n\t\twidth: 100%;\n\t}\n}\n.icon-user,\n.icon-reply,\n.icon-checkmark,\n.icon-close,\n.icon-add {\n\theight: 44px;\n\tmin-width: 44px;\n\tmargin: 0;\n\tpadding: 9px 18px 10px 32px;\n}\n@media only screen and (min-width: 600px) {\n\t.icon-user,\n\t.icon-reply,\n\t.icon-checkmark,\n\t.icon-close,\n\t.icon-add {\n\t\tbackground-position: 12px center;\n\t}\n}\n.icon-add {\n\tdisplay: revert;\n    vertical-align: revert;\n}\n.contact-existing {\n\tmargin-bottom: 10px;\n\tfont-size: small;\n\t.icon-details {\n\t\tpadding-left: 34px;\n\t\tbackground-position: 10px center;\n\t\ttext-align: left;\n\t}\n}\n\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientBubble.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientBubble.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientBubble.vue?vue&type=style&index=0&id=7f075410&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./RecipientBubble.vue?vue&type=template&id=7f075410&scoped=true&\"\nimport script from \"./RecipientBubble.vue?vue&type=script&lang=js&\"\nexport * from \"./RecipientBubble.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RecipientBubble.vue?vue&type=style&index=0&id=7f075410&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7f075410\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Popover',{staticClass:\"contact-popover\",attrs:{\"trigger\":\"click\"}},[_c('UserBubble',{attrs:{\"slot\":\"trigger\",\"display-name\":_vm.label,\"avatar-image\":_vm.avatarUrlAbsolute},on:{\"click\":_vm.onClickOpenContactDialog},slot:\"trigger\"},[_c('span',{staticClass:\"user-bubble-email\"},[_vm._v(_vm._s(_vm.email))])]),_vm._v(\" \"),_c('div',{staticClass:\"contact-wrapper\"},[(_vm.contactsWithEmail && _vm.contactsWithEmail.length > 0)?_c('div',{staticClass:\"contact-existing\"},[_c('span',{staticClass:\"icon-details\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Contacts with this address'))+\":\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.contactsWithEmailComputed)+\"\\n\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(_vm.selection === _vm.ContactSelectionStateEnum.select)?_c('div',[_c('a',{staticClass:\"icon-reply\",on:{\"click\":_vm.onClickReply}},[_c('span',{staticClass:\"action-label\"},[_vm._v(_vm._s(_vm.t('mail', 'Reply')))])]),_vm._v(\" \"),_c('a',{staticClass:\"icon-user\",on:{\"click\":function($event){_vm.selection = _vm.ContactSelectionStateEnum.existing}}},[_c('span',{staticClass:\"action-label\"},[_vm._v(_vm._s(_vm.t('mail', 'Add to Contact')))])]),_vm._v(\" \"),_c('a',{staticClass:\"icon-add\",on:{\"click\":function($event){_vm.selection = _vm.ContactSelectionStateEnum.new}}},[_c('span',{staticClass:\"action-label\"},[_vm._v(_vm._s(_vm.t('mail', 'New Contact')))])])]):_c('div',{staticClass:\"contact-input-wrapper\"},[(_vm.selection === _vm.ContactSelectionStateEnum.existing)?_c('Multiselect',{ref:\"contact-selection-label\",attrs:{\"id\":\"contact-selection\",\"options\":_vm.selectableContacts,\"taggable\":true,\"label\":\"label\",\"track-by\":\"label\",\"multiple\":false,\"placeholder\":_vm.t('name', 'Contact name …'),\"clear-on-select\":false,\"show-no-options\":false,\"preserve-search\":true},on:{\"search-change\":_vm.onAutocomplete},model:{value:(_vm.selectedContact),callback:function ($$v) {_vm.selectedContact=$$v},expression:\"selectedContact\"}}):(_vm.selection === _vm.ContactSelectionStateEnum.new)?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newContactName),expression:\"newContactName\"}],domProps:{\"value\":(_vm.newContactName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newContactName=$event.target.value}}}):_vm._e()],1),_vm._v(\" \"),(_vm.selection !== _vm.ContactSelectionStateEnum.select)?_c('div',[_c('a',{staticClass:\"icon-close\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.selection = _vm.ContactSelectionStateEnum.select}}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Go back'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('a',{directives:[{name:\"close-popover\",rawName:\"v-close-popover\"}],staticClass:\"icon-checkmark\",attrs:{\"disabled\":_vm.addButtonDisabled,\"type\":\"button\"},on:{\"click\":_vm.onClickAddToContact}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Add'))+\"\\n\\t\\t\\t\")])]):_vm._e()])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * Mail\n *\n * This code is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License, version 3,\n * as published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License, version 3,\n * along with this program.  If not, see <http://www.gnu.org/licenses/>\n *\n */\n\nimport ical from 'ical.js'\nimport { getClient } from '../dav/client'\nimport Axios from '@nextcloud/axios'\n\nimport Logger from '../logger'\nimport { generateRemoteUrl } from '@nextcloud/router'\nimport { getCurrentUser } from '@nextcloud/auth'\n\nconst canWrite = (properties) => {\n\tlet acls = properties?.acl?.ace\n\n\tif (!acls) {\n\t\treturn false\n\t}\n\t// There might only be one ACL, not a list\n\tif (!Array.isArray(acls)) {\n\t\tacls = [acls]\n\t}\n\n\tfor (const acl of acls) {\n\t\tif (acl.grant?.privilege?.write !== undefined) {\n\t\t\treturn true\n\t\t}\n\t}\n\n\treturn false\n}\n\nconst getCalendarData = (calendar) => {\n\treturn {\n\t\tdisplayname: calendar.props.displayname,\n\t\torder: calendar.props['calendar-order'],\n\t\tcomponents: {\n\t\t\tvevent: true, // check if VEVENT exists in props['supported-calendar-component-set'].comps\n\t\t},\n\t\twritable: canWrite(calendar.props),\n\t\turl: generateRemoteUrl(`dav/calendars/${getCurrentUser().uid}${calendar.filename}/`),\n\t}\n}\n\n/**\n * @returns {Promise}\n */\nexport const getUserCalendars = async() => {\n\tconst response = await getClient('calendars')\n\t\t.getDirectoryContents('/', {\n\t\t\tdata: `<?xml version=\"1.0\"?>\n<d:propfind  xmlns:d=\"DAV:\" xmlns:c=\"urn:ietf:params:xml:ns:caldav\" xmlns:aapl=\"http://apple.com/ns/ical/\" xmlns:oc=\"http://owncloud.org/ns\" xmlns:cs=\"http://calendarserver.org/ns/\">\n  <d:prop>\n    <d:displayname />\n    <c:calendar-description />\n    <c:calendar-timezone />\n    <aapl:calendar-order />\n    <c:supported-calendar-component-set />\n    <oc:calendar-enabled />\n    <d:acl />\n    <d:owner />\n    <oc:invite />\n  </d:prop>\n</d:propfind>`,\n\t\t\tdetails: true,\n\t\t})\n\n\treturn response.data\n\t\t.map(getCalendarData)\n\t\t.filter(props => props.components.vevent && props.writable === true)\n}\n\nconst getRandomString = () => {\n\tlet str = ''\n\tfor (let i = 0; i < 7; i++) {\n\t\tstr += Math.random().toString(36).substring(7)\n\t}\n\treturn str\n}\n\nconst createICalElement = () => {\n\tconst root = new ical.Component(['vcalendar', [], []])\n\n\troot.updatePropertyWithValue('prodid', '-//' + OC.theme.name + ' Mail')\n\n\treturn root\n}\n\nconst splitCalendar = (data) => {\n\tconst timezones = []\n\tconst allObjects = {}\n\tconst jCal = ical.parse(data)\n\tconst components = new ical.Component(jCal)\n\n\tconst vtimezones = components.getAllSubcomponents('vtimezone')\n\tvtimezones.forEach((vtimezone) => timezones.push(vtimezone))\n\n\tconst componentNames = ['vevent', 'vjournal', 'vtodo']\n\tcomponentNames.forEach((componentName) => {\n\t\tconst vobjects = components.getAllSubcomponents(componentName)\n\t\tallObjects[componentName] = {}\n\n\t\tvobjects.forEach((vobject) => {\n\t\t\tconst uid = vobject.getFirstPropertyValue('uid')\n\t\t\tallObjects[componentName][uid] = allObjects[componentName][uid] || []\n\t\t\tallObjects[componentName][uid].push(vobject)\n\t\t})\n\t})\n\n\tconst split = []\n\tcomponentNames.forEach((componentName) => {\n\t\tsplit[componentName] = []\n\t\tfor (const objectsId in allObjects[componentName]) {\n\t\t\tconst objects = allObjects[componentName][objectsId]\n\t\t\tconst component = createICalElement()\n\t\t\ttimezones.forEach(component.addSubcomponent.bind(component))\n\t\t\tfor (const objectId in objects) {\n\t\t\t\tcomponent.addSubcomponent(objects[objectId])\n\t\t\t}\n\t\t\tsplit[componentName].push(component.toString())\n\t\t}\n\t})\n\n\treturn {\n\t\tname: components.getFirstPropertyValue('x-wr-calname'),\n\t\tcolor: components.getFirstPropertyValue('x-apple-calendar-color'),\n\t\tsplit,\n\t}\n}\n\n/**\n * @param {String} url the url\n * @param {Object} data the data\n * @returns {Promise}\n */\nexport const importCalendarEvent = (url) => (data) => {\n\tLogger.debug('importing events into calendar', {\n\t\turl,\n\t\tdata,\n\t})\n\tconst promises = []\n\n\tconst file = splitCalendar(data)\n\tconst components = ['vevent', 'vjournal', 'vtodo']\n\tcomponents.forEach((componentName) => {\n\t\tfor (const componentId in file.split[componentName]) {\n\t\t\tconst component = file.split[componentName][componentId]\n\t\t\tLogger.info('importing event component', { component })\n\t\t\tpromises.push(\n\t\t\t\tPromise.resolve(\n\t\t\t\t\tAxios.put(url + getRandomString() + '.ics', component, {\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'Content-Type': 'text/calendar; charset=utf-8',\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t)\n\t\t}\n\t})\n\n\treturn Promise.all(promises)\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"reservation\"},[_c('div',{staticClass:\"event\"},[_c('div',{staticClass:\"event-name\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.eventName)+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.location)?_c('div',{staticClass:\"venue\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.location)+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.date)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.date)+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.time)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.time)+\"\\n\\t\\t\")]):_vm._e()]),_vm._v(\" \"),(_vm.canImport)?_c('CalendarImport',{attrs:{\"calendars\":_vm.calendars,\"handler\":_vm.handleImport}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalendarImport.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalendarImport.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<Actions v-if=\"calendars.length\" default-icon=\"icon-add\">\n\t\t<ActionButton\n\t\t\tv-for=\"(calendar, idx) in cals\"\n\t\t\t:key=\"idx\"\n\t\t\t:icon=\"calendar.loading ? 'icon-loading-small' : 'icon-add'\"\n\t\t\t@click=\"onImport(calendar)\">\n\t\t\t{{ t('mail', 'Import into {calendar}', {calendar: calendar.displayname}) }}\n\t\t</ActionButton>\n\t</Actions>\n</template>\n\n<script>\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\n\nexport default {\n\tname: 'CalendarImport',\n\tcomponents: {\n\t\tActions,\n\t\tActionButton,\n\t},\n\tprops: {\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\thandler: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tcals() {\n\t\t\treturn this.calendars.map((original) => {\n\t\t\t\tthis.$set(original, 'loading', false)\n\t\t\t\treturn original\n\t\t\t})\n\t\t},\n\t},\n\tmethods: {\n\t\tonImport(calendar) {\n\t\t\tcalendar.loading = true\n\n\t\t\tthis.handler(calendar)\n\t\t\t\t.catch(console.error.bind(this))\n\t\t\t\t.then(() => {\n\t\t\t\t\tcalendar.loading = false\n\t\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style scoped></style>\n","import { render, staticRenderFns } from \"./CalendarImport.vue?vue&type=template&id=7c52d704&scoped=true&\"\nimport script from \"./CalendarImport.vue?vue&type=script&lang=js&\"\nexport * from \"./CalendarImport.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7c52d704\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.calendars.length)?_c('Actions',{attrs:{\"default-icon\":\"icon-add\"}},_vm._l((_vm.cals),function(calendar,idx){return _c('ActionButton',{key:idx,attrs:{\"icon\":calendar.loading ? 'icon-loading-small' : 'icon-add'},on:{\"click\":function($event){return _vm.onImport(calendar)}}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Import into {calendar}', {calendar: calendar.displayname}))+\"\\n\\t\")])}),1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventReservation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventReservation.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"reservation\">\n\t\t<div class=\"event\">\n\t\t\t<div class=\"event-name\">\n\t\t\t\t{{ eventName }}\n\t\t\t</div>\n\t\t\t<div v-if=\"location\" class=\"venue\">\n\t\t\t\t{{ location }}\n\t\t\t</div>\n\t\t\t<div v-if=\"date\">\n\t\t\t\t{{ date }}\n\t\t\t</div>\n\t\t\t<div v-if=\"time\">\n\t\t\t\t{{ time }}\n\t\t\t</div>\n\t\t</div>\n\t\t<CalendarImport v-if=\"canImport\" :calendars=\"calendars\" :handler=\"handleImport\" />\n\t</div>\n</template>\n\n<script>\nimport ical from 'ical.js'\nimport md5 from 'md5'\nimport moment from '@nextcloud/moment'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\n\nimport CalendarImport from './CalendarImport'\nimport { importCalendarEvent } from '../../service/DAVService'\nimport logger from '../../logger'\n\nexport default {\n\tname: 'EventReservation',\n\tcomponents: { CalendarImport },\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\teventName() {\n\t\t\treturn this.data.reservationFor.name\n\t\t},\n\t\ttime() {\n\t\t\tif (!('startDate' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(this.data.reservationFor.startDate).format('LT')\n\t\t},\n\t\tdate() {\n\t\t\tif (!('startDate' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(this.data.reservationFor.startDate).format('L')\n\t\t},\n\t\tlocation() {\n\t\t\tif (!('location' in this.data.reservationFor) || !('name' in this.data.reservationFor.location)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn this.data.reservationFor.location.name\n\t\t},\n\t\tcanImport() {\n\t\t\treturn 'startDate' in this.data.reservationFor\n\t\t},\n\t},\n\tmethods: {\n\t\tgetEndDateTime(event) {\n\t\t\tif ('endDate' in this.data.reservationFor) {\n\t\t\t\treturn moment(this.data.reservationFor.endDate).format()\n\t\t\t} else {\n\t\t\t\t// Assume it's 2h and user will adjust if necessary\n\t\t\t\t// TODO: handle 'duration' https://schema.org/Event\n\t\t\t\treturn moment('2019-10-22T12:00:00Z').add(2, 'hours').format()\n\t\t\t}\n\t\t},\n\t\thandleImport(calendar) {\n\t\t\tconst event = new ical.Component('VEVENT')\n\t\t\tevent.updatePropertyWithValue('SUMMARY', this.eventName)\n\n\t\t\tconst start = moment(this.data.reservationFor.startDate).format()\n\t\t\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(start))\n\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t'DTEND',\n\t\t\t\tical.Time.fromDateTimeString(this.getEndDateTime(this.data.reservationFor))\n\t\t\t)\n\n\t\t\tif ('location' in this.data.reservationFor) {\n\t\t\t\tevent.updatePropertyWithValue('LOCATION', this.data.reservationFor.location.name)\n\t\t\t\tif ('geo' in this.data.reservationFor.location) {\n\t\t\t\t\t// https://www.kanzaki.com/docs/ical/geo.html\n\t\t\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t\t\t'GEO',\n\t\t\t\t\t\t`${this.data.reservationFor.location.geo.latitude};${this.data.reservationFor.location.geo.longitude}`\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// TODO: read version from package.json\n\t\t\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\n\n\t\t\t// TODO: is this free of collisions? the bug reports will tell us!\n\t\t\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.eventName))\n\n\t\t\tconst cal = new ical.Component('VCALENDAR')\n\t\t\tcal.addSubcomponent(event)\n\t\t\tlogger.debug('generated calendar event from event reservation data', { ical: cal.toString() })\n\t\t\treturn importCalendarEvent(calendar.url)(cal.toString())\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug('event successfully imported')\n\t\t\t\t\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tlogger.error('Could not import event', { error })\n\t\t\t\t\tshowError(t('mail', 'Could not create event'))\n\t\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.reservation {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n\n.event {\n\tflex-grow: 1;\n}\n\n.event-name {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n</style>\n","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventReservation.vue?vue&type=style&index=0&id=b2f6d4c0&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./EventReservation.vue?vue&type=template&id=b2f6d4c0&scoped=true&\"\nimport script from \"./EventReservation.vue?vue&type=script&lang=js&\"\nexport * from \"./EventReservation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EventReservation.vue?vue&type=style&index=0&id=b2f6d4c0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b2f6d4c0\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlightReservation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlightReservation.vue?vue&type=script&lang=js&\"","<template>\n\t<div class=\"reservation\">\n\t\t<div class=\"departure\">\n\t\t\t<div class=\"iata\">\n\t\t\t\t{{ data.reservationFor.departureAirport.iataCode }}\n\t\t\t</div>\n\t\t\t<div class=\"airport\">\n\t\t\t\t{{ data.reservationFor.departureAirport.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureDate\">\n\t\t\t\t{{ departureDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureTime\">\n\t\t\t\t{{ departureTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"connection\">\n\t\t\t<div><AirplaneIcon :title=\"t('mail', 'Airplane')\" /></div>\n\t\t\t<div>{{ flightNumber }}</div>\n\t\t\t<div v-if=\"reservation\">\n\t\t\t\t{{ t('mail', 'Reservation {id}', {id: reservation}) }}\n\t\t\t</div>\n\t\t\t<div v-else>\n\t\t\t\t<ArrowIcon decorative />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"arrival\">\n\t\t\t<div class=\"iata\">\n\t\t\t\t{{ data.reservationFor.arrivalAirport.iataCode }}\n\t\t\t</div>\n\t\t\t<div class=\"airport\">\n\t\t\t\t{{ data.reservationFor.arrivalAirport.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalDate\">\n\t\t\t\t{{ arrivalDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalTime\">\n\t\t\t\t{{ arrivalTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<CalendarImport :calendars=\"calendars\" :handler=\"handleImport\" />\n\t</div>\n</template>\n\n<script>\nimport AirplaneIcon from 'vue-material-design-icons/Airplane'\nimport ArrowIcon from 'vue-material-design-icons/ArrowRight'\nimport ical from 'ical.js'\nimport md5 from 'md5'\nimport moment from '@nextcloud/moment'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\n\nimport CalendarImport from './CalendarImport'\nimport { importCalendarEvent } from '../../service/DAVService'\nimport logger from '../../logger'\n\nexport default {\n\tname: 'FlightReservation',\n\tcomponents: {\n\t\tAirplaneIcon,\n\t\tArrowIcon,\n\t\tCalendarImport,\n\t},\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tdepartureTime() {\n\t\t\tif (!('departureTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(this.data.reservationFor.departureTime['@value']).format('LT')\n\t\t},\n\t\tdepartureDate() {\n\t\t\tif (!('departureTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(this.data.reservationFor.departureTime['@value']).format('L')\n\t\t},\n\t\tarrivalTime() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(this.data.reservationFor.arrivalTime['@value']).format('LT')\n\t\t},\n\t\tarrivalDate() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(this.data.reservationFor.arrivalTime['@value']).format('L')\n\t\t},\n\t\tflightNumber() {\n\t\t\treturn this.data.reservationFor.airline.iataCode + this.data.reservationFor.flightNumber\n\t\t},\n\t\treservation() {\n\t\t\tif (!('reservationNumber' in this.data)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn this.data.reservationNumber\n\t\t},\n\t\tcanImport() {\n\t\t\treturn 'departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor\n\t\t},\n\t},\n\tmethods: {\n\t\thandleImport(calendar) {\n\t\t\tconst event = new ical.Component('VEVENT')\n\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t'SUMMARY',\n\t\t\t\tt('mail', 'Flight {flightNr} from {depAirport} to {arrAirport}', {\n\t\t\t\t\tflightNr: this.flightNumber,\n\t\t\t\t\tdepAirport: this.data.reservationFor.departureAirport.iataCode,\n\t\t\t\t\tarrAirport: this.data.reservationFor.arrivalAirport.iataCode,\n\t\t\t\t})\n\t\t\t)\n\n\t\t\tconst depart = moment(this.data.reservationFor.departureTime['@value']).format()\n\t\t\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(depart))\n\t\t\tconst arrive = moment(this.data.reservationFor.arrivalTime['@value']).format()\n\t\t\tevent.updatePropertyWithValue('DTEND', ical.Time.fromDateTimeString(arrive))\n\n\t\t\t// TODO: read version from package.json\n\t\t\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\n\n\t\t\t// TODO: is this free of collisions? the bug reports will tell us!\n\t\t\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.flightNumber))\n\n\t\t\tconst cal = new ical.Component('VCALENDAR')\n\t\t\tcal.addSubcomponent(event)\n\t\t\tlogger.debug('generated calendar event from flight reservation data', { ical: cal.toString() })\n\n\t\t\treturn importCalendarEvent(calendar.url)(cal.toString())\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug('event successfully imported')\n\t\t\t\t\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tlogger.error('Could not import event', { error })\n\t\t\t\t\tshowError(t('mail', 'Could not create event'))\n\t\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.reservation {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n\n.departure,\n.arrival {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n}\n\n.departure,\n.arrival,\n.connection {\n\tjustify-content: center;\n}\n\n.iata {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n\n.airport {\n\tfont-size: large;\n}\n\n.departure {\n\ttext-align: right;\n}\n\n.connection {\n\ttext-align: center;\n\tpadding: 0 40px;\n}\n</style>\n","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlightReservation.vue?vue&type=style&index=0&id=670645fc&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./FlightReservation.vue?vue&type=template&id=670645fc&scoped=true&\"\nimport script from \"./FlightReservation.vue?vue&type=script&lang=js&\"\nexport * from \"./FlightReservation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FlightReservation.vue?vue&type=style&index=0&id=670645fc&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"670645fc\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"reservation\"},[_c('div',{staticClass:\"departure\"},[_c('div',{staticClass:\"iata\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.reservationFor.departureAirport.iataCode)+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"airport\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.reservationFor.departureAirport.name)+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.departureDate)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.departureDate)+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.departureTime)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.departureTime)+\"\\n\\t\\t\")]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"connection\"},[_c('div',[_c('AirplaneIcon',{attrs:{\"title\":_vm.t('mail', 'Airplane')}})],1),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.flightNumber))]),_vm._v(\" \"),(_vm.reservation)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Reservation {id}', {id: _vm.reservation}))+\"\\n\\t\\t\")]):_c('div',[_c('ArrowIcon',{attrs:{\"decorative\":\"\"}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"arrival\"},[_c('div',{staticClass:\"iata\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.reservationFor.arrivalAirport.iataCode)+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"airport\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.reservationFor.arrivalAirport.name)+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.arrivalDate)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.arrivalDate)+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.arrivalTime)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.arrivalTime)+\"\\n\\t\\t\")]):_vm._e()]),_vm._v(\" \"),_c('CalendarImport',{attrs:{\"calendars\":_vm.calendars,\"handler\":_vm.handleImport}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainReservation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainReservation.vue?vue&type=script&lang=js&\"","<template>\n\t<div class=\"reservation\">\n\t\t<div class=\"departure\">\n\t\t\t<div class=\"station\">\n\t\t\t\t{{ data.reservationFor.departureStation.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureDate\">\n\t\t\t\t{{ departureDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureTime\">\n\t\t\t\t{{ departureTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"connection\">\n\t\t\t<div><TrainIcon :title=\"t('mail', 'Train')\" /></div>\n\t\t\t<div>{{ trainNumber }}</div>\n\t\t\t<div><ArrowIcon decorative /></div>\n\t\t</div>\n\t\t<div class=\"arrival\">\n\t\t\t<div class=\"station\">\n\t\t\t\t{{ data.reservationFor.arrivalStation.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalDate\">\n\t\t\t\t{{ arrivalDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalTime\">\n\t\t\t\t{{ arrivalTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<CalendarImport v-if=\"canImport\" :calendars=\"calendars\" :handler=\"handleImport\" />\n\t</div>\n</template>\n\n<script>\nimport ArrowIcon from 'vue-material-design-icons/ArrowRight'\nimport ical from 'ical.js'\nimport md5 from 'md5'\nimport moment from '@nextcloud/moment'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\nimport TrainIcon from 'vue-material-design-icons/Train'\n\nimport CalendarImport from './CalendarImport'\nimport { importCalendarEvent } from '../../service/DAVService'\nimport logger from '../../logger'\n\nexport default {\n\tname: 'TrainReservation',\n\tcomponents: {\n\t\tArrowIcon,\n\t\tCalendarImport,\n\t\tTrainIcon,\n\t},\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tdepartureTime() {\n\t\t\tif (!('departureTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(this.data.reservationFor.departureTime).format('LT')\n\t\t},\n\t\tdepartureDate() {\n\t\t\tif ('departureTime' in this.data.reservationFor) {\n\t\t\t\treturn moment(this.data.reservationFor.departureTime).format('L')\n\t\t\t}\n\t\t\tif ('departureDay' in this.data.reservationFor) {\n\t\t\t\treturn moment(this.data.reservationFor.departureDay).format('L')\n\t\t\t}\n\t\t\treturn undefined\n\t\t},\n\t\tarrivalTime() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(this.data.reservationFor.arrivalTime).format('LT')\n\t\t},\n\t\tarrivalDate() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(this.data.reservationFor.arrivalTime).format('L')\n\t\t},\n\t\ttrainNumber() {\n\t\t\treturn this.data.reservationFor.trainNumber\n\t\t},\n\t\tcanImport() {\n\t\t\treturn (\n\t\t\t\t('departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor)\n\t\t\t\t|| 'departureDay' in this.data.reservationFor\n\t\t\t)\n\t\t},\n\t},\n\tmethods: {\n\t\thandleImport(calendar) {\n\t\t\tconst event = new ical.Component('VEVENT')\n\t\t\tif ('trainNumber' in this.data.reservationFor) {\n\t\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t\t'SUMMARY',\n\t\t\t\t\tt('mail', '{trainNr} from {depStation} to {arrStation}', {\n\t\t\t\t\t\ttrainNr: this.data.reservationFor.trainNumber,\n\t\t\t\t\t\tdepStation: this.data.reservationFor.departureStation.name,\n\t\t\t\t\t\tarrStation: this.data.reservationFor.arrivalStation.name,\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t} else {\n\t\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t\t'SUMMARY',\n\t\t\t\t\tt('mail', 'Train from {depStation} to {arrStation}', {\n\t\t\t\t\t\tdepStation: this.data.reservationFor.departureStation.name,\n\t\t\t\t\t\tarrStation: this.data.reservationFor.arrivalStation.name,\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tif ('departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor) {\n\t\t\t\tconst depart = moment(this.data.reservationFor.departureTime).format()\n\t\t\t\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(depart))\n\t\t\t\tconst arrive = moment(this.data.reservationFor.arrivalTime).format()\n\t\t\t\tevent.updatePropertyWithValue('DTEND', ical.Time.fromDateTimeString(arrive))\n\t\t\t} else if ('departureDay' in this.data.reservationFor) {\n\t\t\t\tconst date = moment(this.data.reservationFor.departureDay).format()\n\t\t\t\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(date))\n\t\t\t}\n\n\t\t\t// TODO: read version from package.json\n\t\t\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\n\n\t\t\t// TODO: is this free of collisions? the bug reports will tell us!\n\t\t\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.departureTime))\n\n\t\t\tconst cal = new ical.Component('VCALENDAR')\n\t\t\tcal.addSubcomponent(event)\n\t\t\tlogger.debug('generated calendar event from train reservation data', { ical: cal.toString() })\n\n\t\t\treturn importCalendarEvent(calendar.url)(cal.toString())\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug('event successfully imported')\n\t\t\t\t\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tlogger.error('Could not import event', { error })\n\t\t\t\t\tshowError(t('mail', 'Could not create event'))\n\t\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.reservation {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n\n.departure,\n.arrival {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n}\n\n.departure,\n.arrival,\n.connection {\n\tjustify-content: center;\n}\n\n.station {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n\n.departure {\n\ttext-align: right;\n}\n\n.connection {\n\ttext-align: center;\n\tpadding: 0 40px;\n}\n</style>\n","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainReservation.vue?vue&type=style&index=0&id=1eebd676&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./TrainReservation.vue?vue&type=template&id=1eebd676&scoped=true&\"\nimport script from \"./TrainReservation.vue?vue&type=script&lang=js&\"\nexport * from \"./TrainReservation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TrainReservation.vue?vue&type=style&index=0&id=1eebd676&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1eebd676\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"reservation\"},[_c('div',{staticClass:\"departure\"},[_c('div',{staticClass:\"station\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.reservationFor.departureStation.name)+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.departureDate)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.departureDate)+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.departureTime)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.departureTime)+\"\\n\\t\\t\")]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"connection\"},[_c('div',[_c('TrainIcon',{attrs:{\"title\":_vm.t('mail', 'Train')}})],1),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.trainNumber))]),_vm._v(\" \"),_c('div',[_c('ArrowIcon',{attrs:{\"decorative\":\"\"}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"arrival\"},[_c('div',{staticClass:\"station\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.reservationFor.arrivalStation.name)+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.arrivalDate)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.arrivalDate)+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.arrivalTime)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.arrivalTime)+\"\\n\\t\\t\")]):_vm._e()]),_vm._v(\" \"),(_vm.canImport)?_c('CalendarImport',{attrs:{\"calendars\":_vm.calendars,\"handler\":_vm.handleImport}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div>\n\t\t<template v-for=\"(entry, idx) in entries\">\n\t\t\t<EventReservation\n\t\t\t\tv-if=\"entry['@type'] === 'EventReservation'\"\n\t\t\t\t:key=\"idx\"\n\t\t\t\t:data=\"entry\"\n\t\t\t\t:calendars=\"calendars\"\n\t\t\t\t:message-id=\"messageId\" />\n\t\t\t<FlightReservation\n\t\t\t\tv-else-if=\"entry['@type'] === 'FlightReservation'\"\n\t\t\t\t:key=\"idx\"\n\t\t\t\t:data=\"entry\"\n\t\t\t\t:calendars=\"calendars\"\n\t\t\t\t:message-id=\"messageId\" />\n\t\t\t<TrainReservation\n\t\t\t\tv-else-if=\"entry['@type'] === 'TrainReservation'\"\n\t\t\t\t:key=\"idx\"\n\t\t\t\t:data=\"entry\"\n\t\t\t\t:calendars=\"calendars\"\n\t\t\t\t:message-id=\"messageId\" />\n\t\t\t<span v-else :key=\"idx\">{{\n\t\t\t\tt('mail', 'Itinerary for {type} is not supported yet', {type: entry['@type']})\n\t\t\t}}</span>\n\t\t</template>\n\t</div>\n</template>\n\n<script>\nimport once from 'lodash/fp/once'\n\nimport { getUserCalendars } from '../service/DAVService'\nimport logger from '../logger'\nimport EventReservation from './itinerary/EventReservation'\nimport FlightReservation from './itinerary/FlightReservation'\nimport TrainReservation from './itinerary/TrainReservation'\n\nconst getUserCalendarsOnce = once(getUserCalendars)\n\nexport default {\n\tname: 'Itinerary',\n\tcomponents: {\n\t\tEventReservation,\n\t\tFlightReservation,\n\t\tTrainReservation,\n\t},\n\tprops: {\n\t\tentries: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcalendars: [],\n\t\t}\n\t},\n\tmounted() {\n\t\tgetUserCalendarsOnce()\n\t\t\t.then((calendars) => (this.calendars = calendars))\n\t\t\t.catch((error) => logger.error('Could not load calendars', { error }))\n\t},\n}\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Itinerary.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Itinerary.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Itinerary.vue?vue&type=template&id=5044772a&\"\nimport script from \"./Itinerary.vue?vue&type=script&lang=js&\"\nexport * from \"./Itinerary.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._l((_vm.entries),function(entry,idx){return [(entry['@type'] === 'EventReservation')?_c('EventReservation',{key:idx,attrs:{\"data\":entry,\"calendars\":_vm.calendars,\"message-id\":_vm.messageId}}):(entry['@type'] === 'FlightReservation')?_c('FlightReservation',{key:idx,attrs:{\"data\":entry,\"calendars\":_vm.calendars,\"message-id\":_vm.messageId}}):(entry['@type'] === 'TrainReservation')?_c('TrainReservation',{key:idx,attrs:{\"data\":entry,\"calendars\":_vm.calendars,\"message-id\":_vm.messageId}}):_c('span',{key:idx},[_vm._v(_vm._s(_vm.t('mail', 'Itinerary for {type} is not supported yet', {type: entry['@type']})))])]})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachment.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"attachment\" @click=\"download\">\n\t\t<img v-if=\"isImage\" class=\"mail-attached-image\" :src=\"url\">\n\t\t<img class=\"attachment-icon\" :src=\"mimeUrl\">\n\t\t<span class=\"attachment-name\"\n\t\t\t:title=\"label\">{{ name }}\n\t\t\t<span class=\"attachment-size\">({{ humanReadable(size) }})</span>\n\t\t</span>\n\t\t<button\n\t\t\tv-if=\"isCalendarEvent\"\n\t\t\tclass=\"button attachment-import calendar\"\n\t\t\t:class=\"{'icon-add': !loadingCalendars, 'icon-loading-small': loadingCalendars}\"\n\t\t\t:disabled=\"loadingCalendars\"\n\t\t\t:title=\"t('mail', 'Import into calendar')\"\n\t\t\t@click.stop=\"loadCalendars\" />\n\t\t<button class=\"button icon-download attachment-download\" :title=\"t('mail', 'Download attachment')\" />\n\t\t<button\n\t\t\tclass=\"attachment-save-to-cloud\"\n\t\t\t:class=\"{'icon-folder': !savingToCloud, 'icon-loading-small': savingToCloud}\"\n\t\t\t:disabled=\"savingToCloud\"\n\t\t\t:title=\"t('mail', 'Save to Files')\"\n\t\t\t@click.stop=\"saveToCloud\" />\n\t\t<div\n\t\t\tv-on-click-outside=\"closeCalendarPopover\"\n\t\t\tclass=\"popovermenu bubble attachment-import-popover hidden\"\n\t\t\t:class=\"{open: showCalendarPopover}\">\n\t\t\t<PopoverMenu :menu=\"calendarMenuEntries\" />\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { formatFileSize } from '@nextcloud/files'\nimport { mixin as onClickOutside } from 'vue-on-click-outside'\nimport { translate as t } from '@nextcloud/l10n'\nimport { getFilePickerBuilder } from '@nextcloud/dialogs'\nimport PopoverMenu from '@nextcloud/vue/dist/Components/PopoverMenu'\n\nimport Logger from '../logger'\n\nimport { downloadAttachment, saveAttachmentToFiles } from '../service/AttachmentService'\nimport { getUserCalendars, importCalendarEvent } from '../service/DAVService'\n\nexport default {\n\tname: 'MessageAttachment',\n\tcomponents: {\n\t\tPopoverMenu,\n\t},\n\tmixins: [onClickOutside],\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tfileName: {\n\t\t\ttype: String,\n\t\t\tdefault: t('mail', 'Unnamed'),\n\t\t\trequired: false,\n\t\t},\n\t\turl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tsize: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tmime: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmimeUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tisImage: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tisCalendarEvent: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsavingToCloud: false,\n\t\t\tloadingCalendars: false,\n\t\t\tcalendars: [],\n\t\t\tshowCalendarPopover: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tname() {\n\t\t\tif (this.mime === 'message/rfc822') {\n\t\t\t\treturn t('mail', 'Embedded message')\n\t\t\t}\n\t\t\treturn this.fileName\n\t\t},\n\t\tlabel() {\n\t\t\tif (this.mime === 'message/rfc822') {\n\t\t\t\treturn t('mail', 'Embedded message') + ' (' + formatFileSize(this.size) + ')'\n\t\t\t}\n\t\t\treturn this.fileName + ' (' + formatFileSize(this.size) + ')'\n\t\t},\n\t\tcalendarMenuEntries() {\n\t\t\treturn this.calendars.map((cal) => {\n\t\t\t\treturn {\n\t\t\t\t\ticon: 'icon-add',\n\t\t\t\t\ttext: cal.displayname,\n\t\t\t\t\taction: this.importCalendar(cal.url),\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t},\n\tmethods: {\n\t\thumanReadable(size) {\n\t\t\treturn formatFileSize(size)\n\t\t},\n\t\tsaveToCloud() {\n\t\t\tconst saveAttachment = (id, attachmentId) => (directory) => {\n\t\t\t\treturn saveAttachmentToFiles(id, attachmentId, directory)\n\t\t\t}\n\t\t\tconst id = this.$route.params.threadId\n\t\t\tconst picker = getFilePickerBuilder(t('mail', 'Choose a folder to store the attachment in'))\n\t\t\t\t.setMultiSelect(false)\n\t\t\t\t.addMimeTypeFilter('httpd/unix-directory')\n\t\t\t\t.setModal(true)\n\t\t\t\t.setType(1)\n\t\t\t\t.allowDirectories(true)\n\t\t\t\t.build()\n\n\t\t\treturn picker\n\t\t\t\t.pick()\n\t\t\t\t.then((dest) => {\n\t\t\t\t\tthis.savingToCloud = true\n\t\t\t\t\treturn dest\n\t\t\t\t})\n\t\t\t\t.then(saveAttachment(id, this.id))\n\t\t\t\t.then(() => Logger.info('saved'))\n\t\t\t\t.catch((e) => Logger.error('not saved', { error: e }))\n\t\t\t\t.then(() => (this.savingToCloud = false))\n\t\t},\n\t\tdownload() {\n\t\t\twindow.location = this.url\n\t\t},\n\t\tloadCalendars() {\n\t\t\tthis.loadingCalendars = true\n\t\t\tgetUserCalendars().then((calendars) => {\n\t\t\t\tthis.calendars = calendars\n\t\t\t\tthis.showCalendarPopover = true\n\t\t\t\tthis.loadingCalendars = false\n\t\t\t})\n\t\t},\n\t\tcloseCalendarPopover() {\n\t\t\tthis.showCalendarPopover = false\n\t\t},\n\t\timportCalendar(url) {\n\t\t\treturn () => {\n\t\t\t\tdownloadAttachment(this.url)\n\t\t\t\t\t.then(importCalendarEvent(url))\n\t\t\t\t\t.then(() => Logger.info('calendar imported'))\n\t\t\t\t\t.catch((e) => Logger.error('import error', { error: e }))\n\t\t\t\t\t.then(() => (this.showCalendarPopover = false))\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.attachment {\n\tposition: relative;\n\tdisplay: inline-block;\n\twidth: calc(100% - 32px);\n\tpadding: 16px;\n}\n\n.attachment:hover,\n.attachment span:hover {\n\tbackground-color: var(--color-background-hover);\n\tcursor: pointer;\n}\n\n.mail-attached-image {\n\tdisplay: block;\n\tmax-width: 100%;\n\tborder-radius: var(--border-radius);\n\tcursor: pointer;\n}\n.mail-attached-image:hover {\n\topacity: 0.8;\n}\n\n.attachment-save-to-cloud,\n.attachment-download,\n.attachment-import {\n\tposition: absolute;\n\tpadding: 21px;\n\tmargin: 0;\n\tbottom: 6px;\n\tbackground-color: transparent;\n\tborder-color: transparent;\n}\n\n.attachment-save-to-cloud {\n\tright: 0;\n}\n\n.attachment-download {\n\tright: 32px;\n\topacity: 0.6;\n}\n\n.attachment-import {\n\tright: 64px;\n}\n\n.attachment-import-popover {\n\tright: 32px;\n\ttop: 42px;\n}\n\n.attachment-import-popover::after {\n\tright: 32px;\n}\n\n.attachment-name {\n\tdisplay: inline-block;\n\twidth: calc(100% - 72px);\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tvertical-align: middle;\n}\n\n/* show attachment size less prominent */\n.attachment-size {\n\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=50)';\n\topacity: 0.5;\n}\n\n.attachment-icon {\n\tvertical-align: middle;\n\ttext-align: left;\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachment.vue?vue&type=style&index=0&id=473b0a1e&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachments.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachments.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"mail-message-attachments\">\n\t\t<div class=\"attachments\">\n\t\t\t<MessageAttachment\n\t\t\t\tv-for=\"attachment in attachments\"\n\t\t\t\t:id=\"attachment.id\"\n\t\t\t\t:key=\"attachment.id\"\n\t\t\t\t:file-name=\"attachment.fileName\"\n\t\t\t\t:size=\"attachment.size\"\n\t\t\t\t:url=\"attachment.downloadUrl\"\n\t\t\t\t:is-image=\"attachment.isImage\"\n\t\t\t\t:is-calendar-event=\"attachment.isCalendarEvent\"\n\t\t\t\t:mime=\"attachment.mime\"\n\t\t\t\t:mime-url=\"attachment.mimeUrl\" />\n\t\t</div>\n\t\t<p v-if=\"moreThanOne\" class=\"attachments-button-wrapper\">\n\t\t\t<button\n\t\t\t\tclass=\"attachments-save-to-cloud\"\n\t\t\t\t:class=\"{'icon-folder': !savingToCloud, 'icon-loading-small': savingToCloud}\"\n\t\t\t\t:disabled=\"savingToCloud\"\n\t\t\t\t@click=\"saveAll\">\n\t\t\t\t{{ t('mail', 'Save all to Files') }}\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclass=\"attachments-save-to-cloud icon-folder\"\n\t\t\t\t@click=\"downloadZip\">\n\t\t\t\t{{ t('mail', 'Download Zip') }}\n\t\t\t</button>\n\t\t</p>\n\t</div>\n</template>\n\n<script>\nimport { generateUrl } from '@nextcloud/router'\nimport { getFilePickerBuilder } from '@nextcloud/dialogs'\nimport { saveAttachmentsToFiles } from '../service/AttachmentService'\n\nimport MessageAttachment from './MessageAttachment'\nimport Logger from '../logger'\n\nexport default {\n\tname: 'MessageAttachments',\n\tcomponents: {\n\t\tMessageAttachment,\n\t},\n\tprops: {\n\t\tenvelope: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t\tattachments: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsavingToCloud: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tmoreThanOne() {\n\t\t\treturn this.attachments.length > 1\n\t\t},\n\t\tzipUrl() {\n\t\t\treturn generateUrl('/apps/mail/api/messages/{id}/attachments', {\n\t\t\t\tid: this.envelope.databaseId,\n\t\t\t})\n\t\t},\n\t},\n\tmethods: {\n\t\tsaveAll() {\n\t\t\tconst picker = getFilePickerBuilder(t('mail', 'Choose a folder to store the attachments in'))\n\t\t\t\t.setMultiSelect(false)\n\t\t\t\t.addMimeTypeFilter('httpd/unix-directory')\n\t\t\t\t.setModal(true)\n\t\t\t\t.setType(1)\n\t\t\t\t.allowDirectories(true)\n\t\t\t\t.build()\n\n\t\t\tconst saveAttachments = (id) => (directory) => {\n\t\t\t\treturn saveAttachmentsToFiles(id, directory)\n\t\t\t}\n\t\t\tconst id = this.$route.params.threadId\n\n\t\t\treturn picker\n\t\t\t\t.pick()\n\t\t\t\t.then((dest) => {\n\t\t\t\t\tthis.savingToCloud = true\n\t\t\t\t\treturn dest\n\t\t\t\t})\n\t\t\t\t.then(saveAttachments(id))\n\t\t\t\t.then(() => Logger.info('saved'))\n\t\t\t\t.catch((error) => Logger.error('not saved', { error }))\n\t\t\t\t.then(() => (this.savingToCloud = false))\n\t\t},\n\t\tdownloadZip() {\n\t\t\twindow.location = this.zipUrl\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\">\n.attachments {\n\twidth: 300px;\n}\n\n/* show icon + text for Download all button\n\t\tas well as when there is only one attachment */\n.attachments-button-wrapper {\n\ttext-align: center;\n}\n.attachments-save-to-cloud {\n\tdisplay: inline-block;\n\tmargin: 16px;\n\tbackground-position: 16px center;\n\tpadding: 12px;\n\tpadding-left: 44px;\n}\n.oc-dialog {\n\tz-index: 10000000;\n}\n</style>\n","import { render, staticRenderFns } from \"./MessageAttachment.vue?vue&type=template&id=473b0a1e&scoped=true&\"\nimport script from \"./MessageAttachment.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageAttachment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageAttachment.vue?vue&type=style&index=0&id=473b0a1e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"473b0a1e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"attachment\",on:{\"click\":_vm.download}},[(_vm.isImage)?_c('img',{staticClass:\"mail-attached-image\",attrs:{\"src\":_vm.url}}):_vm._e(),_vm._v(\" \"),_c('img',{staticClass:\"attachment-icon\",attrs:{\"src\":_vm.mimeUrl}}),_vm._v(\" \"),_c('span',{staticClass:\"attachment-name\",attrs:{\"title\":_vm.label}},[_vm._v(_vm._s(_vm.name)+\"\\n\\t\\t\"),_c('span',{staticClass:\"attachment-size\"},[_vm._v(\"(\"+_vm._s(_vm.humanReadable(_vm.size))+\")\")])]),_vm._v(\" \"),(_vm.isCalendarEvent)?_c('button',{staticClass:\"button attachment-import calendar\",class:{'icon-add': !_vm.loadingCalendars, 'icon-loading-small': _vm.loadingCalendars},attrs:{\"disabled\":_vm.loadingCalendars,\"title\":_vm.t('mail', 'Import into calendar')},on:{\"click\":function($event){$event.stopPropagation();return _vm.loadCalendars.apply(null, arguments)}}}):_vm._e(),_vm._v(\" \"),_c('button',{staticClass:\"button icon-download attachment-download\",attrs:{\"title\":_vm.t('mail', 'Download attachment')}}),_vm._v(\" \"),_c('button',{staticClass:\"attachment-save-to-cloud\",class:{'icon-folder': !_vm.savingToCloud, 'icon-loading-small': _vm.savingToCloud},attrs:{\"disabled\":_vm.savingToCloud,\"title\":_vm.t('mail', 'Save to Files')},on:{\"click\":function($event){$event.stopPropagation();return _vm.saveToCloud.apply(null, arguments)}}}),_vm._v(\" \"),_c('div',{directives:[{name:\"on-click-outside\",rawName:\"v-on-click-outside\",value:(_vm.closeCalendarPopover),expression:\"closeCalendarPopover\"}],staticClass:\"popovermenu bubble attachment-import-popover hidden\",class:{open: _vm.showCalendarPopover}},[_c('PopoverMenu',{attrs:{\"menu\":_vm.calendarMenuEntries}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachments.vue?vue&type=style&index=0&lang=scss&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./MessageAttachments.vue?vue&type=template&id=c7439190&\"\nimport script from \"./MessageAttachments.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageAttachments.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageAttachments.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mail-message-attachments\"},[_c('div',{staticClass:\"attachments\"},_vm._l((_vm.attachments),function(attachment){return _c('MessageAttachment',{key:attachment.id,attrs:{\"id\":attachment.id,\"file-name\":attachment.fileName,\"size\":attachment.size,\"url\":attachment.downloadUrl,\"is-image\":attachment.isImage,\"is-calendar-event\":attachment.isCalendarEvent,\"mime\":attachment.mime,\"mime-url\":attachment.mimeUrl}})}),1),_vm._v(\" \"),(_vm.moreThanOne)?_c('p',{staticClass:\"attachments-button-wrapper\"},[_c('button',{staticClass:\"attachments-save-to-cloud\",class:{'icon-folder': !_vm.savingToCloud, 'icon-loading-small': _vm.savingToCloud},attrs:{\"disabled\":_vm.savingToCloud},on:{\"click\":_vm.saveAll}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Save all to Files'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('button',{staticClass:\"attachments-save-to-cloud icon-folder\",on:{\"click\":_vm.downloadZip}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Download Zip'))+\"\\n\\t\\t\")])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MdnRequest.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MdnRequest.vue?vue&type=script&lang=js&\"","<template>\n\t<div v-if=\"hasMdnRequest && !mdnSent\" class=\"mail-message-has-mdn-request\">\n\t\t{{\n\t\t\tt('mail', 'The sender of this message has asked to be notified when you read this message.')\n\t\t}}\n\t\t<button :disabled=\"loading\" @click=\"sendMdn\">\n\t\t\t{{ t('mail', 'Notify the sender') }}\n\t\t</button>\n\t</div>\n\t<div v-else-if=\"mdnSent\" class=\"mail-message-has-mdn-request\">\n\t\t{{\n\t\t\tt('mail', 'You sent a read confirmation to the sender of this message.')\n\t\t}}\n\t</div>\n</template>\n\n<script>\nimport logger from '../logger'\nimport { sendMdn } from '../service/MessageService'\nimport { showError } from '@nextcloud/dialogs'\n\nexport default {\n\tname: 'MdnRequest',\n\tprops: {\n\t\tmessage: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\thasMdnRequest: this.message.dispositionNotificationTo && this.message.dispositionNotificationTo.length > 0,\n\t\t\tloading: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tmdnSent() {\n\t\t\treturn this.message.flags.mdnsent\n\t\t},\n\t},\n\tmethods: {\n\t\tasync sendMdn() {\n\t\t\tthis.loading = true\n\t\t\tlogger.debug('send return receipt')\n\n\t\t\ttry {\n\t\t\t\tawait sendMdn(this.message.databaseId)\n\t\t\t\tthis.$store.commit('flagEnvelope', { envelope: this.message, flag: 'mdnsent', value: true })\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not send mdn', error)\n\t\t\t\tshowError(t('mail', 'Could not send mdn'))\n\t\t\t}\n\n\t\t\tthis.loading = false\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.mail-message-has-mdn-request {\n\twhite-space: normal;\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MdnRequest.vue?vue&type=style&index=0&id=3bf60f28&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./MdnRequest.vue?vue&type=template&id=3bf60f28&scoped=true&\"\nimport script from \"./MdnRequest.vue?vue&type=script&lang=js&\"\nexport * from \"./MdnRequest.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MdnRequest.vue?vue&type=style&index=0&id=3bf60f28&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3bf60f28\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.hasMdnRequest && !_vm.mdnSent)?_c('div',{staticClass:\"mail-message-has-mdn-request\"},[_vm._v(\"\\n\\t\"+_vm._s(_vm.t('mail', 'The sender of this message has asked to be notified when you read this message.'))+\"\\n\\t\"),_c('button',{attrs:{\"disabled\":_vm.loading},on:{\"click\":_vm.sendMdn}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Notify the sender'))+\"\\n\\t\")])]):(_vm.mdnSent)?_c('div',{staticClass:\"mail-message-has-mdn-request\"},[_vm._v(\"\\n\\t\"+_vm._s(_vm.t('mail', 'You sent a read confirmation to the sender of this message.'))+\"\\n\")]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageEncryptedBody.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageEncryptedBody.vue?vue&type=script&lang=js&\"","<template>\n\t<div>\n\t\t<div v-if=\"mailvelope\" id=\"mail-content\">\n\t\t\t<MdnRequest :message=\"message\" />\n\t\t</div>\n\t\t<span v-else>{{ t('mail', 'This message is encrypted with PGP. Install Mailvelope to decrypt it.') }}</span>\n\t</div>\n</template>\n\n<script>\nimport { getMailvelope } from '../crypto/mailvelope'\nimport MdnRequest from './MdnRequest'\n\nexport default {\n\tname: 'MessageEncryptedBody',\n\tcomponents: { MdnRequest },\n\tprops: {\n\t\tbody: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tfrom: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tmessage: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tmailvelope: false,\n\t\t}\n\t},\n\tasync mounted() {\n\t\tthis.mailvelope = await getMailvelope()\n\t\tthis.mailvelope.createDisplayContainer('#mail-content', this.body, undefined, {\n\t\t\tsenderAddress: this.from,\n\t\t})\n\t},\n}\n</script>\n\n<style scoped>\n#mail-content {\n\theight: 450px;\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageEncryptedBody.vue?vue&type=style&index=0&id=812ccd96&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./MessageEncryptedBody.vue?vue&type=template&id=812ccd96&scoped=true&\"\nimport script from \"./MessageEncryptedBody.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageEncryptedBody.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageEncryptedBody.vue?vue&type=style&index=0&id=812ccd96&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"812ccd96\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.mailvelope)?_c('div',{attrs:{\"id\":\"mail-content\"}},[_c('MdnRequest',{attrs:{\"message\":_vm.message}})],1):_c('span',[_vm._v(_vm._s(_vm.t('mail', 'This message is encrypted with PGP. Install Mailvelope to decrypt it.')))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div id=\"mail-content\">\n\t\t<MdnRequest :message=\"message\" />\n\t\t<div v-if=\"hasBlockedContent\" id=\"mail-message-has-blocked-content\" style=\"color: #000000\">\n\t\t\t{{ t('mail', 'The images have been blocked to protect your privacy.') }}\n\t\t\t<Actions default-icon=\"icon-toggle\" :menu-title=\"t('mail', 'Show')\">\n\t\t\t\t<ActionButton icon=\"icon-toggle\"\n\t\t\t\t\t@click=\"displayIframe\">\n\t\t\t\t\t{{ t('mail', 'Show images temporarily') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton icon=\"icon-toggle\"\n\t\t\t\t\t@click=\"onShowBlockedContent\">\n\t\t\t\t\t{{ t('mail', 'Always show images from {sender}', {sender: message.from[0].email}) }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton icon=\"icon-toggle\"\n\t\t\t\t\t@click=\"onShowBlockedContentForDomain\">\n\t\t\t\t\t{{ t('mail', 'Always show images from {domain}', {domain: getDomain()}) }}\n\t\t\t\t</ActionButton>\n\t\t\t</Actions>\n\t\t</div>\n\t\t<div v-if=\"loading\" class=\"icon-loading\" />\n\t\t<div id=\"message-container\" :class=\"{hidden: loading, scroll: !fullHeight}\">\n\t\t\t<iframe ref=\"iframe\"\n\t\t\t\tclass=\"message-frame\"\n\t\t\t\t:title=\"t('mail', 'Message frame')\"\n\t\t\t\t:src=\"url\"\n\t\t\t\tseamless\n\t\t\t\t@load=\"onMessageFrameLoad\" />\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { iframeResizer } from 'iframe-resizer'\nimport PrintScout from 'printscout'\nimport { trustSender } from '../service/TrustedSenderService'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\n\nimport logger from '../logger'\nimport MdnRequest from './MdnRequest'\nconst scout = new PrintScout()\n\nexport default {\n\tname: 'MessageHTMLBody',\n\tcomponents: {\n\t\tMdnRequest,\n\t\tActions,\n\t\tActionButton,\n\t},\n\tprops: {\n\t\turl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tfullHeight: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t\tmessage: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: true,\n\t\t\thasBlockedContent: false,\n\t\t\tisSenderTrusted: this.message.isSenderTrusted,\n\t\t}\n\t},\n\tbeforeMount() {\n\t\tscout.on('beforeprint', this.onBeforePrint)\n\t\tscout.on('afterprint', this.onAfterPrint)\n\t},\n\tmounted() {\n\t\tiframeResizer({}, this.$refs.iframe)\n\t},\n\tbeforeDestroy() {\n\t\tscout.off('beforeprint', this.onBeforePrint)\n\t\tscout.off('afterprint', this.onAfterPrint)\n\t\tthis.$refs.iframe.iFrameResizer.close()\n\t},\n\tmethods: {\n\t\tgetIframeDoc() {\n\t\t\tconst iframe = this.$refs.iframe\n\t\t\treturn iframe.contentDocument || iframe.contentWindow.document\n\t\t},\n\t\tonMessageFrameLoad() {\n\t\t\tconst iframeDoc = this.getIframeDoc()\n\t\t\tthis.hasBlockedContent\n\t\t\t\t= iframeDoc.querySelectorAll('[data-original-src]').length > 0\n\t\t\t\t|| iframeDoc.querySelectorAll('[data-original-style]').length > 0\n\t\t\t\t|| iframeDoc.querySelectorAll('style[data-original-content]').length > 0\n\n\t\t\tthis.loading = false\n\t\t\tif (this.isSenderTrusted) {\n\t\t\t\tthis.displayIframe()\n\t\t\t}\n\t\t},\n\t\tonAfterPrint() {\n\t\t\tthis.$refs.iframe.style.setProperty('height', '')\n\t\t},\n\t\tonBeforePrint() {\n\t\t\tthis.$refs.iframe.style.setProperty('height', `${this.getIframeDoc().body.scrollHeight}px`, 'important')\n\t\t},\n\t\tdisplayIframe() {\n\t\t\tconst iframeDoc = this.getIframeDoc()\n\t\t\tlogger.debug('showing external images')\n\t\t\tiframeDoc.querySelectorAll('[data-original-src]').forEach((node) => {\n\t\t\t\tnode.style.display = null\n\t\t\t\tnode.setAttribute('src', node.getAttribute('data-original-src'))\n\t\t\t})\n\t\t\tiframeDoc\n\t\t\t\t.querySelectorAll('[data-original-style]')\n\t\t\t\t.forEach((node) => node.setAttribute('style', node.getAttribute('data-original-style')))\n\t\t\tiframeDoc\n\t\t\t\t.querySelectorAll('style[data-original-content]')\n\t\t\t\t.forEach((node) => {\n\t\t\t\t\tnode.innerHTML = node.getAttribute('data-original-content')\n\t\t\t\t})\n\t\t\tthis.hasBlockedContent = false\n\t\t},\n\t\tasync onShowBlockedContent() {\n\t\t\tthis.displayIframe()\n\t\t\tawait trustSender(this.message.from[0].email, 'individual', true)\n\t\t},\n\t\tgetDomain() {\n\t\t\treturn this.message.from[0].email.split('@').pop()\n\t\t},\n\t\tasync onShowBlockedContentForDomain() {\n\t\t\tthis.displayIframe()\n\t\t\t// TODO: there might be more than one @ in an email address\n\t\t\tawait trustSender(this.getDomain(), 'domain', true)\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n// account for 8px margin on iframe body\n#mail-content {\n\tmargin-left: 48px;\n\tmargin-top: 2px;\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100%;\n\tbackground-color: #FFFFFF;\n}\n#mail-message-has-blocked-content {\n\tmargin-left: 8px;\n}\n\n#message-container {\n\tflex: 1;\n\tdisplay: flex;\n\tbackground-color: #FFFFFF;\n\n\t// TODO: collapse quoted text and remove inner scrollbar\n\t&.scroll {\n\t\tmax-height: 50vh;\n\t\toverflow-y: auto;\n\t}\n}\n::v-deep .icon-toggle {\n\tbackground-image: var(--icon-toggle-000) !important;\n}\n::v-deep .action-item__menutoggle--with-title {\n\tbackground-color: var(--color-background-hover) !important;\n}\n.message-frame {\n\twidth: 100%;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageHTMLBody.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageHTMLBody.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageHTMLBody.vue?vue&type=style&index=0&id=566bc156&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./MessageHTMLBody.vue?vue&type=template&id=566bc156&scoped=true&\"\nimport script from \"./MessageHTMLBody.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageHTMLBody.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageHTMLBody.vue?vue&type=style&index=0&id=566bc156&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"566bc156\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"mail-content\"}},[_c('MdnRequest',{attrs:{\"message\":_vm.message}}),_vm._v(\" \"),(_vm.hasBlockedContent)?_c('div',{staticStyle:{\"color\":\"#000000\"},attrs:{\"id\":\"mail-message-has-blocked-content\"}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'The images have been blocked to protect your privacy.'))+\"\\n\\t\\t\"),_c('Actions',{attrs:{\"default-icon\":\"icon-toggle\",\"menu-title\":_vm.t('mail', 'Show')}},[_c('ActionButton',{attrs:{\"icon\":\"icon-toggle\"},on:{\"click\":_vm.displayIframe}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Show images temporarily'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-toggle\"},on:{\"click\":_vm.onShowBlockedContent}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Always show images from {sender}', {sender: _vm.message.from[0].email}))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-toggle\"},on:{\"click\":_vm.onShowBlockedContentForDomain}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Always show images from {domain}', {domain: _vm.getDomain()}))+\"\\n\\t\\t\\t\")])],1)],1):_vm._e(),_vm._v(\" \"),(_vm.loading)?_c('div',{staticClass:\"icon-loading\"}):_vm._e(),_vm._v(\" \"),_c('div',{class:{hidden: _vm.loading, scroll: !_vm.fullHeight},attrs:{\"id\":\"message-container\"}},[_c('iframe',{ref:\"iframe\",staticClass:\"message-frame\",attrs:{\"title\":_vm.t('mail', 'Message frame'),\"src\":_vm.url,\"seamless\":\"\"},on:{\"load\":_vm.onMessageFrameLoad}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div id=\"mail-content\">\n\t\t<MdnRequest :message=\"message\" />\n\t\t<div id=\"message-container\" v-html=\"nl2br(enhancedBody)\" />\n\t\t<details v-if=\"signature\" class=\"mail-signature\">\n\t\t\t<summary v-html=\"nl2br(signatureSummaryAndBody.summary)\" />\n\t\t\t<span v-html=\"nl2br(signatureSummaryAndBody.body)\" />\n\t\t</details>\n\t</div>\n</template>\n\n<script>\nimport MdnRequest from './MdnRequest'\nconst regFirstParagraph = /(.+\\n\\r?)+(\\n\\r?)+/\n\nexport default {\n\tname: 'MessagePlainTextBody',\n\tcomponents: { MdnRequest },\n\tprops: {\n\t\tbody: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tsignature: {\n\t\t\ttype: String,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t\tmessage: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t},\n\tcomputed: {\n\t\tenhancedBody() {\n\t\t\treturn this.body.replace(/(&gt;.*\\n?)+/g, (match) => {\n\t\t\t\treturn `<details class=\"quoted-text\"><summary>${t('mail', 'Quoted text')}</summary>${match}</details>`\n\t\t\t})\n\t\t},\n\t\tsignatureSummaryAndBody() {\n\t\t\tconst matches = this.signature.trim().match(regFirstParagraph)\n\n\t\t\tif (matches && matches[0]) {\n\t\t\t\treturn {\n\t\t\t\t\tsummary: matches[0],\n\t\t\t\t\tbody: this.signature.substring(matches[0].length),\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst lines = this.signature.trim().split(/\\r?\\n/)\n\t\t\treturn {\n\t\t\t\tsummary: lines[0],\n\t\t\t\tbody: lines.slice(1).join('\\n'),\n\t\t\t}\n\t\t},\n\t\tsignatureSummary() {\n\t\t\tconsole.info(this.signature.match(regFirstParagraph))\n\n\t\t\treturn this.signatureSummaryAndBody.summary\n\t\t},\n\t},\n\tmethods: {\n\t\tnl2br(str) {\n\t\t\treturn str.replace(/(\\r\\n|\\n\\r|\\n|\\r)/g, '<br />')\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\">\n.quoted-text {\n\tcolor: var(--color-text-maxcontrast)\n}\n</style>\n<style lang=\"scss\" scoped>\n#mail-content, .mail-signature {\n\twhite-space: pre-wrap;\n}\n.mail-signature, .quoted {\n\tcolor: var(--color-text-maxcontrast)\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=style&index=0&lang=scss&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=style&index=1&id=6bd2c088&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./MessagePlainTextBody.vue?vue&type=template&id=6bd2c088&scoped=true&\"\nimport script from \"./MessagePlainTextBody.vue?vue&type=script&lang=js&\"\nexport * from \"./MessagePlainTextBody.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessagePlainTextBody.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./MessagePlainTextBody.vue?vue&type=style&index=1&id=6bd2c088&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6bd2c088\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"mail-content\"}},[_c('MdnRequest',{attrs:{\"message\":_vm.message}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"message-container\"},domProps:{\"innerHTML\":_vm._s(_vm.nl2br(_vm.enhancedBody))}}),_vm._v(\" \"),(_vm.signature)?_c('details',{staticClass:\"mail-signature\"},[_c('summary',{domProps:{\"innerHTML\":_vm._s(_vm.nl2br(_vm.signatureSummaryAndBody.summary))}}),_vm._v(\" \"),_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.nl2br(_vm.signatureSummaryAndBody.body))}})]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div :class=\"[message.hasHtmlBody ? 'mail-message-body mail-message-body-html' : 'mail-message-body']\"\n\t\trole=\"region\"\n\t\t:aria-label=\"t('mail','Message body')\">\n\t\t<div v-if=\"message.itineraries.length > 0\" class=\"message-itinerary\">\n\t\t\t<Itinerary :entries=\"message.itineraries\" :message-id=\"message.messageId\" />\n\t\t</div>\n\t\t<MessageHTMLBody v-if=\"message.hasHtmlBody\"\n\t\t\t:url=\"htmlUrl\"\n\t\t\t:message=\"message\"\n\t\t\t:full-height=\"fullHeight\" />\n\t\t<MessageEncryptedBody v-else-if=\"isEncrypted\"\n\t\t\t:body=\"message.body\"\n\t\t\t:from=\"from\"\n\t\t\t:message=\"message\" />\n\t\t<MessagePlainTextBody v-else\n\t\t\t:body=\"message.body\"\n\t\t\t:signature=\"message.signature\"\n\t\t\t:message=\"message\" />\n\t\t<Popover v-if=\"message.attachments[0]\" class=\"attachment-popover\">\n\t\t\t<Actions slot=\"trigger\">\n\t\t\t\t<ActionButton icon=\"icon-public icon-attachment\">\n\t\t\t\t\t{{ t('mail', 'Attachments') }}\n\t\t\t\t</ActionButton>\n\t\t\t</Actions>\n\t\t\t<MessageAttachments v-close-popover=\"true\" :attachments=\"message.attachments\" :envelope=\"envelope\" />\n\t\t</Popover>\n\t\t<div id=\"reply-composer\" />\n\t</div>\n</template>\n\n<script>\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport { generateUrl } from '@nextcloud/router'\nimport Popover from '@nextcloud/vue/dist/Components/Popover'\n\nimport { html, plain } from '../util/text'\nimport { isPgpgMessage } from '../crypto/pgp'\nimport Itinerary from './Itinerary'\nimport MessageAttachments from './MessageAttachments'\nimport MessageEncryptedBody from './MessageEncryptedBody'\nimport MessageHTMLBody from './MessageHTMLBody'\nimport MessagePlainTextBody from './MessagePlainTextBody'\n\nexport default {\n\tname: 'Message',\n\tcomponents: {\n\t\tActions,\n\t\tActionButton,\n\t\tItinerary,\n\t\tMessageAttachments,\n\t\tMessageEncryptedBody,\n\t\tMessageHTMLBody,\n\t\tMessagePlainTextBody,\n\t\tPopover,\n\t},\n\tprops: {\n\t\tenvelope: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t\tmessage: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t\tfullHeight: {\n\t\t\trequired: false,\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomputed: {\n\t\tfrom() {\n\t\t\treturn this.message.from.length === 0 ? '?' : this.message.from[0].label || this.message.from[0].email\n\t\t},\n\t\thtmlUrl() {\n\t\t\treturn generateUrl('/apps/mail/api/messages/{id}/html', {\n\t\t\t\tid: this.envelope.databaseId,\n\t\t\t})\n\t\t},\n\t\tisEncrypted() {\n\t\t\treturn isPgpgMessage(this.message.hasHtmlBody ? html(this.message.body) : plain(this.message.body))\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.v-popover > .trigger > .action-item {\n\tborder-radius: 22px;\n\tbackground-color: var(--color-background-darker);\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=style&index=0&id=106a4f26&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./Message.vue?vue&type=template&id=106a4f26&scoped=true&\"\nimport script from \"./Message.vue?vue&type=script&lang=js&\"\nexport * from \"./Message.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Message.vue?vue&type=style&index=0&id=106a4f26&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"106a4f26\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:[_vm.message.hasHtmlBody ? 'mail-message-body mail-message-body-html' : 'mail-message-body'],attrs:{\"role\":\"region\",\"aria-label\":_vm.t('mail','Message body')}},[(_vm.message.itineraries.length > 0)?_c('div',{staticClass:\"message-itinerary\"},[_c('Itinerary',{attrs:{\"entries\":_vm.message.itineraries,\"message-id\":_vm.message.messageId}})],1):_vm._e(),_vm._v(\" \"),(_vm.message.hasHtmlBody)?_c('MessageHTMLBody',{attrs:{\"url\":_vm.htmlUrl,\"message\":_vm.message,\"full-height\":_vm.fullHeight}}):(_vm.isEncrypted)?_c('MessageEncryptedBody',{attrs:{\"body\":_vm.message.body,\"from\":_vm.from,\"message\":_vm.message}}):_c('MessagePlainTextBody',{attrs:{\"body\":_vm.message.body,\"signature\":_vm.message.signature,\"message\":_vm.message}}),_vm._v(\" \"),(_vm.message.attachments[0])?_c('Popover',{staticClass:\"attachment-popover\"},[_c('Actions',{attrs:{\"slot\":\"trigger\"},slot:\"trigger\"},[_c('ActionButton',{attrs:{\"icon\":\"icon-public icon-attachment\"}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Attachments'))+\"\\n\\t\\t\\t\")])],1),_vm._v(\" \"),_c('MessageAttachments',{directives:[{name:\"close-popover\",rawName:\"v-close-popover\",value:(true),expression:\"true\"}],attrs:{\"attachments\":_vm.message.attachments,\"envelope\":_vm.envelope}})],1):_vm._e(),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"reply-composer\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuEnvelope.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuEnvelope.vue?vue&type=script&lang=js&\"","<!-- Standard Actions menu for Envelopes -->\n<template>\n\t<div>\n\t\t<Actions\n\t\t\tmenu-align=\"right\"\n\t\t\tevent=\"\"\n\t\t\t@click.native.prevent>\n\t\t\t<ActionRouter v-if=\"withReply\"\n\t\t\t\t:icon=\"hasMultipleRecipients ? 'icon-reply-all' : 'icon-reply'\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t:to=\"hasMultipleRecipients ? replyAllLink : replyOneLink\">\n\t\t\t\t{{ t('mail', 'Reply') }}\n\t\t\t</ActionRouter>\n\t\t\t<ActionRouter v-if=\"hasMultipleRecipients\"\n\t\t\t\ticon=\"icon-reply\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t:to=\"replyOneLink\">\n\t\t\t\t{{ t('mail', 'Reply to sender only') }}\n\t\t\t</ActionRouter>\n\t\t\t<ActionRouter icon=\"icon-forward\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t:to=\"forwardLink\">\n\t\t\t\t{{ t('mail', 'Forward') }}\n\t\t\t</ActionRouter>\n\t\t\t<ActionRouter icon=\"icon-add\"\n\t\t\t\t:to=\"{\n\t\t\t\t\tname: 'message',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tmailboxId: $route.params.mailboxId,\n\t\t\t\t\t\tthreadId: 'asNew',\n\t\t\t\t\t\tfilter: $route.params.filter,\n\t\t\t\t\t},\n\t\t\t\t\tquery: {\n\t\t\t\t\t\tmessageId: envelope.databaseId,\n\t\t\t\t\t},\n\t\t\t\t}\">\n\t\t\t\t{{ t('mail', 'Edit as new message') }}\n\t\t\t</ActionRouter>\n\t\t\t<ActionButton icon=\"icon-important\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click.prevent=\"onToggleImportant\">\n\t\t\t\t{{\n\t\t\t\t\tisImportant ? t('mail', 'Mark unimportant') : t('mail', 'Mark important')\n\t\t\t\t}}\n\t\t\t</ActionButton>\n\t\t\t<ActionButton :icon=\"iconFavorite\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click.prevent=\"onToggleFlagged\">\n\t\t\t\t{{\n\t\t\t\t\tenvelope.flags.flagged ? t('mail', 'Mark unfavorite') : t('mail', 'Mark favorite')\n\t\t\t\t}}\n\t\t\t</ActionButton>\n\t\t\t<ActionButton icon=\"icon-mail\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click.prevent=\"onToggleSeen\">\n\t\t\t\t{{\n\t\t\t\t\tenvelope.flags.seen ? t('mail', 'Mark unread') : t('mail', 'Mark read')\n\t\t\t\t}}\n\t\t\t</ActionButton>\n\t\t\t<ActionButton icon=\"icon-junk\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click.prevent=\"onToggleJunk\">\n\t\t\t\t{{\n\t\t\t\t\tenvelope.flags.junk ? t('mail', 'Mark not spam') : t('mail', 'Mark as spam')\n\t\t\t\t}}\n\t\t\t</ActionButton>\n\t\t\t<ActionButton\n\t\t\t\ticon=\"icon-tag\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click.prevent=\"onOpenTagModal\">\n\t\t\t\t{{ t('mail', 'Edit tags') }}\n\t\t\t</ActionButton>\n\t\t\t<ActionButton v-if=\"withSelect\"\n\t\t\t\ticon=\"icon-checkmark\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click.prevent=\"toggleSelected\">\n\t\t\t\t{{\n\t\t\t\t\tisSelected ? t('mail', 'Unselect') : t('mail', 'Select')\n\t\t\t\t}}\n\t\t\t</ActionButton>\n\t\t\t<ActionButton icon=\"icon-external\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click.prevent=\"onOpenMoveModal\">\n\t\t\t\t{{ t('mail', 'Move message') }}\n\t\t\t</ActionButton>\n\t\t\t<ActionButton v-if=\"withShowSource\"\n\t\t\t\t:icon=\"sourceLoading ? 'icon-loading-small' : 'icon-details'\"\n\t\t\t\t:disabled=\"sourceLoading\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click.prevent=\"onShowSourceModal\">\n\t\t\t\t{{ t('mail', 'View source') }}\n\t\t\t</ActionButton>\n\t\t\t<ActionLink v-if=\"debug\"\n\t\t\t\ticon=\"icon-download\"\n\t\t\t\t:download=\"threadingFileName\"\n\t\t\t\t:href=\"threadingFile\"\n\t\t\t\t:close-after-click=\"true\">\n\t\t\t\t{{ t('mail', 'Download thread data for debugging') }}\n\t\t\t</ActionLink>\n\t\t\t<ActionButton icon=\"icon-delete\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click.prevent=\"onDelete\">\n\t\t\t\t{{ t('mail', 'Delete message') }}\n\t\t\t</ActionButton>\n\t\t</Actions>\n\t\t<Modal v-if=\"showSourceModal\" class=\"source-modal\" @close=\"onCloseSourceModal\">\n\t\t\t<div class=\"source-modal-content\">\n\t\t\t\t<div class=\"section\">\n\t\t\t\t\t<h2>{{ t('mail', 'Message source') }}</h2>\n\t\t\t\t\t<pre class=\"message-source\">{{ rawMessage }}</pre>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Modal>\n\t\t<MoveModal v-if=\"showMoveModal\"\n\t\t\t:account=\"account\"\n\t\t\t:envelopes=\"[envelope]\"\n\t\t\t@move=\"onMove\"\n\t\t\t@close=\"onCloseMoveModal\" />\n\t\t<TagModal\n\t\t\tv-if=\"showTagModal\"\n\t\t\t:account=\"account\"\n\t\t\t:envelope=\"envelope\"\n\t\t\t@close=\"onCloseTagModal\" />\n\t</div>\n</template>\n\n<script>\nimport axios from '@nextcloud/axios'\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport ActionLink from '@nextcloud/vue/dist/Components/ActionLink'\nimport ActionRouter from '@nextcloud/vue/dist/Components/ActionRouter'\nimport { Base64 } from 'js-base64'\nimport { buildRecipients as buildReplyRecipients } from '../ReplyBuilder'\nimport { generateUrl } from '@nextcloud/router'\nimport logger from '../logger'\nimport { matchError } from '../errors/match'\nimport Modal from '@nextcloud/vue/dist/Components/Modal'\nimport TagModal from './TagModal'\nimport MoveModal from './MoveModal'\nimport NoTrashMailboxConfiguredError from '../errors/NoTrashMailboxConfiguredError'\nimport { showError } from '@nextcloud/dialogs'\n\nexport default {\n\tname: 'MenuEnvelope',\n\tcomponents: {\n\t\tActions,\n\t\tActionButton,\n\t\tActionLink,\n\t\tActionRouter,\n\t\tModal,\n\t\tMoveModal,\n\t\tTagModal,\n\t},\n\tprops: {\n\t\tenvelope: {\n\t\t\t// The envelope on which this menu will act\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tmailbox: {\n\t\t\t// It is just used to get the accountId when envelope doesn't have it\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tisSelected: {\n\t\t\t// Indicates if the envelope is currently selected\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\twithReply: {\n\t\t\t// \"Reply\" action should only appear in envelopes from the envelope list\n\t\t\t// (Because in thread envelopes, this action is already set as primary button of this menu)\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithSelect: {\n\t\t\t// \"Select\" action should only appear in envelopes from the envelope list\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithShowSource: {\n\t\t\t// \"Show source\" action should only appear in thread envelopes\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tdebug: window?.OC?.debug || false,\n\t\t\trawMessage: '', // Will hold the raw source of the message when requested\n\t\t\tsourceLoading: false,\n\t\t\tshowSourceModal: false,\n\t\t\tshowMoveModal: false,\n\t\t\tshowTagModal: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\taccount() {\n\t\t\tconst accountId = this.envelope.accountId ?? this.mailbox.accountId\n\t\t\treturn this.$store.getters.getAccount(accountId)\n\t\t},\n\t\thasMultipleRecipients() {\n\t\t\tif (!this.account) {\n\t\t\t\tconsole.error('account is undefined', {\n\t\t\t\t\taccountId: this.envelope.accountId,\n\t\t\t\t})\n\t\t\t}\n\t\t\tconst recipients = buildReplyRecipients(this.envelope, {\n\t\t\t\tlabel: this.account.name,\n\t\t\t\temail: this.account.emailAddress,\n\t\t\t})\n\t\t\treturn recipients.to.concat(recipients.cc).length > 1\n\t\t},\n\t\treplyOneLink() {\n\t\t\treturn {\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\tthreadId: 'reply',\n\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tmessageId: this.envelope.databaseId,\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\t\treplyAllLink() {\n\t\t\treturn {\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\tthreadId: 'replyAll',\n\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tmessageId: this.envelope.databaseId,\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\t\tforwardLink() {\n\t\t\treturn {\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\tthreadId: 'new',\n\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tmessageId: this.envelope.databaseId,\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\t\tthreadingFile() {\n\t\t\treturn `data:text/plain;base64,${Base64.encode(JSON.stringify({\n\t\t\t\tsubject: this.envelope.subject,\n\t\t\t\tmessageId: this.envelope.messageId,\n\t\t\t\tinReplyTo: this.envelope.inReplyTo,\n\t\t\t\treferences: this.envelope.references,\n\t\t\t\tthreadRootId: this.envelope.threadRootId,\n\t\t\t}, null, 2))}`\n\t\t},\n\t\tthreadingFileName() {\n\t\t\treturn `${this.envelope.databaseId}.json`\n\t\t},\n\t\ticonFavorite() {\n\t\t\treturn this.envelope.flags.flagged ? 'icon-favorite' : 'icon-starred'\n\t\t},\n\t\tisImportant() {\n\t\t\treturn this.$store.getters\n\t\t\t\t.getEnvelopeTags(this.envelope.databaseId)\n\t\t\t\t.some((tag) => tag.imapLabel === '$label1')\n\t\t},\n\t},\n\tmethods: {\n\t\tonToggleFlagged() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeFlagged', this.envelope)\n\t\t},\n\t\tonToggleImportant() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeImportant', this.envelope)\n\t\t},\n\t\tonToggleSeen() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeSeen', { envelope: this.envelope })\n\t\t},\n\t\tonToggleJunk() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeJunk', this.envelope)\n\t\t},\n\t\ttoggleSelected() {\n\t\t\tthis.$emit('update:selected')\n\t\t},\n\t\tasync onDelete() {\n\t\t\t// Remove from selection first\n\t\t\tif (this.withSelect) {\n\t\t\t\tthis.$emit('unselect')\n\t\t\t}\n\n\t\t\t// Delete\n\t\t\tthis.$emit('delete', this.envelope.databaseId)\n\n\t\t\tlogger.info(`deleting message ${this.envelope.databaseId}`)\n\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('deleteMessage', {\n\t\t\t\t\tid: this.envelope.databaseId,\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tshowError(await matchError(error, {\n\t\t\t\t\t[NoTrashMailboxConfiguredError.getName()]() {\n\t\t\t\t\t\treturn t('mail', 'No trash mailbox configured')\n\t\t\t\t\t},\n\t\t\t\t\tdefault(error) {\n\t\t\t\t\t\tlogger.error('could not delete message', error)\n\t\t\t\t\t\treturn t('mail', 'Could not delete message')\n\t\t\t\t\t},\n\t\t\t\t}))\n\t\t\t}\n\t\t},\n\t\tasync onShowSourceModal() {\n\t\t\tthis.sourceLoading = true\n\n\t\t\ttry {\n\t\t\t\tconst resp = await axios.get(\n\t\t\t\t\tgenerateUrl('/apps/mail/api/messages/{id}/source', {\n\t\t\t\t\t\tid: this.envelope.databaseId,\n\t\t\t\t\t})\n\t\t\t\t)\n\n\t\t\t\tthis.rawMessage = resp.data.source\n\t\t\t\tthis.showSourceModal = true\n\t\t\t} finally {\n\t\t\t\tthis.sourceLoading = false\n\t\t\t}\n\t\t},\n\t\tonCloseSourceModal() {\n\t\t\tthis.showSourceModal = false\n\t\t},\n\t\tonMove() {\n\t\t\tthis.$emit('move')\n\t\t},\n\t\tonOpenMoveModal() {\n\t\t\tthis.showMoveModal = true\n\t\t},\n\t\tonCloseMoveModal() {\n\t\t\tthis.showMoveModal = false\n\t\t},\n\t\tonOpenTagModal() {\n\t\t\tthis.showTagModal = true\n\t\t},\n\t\tonCloseTagModal() {\n\t\t\tthis.showTagModal = false\n\t\t},\n\t},\n}\n</script>\n<style lang=\"scss\" scoped>\n\t.source-modal {\n\t\t::v-deep .modal-container {\n\t\t\theight: 800px;\n\t\t}\n\n\t\t.source-modal-content {\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\toverflow-y: scroll !important;\n\t\t}\n\t}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuEnvelope.vue?vue&type=style&index=0&id=4870a97e&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./MenuEnvelope.vue?vue&type=template&id=4870a97e&scoped=true&\"\nimport script from \"./MenuEnvelope.vue?vue&type=script&lang=js&\"\nexport * from \"./MenuEnvelope.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MenuEnvelope.vue?vue&type=style&index=0&id=4870a97e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4870a97e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Actions',{attrs:{\"menu-align\":\"right\",\"event\":\"\"},nativeOn:{\"click\":function($event){$event.preventDefault();}}},[(_vm.withReply)?_c('ActionRouter',{attrs:{\"icon\":_vm.hasMultipleRecipients ? 'icon-reply-all' : 'icon-reply',\"close-after-click\":true,\"to\":_vm.hasMultipleRecipients ? _vm.replyAllLink : _vm.replyOneLink}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Reply'))+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.hasMultipleRecipients)?_c('ActionRouter',{attrs:{\"icon\":\"icon-reply\",\"close-after-click\":true,\"to\":_vm.replyOneLink}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Reply to sender only'))+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('ActionRouter',{attrs:{\"icon\":\"icon-forward\",\"close-after-click\":true,\"to\":_vm.forwardLink}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Forward'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('ActionRouter',{attrs:{\"icon\":\"icon-add\",\"to\":{\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: _vm.$route.params.mailboxId,\n\t\t\t\t\tthreadId: 'asNew',\n\t\t\t\t\tfilter: _vm.$route.params.filter,\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tmessageId: _vm.envelope.databaseId,\n\t\t\t\t},\n\t\t\t}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Edit as new message'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-important\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleImportant.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.isImportant ? _vm.t('mail', 'Mark unimportant') : _vm.t('mail', 'Mark important'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":_vm.iconFavorite,\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleFlagged.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.envelope.flags.flagged ? _vm.t('mail', 'Mark unfavorite') : _vm.t('mail', 'Mark favorite'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-mail\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleSeen.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.envelope.flags.seen ? _vm.t('mail', 'Mark unread') : _vm.t('mail', 'Mark read'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-junk\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleJunk.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.envelope.flags.junk ? _vm.t('mail', 'Mark not spam') : _vm.t('mail', 'Mark as spam'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-tag\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onOpenTagModal.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Edit tags'))+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.withSelect)?_c('ActionButton',{attrs:{\"icon\":\"icon-checkmark\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.toggleSelected.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.isSelected ? _vm.t('mail', 'Unselect') : _vm.t('mail', 'Select'))+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-external\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onOpenMoveModal.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Move message'))+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.withShowSource)?_c('ActionButton',{attrs:{\"icon\":_vm.sourceLoading ? 'icon-loading-small' : 'icon-details',\"disabled\":_vm.sourceLoading,\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onShowSourceModal.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'View source'))+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.debug)?_c('ActionLink',{attrs:{\"icon\":\"icon-download\",\"download\":_vm.threadingFileName,\"href\":_vm.threadingFile,\"close-after-click\":true}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Download thread data for debugging'))+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-delete\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onDelete.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Delete message'))+\"\\n\\t\\t\")])],1),_vm._v(\" \"),(_vm.showSourceModal)?_c('Modal',{staticClass:\"source-modal\",on:{\"close\":_vm.onCloseSourceModal}},[_c('div',{staticClass:\"source-modal-content\"},[_c('div',{staticClass:\"section\"},[_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'Message source')))]),_vm._v(\" \"),_c('pre',{staticClass:\"message-source\"},[_vm._v(_vm._s(_vm.rawMessage))])])])]):_vm._e(),_vm._v(\" \"),(_vm.showMoveModal)?_c('MoveModal',{attrs:{\"account\":_vm.account,\"envelopes\":[_vm.envelope]},on:{\"move\":_vm.onMove,\"close\":_vm.onCloseMoveModal}}):_vm._e(),_vm._v(\" \"),(_vm.showTagModal)?_c('TagModal',{attrs:{\"account\":_vm.account,\"envelope\":_vm.envelope},on:{\"close\":_vm.onCloseTagModal}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Moment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Moment.vue?vue&type=script&lang=js&\"","<template>\n\t<span class=\"live-relative-timestamp\" :data-timestamp=\"timestamp * 1000\" :title=\"title\">{{ formatted }}</span>\n</template>\n\n<script>\nimport moment from '@nextcloud/moment'\n\nexport default {\n\tname: 'Moment',\n\tprops: {\n\t\ttimestamp: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tformat: {\n\t\t\ttype: String,\n\t\t\tdefault: 'LLL',\n\t\t},\n\t},\n\tcomputed: {\n\t\ttitle() {\n\t\t\treturn moment.unix(this.timestamp).format(this.format)\n\t\t},\n\t\tformatted() {\n\t\t\treturn moment.unix(this.timestamp).fromNow()\n\t\t},\n\t},\n}\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ThreadEnvelope.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ThreadEnvelope.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"envelope\">\n\t\t<div class=\"envelope--header\"\n\t\t\t:class=\"{'list-item-style' : expanded }\">\n\t\t\t<Avatar v-if=\"envelope.from && envelope.from[0]\"\n\t\t\t\t:email=\"envelope.from[0].email\"\n\t\t\t\t:display-name=\"envelope.from[0].label\"\n\t\t\t\t:disable-tooltip=\"true\"\n\t\t\t\t:size=\"40\" />\n\t\t\t<div\n\t\t\t\tv-if=\"isImportant\"\n\t\t\t\tclass=\"app-content-list-item-star icon-important\"\n\t\t\t\t:data-starred=\"isImportant ? 'true' : 'false'\"\n\t\t\t\t@click.prevent=\"onToggleImportant\"\n\t\t\t\tv-html=\"importantSvg\" />\n\t\t\t<div\n\t\t\t\tv-if=\"envelope.flags.flagged\"\n\t\t\t\tclass=\"app-content-list-item-star icon-starred\"\n\t\t\t\t:data-starred=\"envelope.flags.flagged ? 'true' : 'false'\"\n\t\t\t\t@click.prevent=\"onToggleFlagged\" />\n\t\t\t<router-link\n\t\t\t\t:to=\"route\"\n\t\t\t\tevent=\"\"\n\t\t\t\tclass=\"left\"\n\t\t\t\t:class=\"{seen: envelope.flags.seen}\"\n\t\t\t\t@click.native.prevent=\"$emit('toggleExpand', $event)\">\n\t\t\t\t<span class=\"sender\">{{ envelope.from && envelope.from[0] ? envelope.from[0].label : '' }}</span>\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span class=\"preview\">\n\t\t\t\t\t\t<!-- TODO: instead of subject it should be shown the first line of the message #2666 -->\n\t\t\t\t\t\t{{ envelope.subject }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div v-for=\"tag in tags\"\n\t\t\t\t\t:key=\"tag.id\"\n\t\t\t\t\tclass=\"tag-group\">\n\t\t\t\t\t<div class=\"tag-group__bg\"\n\t\t\t\t\t\t:style=\"{'background-color': tag.color}\" />\n\t\t\t\t\t<span class=\"tag-group__label\"\n\t\t\t\t\t\t:style=\"{color: tag.color}\">{{ tag.displayName }} </span>\n\t\t\t\t</div>\n\t\t\t</router-link>\n\t\t\t<div class=\"right\">\n\t\t\t\t<Moment class=\"timestamp\" :timestamp=\"envelope.dateInt\" />\n\t\t\t\t<router-link\n\t\t\t\t\t:to=\"hasMultipleRecipients ? replyAllLink : replyOneLink\"\n\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t'icon-reply-all-white': hasMultipleRecipients,\n\t\t\t\t\t\t'icon-reply-white': !hasMultipleRecipients,\n\t\t\t\t\t\tprimary: expanded,\n\t\t\t\t\t}\"\n\t\t\t\t\tclass=\"button\">\n\t\t\t\t\t<span class=\"action-label\"> {{ t('mail', 'Reply') }}</span>\n\t\t\t\t</router-link>\n\t\t\t\t<MenuEnvelope class=\"app-content-list-item-menu\"\n\t\t\t\t\t:envelope=\"envelope\"\n\t\t\t\t\t:with-reply=\"false\"\n\t\t\t\t\t:with-select=\"false\"\n\t\t\t\t\t:with-show-source=\"true\"\n\t\t\t\t\t@delete=\"$emit('delete',envelope.databaseId)\" />\n\t\t\t</div>\n\t\t</div>\n\t\t<Loading v-if=\"loading\" />\n\t\t<Message v-else-if=\"message\"\n\t\t\t:envelope=\"envelope\"\n\t\t\t:message=\"message\"\n\t\t\t:full-height=\"fullHeight\" />\n\t\t<Error v-else-if=\"error\"\n\t\t\t:error=\"error && error.message ? error.message : t('mail', 'Not found')\"\n\t\t\t:message=\"errorMessage\"\n\t\t\t:data=\"error\"\n\t\t\trole=\"alert\" />\n\t</div>\n</template>\n<script>\nimport Error from './Error'\nimport Loading from './Loading'\nimport logger from '../logger'\nimport Message from './Message'\nimport MenuEnvelope from './MenuEnvelope'\nimport Moment from './Moment'\nimport Avatar from './Avatar'\nimport importantSvg from '../../img/important.svg'\nimport { buildRecipients as buildReplyRecipients } from '../ReplyBuilder'\n\nexport default {\n\tname: 'ThreadEnvelope',\n\tcomponents: {\n\t\tError,\n\t\tLoading,\n\t\tMenuEnvelope,\n\t\tMoment,\n\t\tMessage,\n\t\tAvatar,\n\t},\n\tprops: {\n\t\tenvelope: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t\tmailboxId: {\n\t\t\trequired: false,\n\t\t\ttype: [\n\t\t\t\tString,\n\t\t\t\tNumber,\n\t\t\t],\n\t\t\tdefault: undefined,\n\t\t},\n\t\texpanded: {\n\t\t\trequired: false,\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tfullHeight: {\n\t\t\trequired: false,\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: false,\n\t\t\terror: undefined,\n\t\t\tmessage: undefined,\n\t\t\timportantSvg,\n\t\t\tseenTimer: undefined,\n\t\t}\n\t},\n\tcomputed: {\n\t\taccount() {\n\t\t\treturn this.$store.getters.getAccount(this.envelope.accountId)\n\t\t},\n\t\thasMultipleRecipients() {\n\t\t\tif (!this.account) {\n\t\t\t\tconsole.error('account is undefined', {\n\t\t\t\t\taccountId: this.envelope.accountId,\n\t\t\t\t})\n\t\t\t}\n\t\t\tconst recipients = buildReplyRecipients(this.envelope, {\n\t\t\t\tlabel: this.account.name,\n\t\t\t\temail: this.account.emailAddress,\n\t\t\t})\n\t\t\treturn recipients.to.concat(recipients.cc).length > 1\n\t\t},\n\t\treplyOneLink() {\n\t\t\treturn {\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\tthreadId: 'reply',\n\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tmessageId: this.envelope.databaseId,\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\t\treplyAllLink() {\n\t\t\treturn {\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\tthreadId: 'replyAll',\n\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tmessageId: this.envelope.databaseId,\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\t\troute() {\n\t\t\treturn {\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.mailboxId || this.envelope.mailboxId,\n\t\t\t\t\tthreadId: this.envelope.databaseId,\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\t\tisImportant() {\n\t\t\treturn this.$store.getters\n\t\t\t\t.getEnvelopeTags(this.envelope.databaseId)\n\t\t\t\t.find((tag) => tag.imapLabel === '$label1')\n\t\t},\n\t\ttags() {\n\t\t\treturn this.$store.getters.getEnvelopeTags(this.envelope.databaseId).filter((tag) => tag.imapLabel !== '$label1')\n\t\t},\n\t},\n\twatch: {\n\t\texpanded(expanded) {\n\t\t\tif (expanded) {\n\t\t\t\tthis.fetchMessage()\n\t\t\t} else {\n\t\t\t\tthis.message = undefined\n\t\t\t}\n\t\t},\n\t},\n\tasync mounted() {\n\t\tif (this.expanded) {\n\t\t\tawait this.fetchMessage()\n\n\t\t\t// Only one envelope is expanded at the time of mounting so we can\n\t\t\t// assume that this is the relevant envelope to be scrolled to.\n\t\t\tthis.$nextTick(() => this.scrollToCurrentEnvelope())\n\t\t}\n\t},\n\tbeforeDestroy() {\n\t\tif (this.seenTimer !== undefined) {\n\t\t\tlogger.info('Navigating away before seenTimer delay, will not mark message as seen/read')\n\t\t\tclearTimeout(this.seenTimer)\n\t\t}\n\t},\n\tmethods: {\n\t\tasync fetchMessage() {\n\t\t\tthis.loading = true\n\n\t\t\tlogger.debug(`fetching thread message ${this.envelope.databaseId}`)\n\n\t\t\ttry {\n\t\t\t\tconst message = this.message = await this.$store.dispatch('fetchMessage', this.envelope.databaseId)\n\t\t\t\tlogger.debug(`message ${this.envelope.databaseId} fetched`, { message })\n\n\t\t\t\tif (!this.envelope.flags.seen) {\n\t\t\t\t\tlogger.info('Starting timer to mark message as seen/read')\n\t\t\t\t\tthis.seenTimer = setTimeout(() => {\n\t\t\t\t\t\tthis.$store.dispatch('toggleEnvelopeSeen', { envelope: this.envelope })\n\t\t\t\t\t\tthis.seenTimer = undefined\n\t\t\t\t\t}, 2000)\n\t\t\t\t}\n\n\t\t\t\tthis.loading = false\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('Could not fetch message', { error })\n\t\t\t}\n\t\t},\n\t\tscrollToCurrentEnvelope() {\n\t\t\t// Account for global navigation bar and thread header\n\t\t\tconst globalHeader = document.querySelector('#header').clientHeight\n\t\t\tconst threadHeader = document.querySelector('#mail-thread-header').clientHeight\n\t\t\tconst top = this.$el.getBoundingClientRect().top - globalHeader - threadHeader\n\t\t\twindow.scrollTo({ top })\n\t\t},\n\t\tonToggleImportant() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeImportant', this.envelope)\n\t\t},\n\t\tonToggleFlagged() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeFlagged', this.envelope)\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n\t.sender {\n\t\tmargin-left: 8px;\n\t}\n\n\t.right {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\talign-items: center;\n\t\tjustify-content: flex-end;\n\t\tmargin-left: 10px;\n\t\tmargin-right: 22px;\n\t\theight: 44px;\n\n\t\t.app-content-list-item-menu {\n\t\t\tmargin-left: 4px;\n\t\t}\n\n\t\t.timestamp {\n\t\t\tmargin-right: 10px;\n\t\t\tfont-size: small;\n\t\t\twhite-space: nowrap;\n\t\t\tmargin-bottom: 0;\n\t\t}\n\t}\n\t.button {\n\t\tcolor: var(--color-main-background);\n\t\t&:not(.active):not(.primary) {\n\t\t\tdisplay: none;\n\n\t\t\t&.primary {\n\t\t\t\tbackground-color: var(--color-primary);\n\t\t\t\topacity: 1;\n\t\t\t\tmargin-bottom: 0;\n\n\t\t\t}\n\t\t}\n\t}\n\t.avatardiv {\n\t\tdisplay: inline-block;\n\t\tmargin-bottom: -23px;\n\t}\n\t.subject {\n\t\tmargin-left: 8px;\n\t\tcursor: default;\n\t}\n\n\t.envelope {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\n\t.envelope--header {\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\tpadding: 10px;\n\t\tmargin-bottom: 3px;\n\t\tborder-radius: var(--border-radius);\n\n\t\t&:hover {\n\t\t\tbackground-color: var(--color-background-hover);\n\t\t\tborder-radius: 16px;\n\t\t}\n\t}\n\t.left {\n\t\tflex-grow: 1;\n\t}\n\t.icon-important {\n\t\t::v-deep path {\n\t\t\tfill: #ffcc00;\n\t\t\tstroke: var(--color-main-background);\n\t\t\tcursor: pointer;\n\t\t}\n\n\t\t&.app-content-list-item-star {\n\t\t\tbackground-image: none;\n\t\t\tposition: absolute;\n\t\t\topacity: 1;\n\t\t\twidth: 16px;\n\t\t\theight: 16px;\n\t\t\tmargin-left: -1px;\n\t\t\tdisplay: flex;\n\n\t\t\t&:hover,\n\t\t\t&:focus {\n\t\t\t\topacity: 0.5;\n\t\t\t}\n\t\t}\n\t}\n\t.app-content-list-item-star.icon-starred {\n\t\tdisplay: inline-block;\n\t\tposition: absolute;\n\t\tmargin-top: -2px;\n\t\tmargin-left: 27px;\n\t\tcursor: pointer;\n\t}\n\t.left:not(.seen) {\n\t\tfont-weight: bold;\n\t}\n\t.tag-group__label {\n\t\tmargin: 0 7px;\n\t\tz-index: 2;\n\t\tfont-size: calc(var(--default-font-size) * 0.8);\n\t\tfont-weight: bold;\n\t\tpadding-left: 2px;\n\t\tpadding-right: 2px;\n\t}\n\t.tag-group__bg {\n\t\tposition: absolute;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\topacity: 15%;\n\t}\n\t.tag-group {\n\t\tdisplay: inline-block;\n\t\tborder: 1px solid transparent;\n\t\tborder-radius: var(--border-radius-pill);\n\t\tposition: relative;\n\t\tmargin: 0 1px;\n\t\toverflow: hidden;\n\t\tleft: 4px;\n\t}\n\t.envelope--header.list-item-style {\n\t\tborder-radius: 16px;\n\t\tbackground-color: var(--color-primary-light);\n\t}\n</style>\n","import { render, staticRenderFns } from \"./Moment.vue?vue&type=template&id=4e73ee46&\"\nimport script from \"./Moment.vue?vue&type=script&lang=js&\"\nexport * from \"./Moment.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"live-relative-timestamp\",attrs:{\"data-timestamp\":_vm.timestamp * 1000,\"title\":_vm.title}},[_vm._v(_vm._s(_vm.formatted))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ThreadEnvelope.vue?vue&type=style&index=0&id=0737c023&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./ThreadEnvelope.vue?vue&type=template&id=0737c023&scoped=true&\"\nimport script from \"./ThreadEnvelope.vue?vue&type=script&lang=js&\"\nexport * from \"./ThreadEnvelope.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ThreadEnvelope.vue?vue&type=style&index=0&id=0737c023&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0737c023\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"envelope\"},[_c('div',{staticClass:\"envelope--header\",class:{'list-item-style' : _vm.expanded }},[(_vm.envelope.from && _vm.envelope.from[0])?_c('Avatar',{attrs:{\"email\":_vm.envelope.from[0].email,\"display-name\":_vm.envelope.from[0].label,\"disable-tooltip\":true,\"size\":40}}):_vm._e(),_vm._v(\" \"),(_vm.isImportant)?_c('div',{staticClass:\"app-content-list-item-star icon-important\",attrs:{\"data-starred\":_vm.isImportant ? 'true' : 'false'},domProps:{\"innerHTML\":_vm._s(_vm.importantSvg)},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleImportant.apply(null, arguments)}}}):_vm._e(),_vm._v(\" \"),(_vm.envelope.flags.flagged)?_c('div',{staticClass:\"app-content-list-item-star icon-starred\",attrs:{\"data-starred\":_vm.envelope.flags.flagged ? 'true' : 'false'},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleFlagged.apply(null, arguments)}}}):_vm._e(),_vm._v(\" \"),_c('router-link',{staticClass:\"left\",class:{seen: _vm.envelope.flags.seen},attrs:{\"to\":_vm.route,\"event\":\"\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.$emit('toggleExpand', $event)}}},[_c('span',{staticClass:\"sender\"},[_vm._v(_vm._s(_vm.envelope.from && _vm.envelope.from[0] ? _vm.envelope.from[0].label : ''))]),_vm._v(\" \"),_c('div',{staticClass:\"subject\"},[_c('span',{staticClass:\"preview\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.envelope.subject)+\"\\n\\t\\t\\t\\t\")])]),_vm._v(\" \"),_vm._l((_vm.tags),function(tag){return _c('div',{key:tag.id,staticClass:\"tag-group\"},[_c('div',{staticClass:\"tag-group__bg\",style:({'background-color': tag.color})}),_vm._v(\" \"),_c('span',{staticClass:\"tag-group__label\",style:({color: tag.color})},[_vm._v(_vm._s(tag.displayName)+\" \")])])})],2),_vm._v(\" \"),_c('div',{staticClass:\"right\"},[_c('Moment',{staticClass:\"timestamp\",attrs:{\"timestamp\":_vm.envelope.dateInt}}),_vm._v(\" \"),_c('router-link',{staticClass:\"button\",class:{\n\t\t\t\t\t'icon-reply-all-white': _vm.hasMultipleRecipients,\n\t\t\t\t\t'icon-reply-white': !_vm.hasMultipleRecipients,\n\t\t\t\t\tprimary: _vm.expanded,\n\t\t\t\t},attrs:{\"to\":_vm.hasMultipleRecipients ? _vm.replyAllLink : _vm.replyOneLink}},[_c('span',{staticClass:\"action-label\"},[_vm._v(\" \"+_vm._s(_vm.t('mail', 'Reply')))])]),_vm._v(\" \"),_c('MenuEnvelope',{staticClass:\"app-content-list-item-menu\",attrs:{\"envelope\":_vm.envelope,\"with-reply\":false,\"with-select\":false,\"with-show-source\":true},on:{\"delete\":function($event){return _vm.$emit('delete',_vm.envelope.databaseId)}}})],1)],1),_vm._v(\" \"),(_vm.loading)?_c('Loading'):(_vm.message)?_c('Message',{attrs:{\"envelope\":_vm.envelope,\"message\":_vm.message,\"full-height\":_vm.fullHeight}}):(_vm.error)?_c('Error',{attrs:{\"error\":_vm.error && _vm.error.message ? _vm.error.message : _vm.t('mail', 'Not found'),\"message\":_vm.errorMessage,\"data\":_vm.error,\"role\":\"alert\"}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Thread.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Thread.vue?vue&type=script&lang=js&\"","<template>\n\t<AppContentDetails id=\"mail-message\">\n\t\t<Loading v-if=\"loading\" />\n\t\t<template v-else>\n\t\t\t<div id=\"mail-thread-header\">\n\t\t\t\t<div id=\"mail-thread-header-fields\">\n\t\t\t\t\t<h2 :title=\"threadSubject\">\n\t\t\t\t\t\t{{ threadSubject }}\n\t\t\t\t\t</h2>\n\t\t\t\t\t<div ref=\"avatarHeader\" class=\"avatar-header\">\n\t\t\t\t\t\t<!-- Participants that can fit in the parent div -->\n\t\t\t\t\t\t<RecipientBubble v-for=\"participant in threadParticipants.slice(0, participantsToDisplay)\"\n\t\t\t\t\t\t\t:key=\"participant.email\"\n\t\t\t\t\t\t\t:email=\"participant.email\"\n\t\t\t\t\t\t\t:label=\"participant.label\" />\n\t\t\t\t\t\t<!-- Indicator to show that there are more participants than displayed -->\n\t\t\t\t\t\t<Popover v-if=\"threadParticipants.length > participantsToDisplay\"\n\t\t\t\t\t\t\tclass=\"avatar-more\">\n\t\t\t\t\t\t\t<span slot=\"trigger\" class=\"avatar-more\">\n\t\t\t\t\t\t\t\t{{ moreParticipantsString }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<RecipientBubble v-for=\"participant in threadParticipants.slice(participantsToDisplay)\"\n\t\t\t\t\t\t\t\t:key=\"participant.email\"\n\t\t\t\t\t\t\t\t:email=\"participant.email\"\n\t\t\t\t\t\t\t\t:label=\"participant.label\" />\n\t\t\t\t\t\t</Popover>\n\t\t\t\t\t\t<!-- Remaining participants, if any (Needed to have avatarHeader reactive) -->\n\t\t\t\t\t\t<RecipientBubble v-for=\"participant in threadParticipants.slice(participantsToDisplay)\"\n\t\t\t\t\t\t\t:key=\"participant.email\"\n\t\t\t\t\t\t\tclass=\"avatar-hidden\"\n\t\t\t\t\t\t\t:email=\"participant.email\"\n\t\t\t\t\t\t\t:label=\"participant.label\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<ThreadEnvelope v-for=\"env in thread\"\n\t\t\t\t:key=\"env.databaseId\"\n\t\t\t\t:envelope=\"env\"\n\t\t\t\t:mailbox-id=\"$route.params.mailboxId\"\n\t\t\t\t:expanded=\"expandedThreads.includes(env.databaseId)\"\n\t\t\t\t:full-height=\"thread.length === 1\"\n\t\t\t\t@delete=\"$emit('delete', env.databaseId)\"\n\t\t\t\t@move=\"onMove(env.databaseId)\"\n\t\t\t\t@toggleExpand=\"toggleExpand(env.databaseId)\" />\n\t\t</template>\n\t</AppContentDetails>\n</template>\n\n<script>\nimport AppContentDetails from '@nextcloud/vue/dist/Components/AppContentDetails'\nimport Popover from '@nextcloud/vue/dist/Components/Popover'\n\nimport { prop, uniqBy } from 'ramda'\nimport debounce from 'lodash/fp/debounce'\n\nimport { getRandomMessageErrorMessage } from '../util/ErrorMessageFactory'\nimport Loading from './Loading'\nimport logger from '../logger'\nimport RecipientBubble from './RecipientBubble'\nimport ThreadEnvelope from './ThreadEnvelope'\n\nexport default {\n\tname: 'Thread',\n\tcomponents: {\n\t\tRecipientBubble,\n\t\tAppContentDetails,\n\t\tLoading,\n\t\tThreadEnvelope,\n\t\tPopover,\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tloading: true,\n\t\t\tmessage: undefined,\n\t\t\terrorMessage: '',\n\t\t\terror: undefined,\n\t\t\texpandedThreads: [],\n\t\t\tparticipantsToDisplay: 999,\n\t\t\tresizeDebounced: debounce(500, this.updateParticipantsToDisplay),\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tmoreParticipantsString() {\n\t\t\t// Returns a number showing the number of thread participants that are not shown in the avatar-header\n\t\t\treturn `+${this.threadParticipants.length - this.participantsToDisplay}`\n\t\t},\n\t\tthreadId() {\n\t\t\treturn parseInt(this.$route.params.threadId, 10)\n\t\t},\n\t\tthread() {\n\t\t\tconst envelopes = this.$store.getters.getEnvelopeThread(this.threadId)\n\t\t\tconst envelope = envelopes.find(envelope => envelope.databaseId === this.threadId)\n\n\t\t\tif (envelope === undefined) {\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\tconst currentMailbox = this.$store.getters.getMailbox(envelope.mailboxId)\n\t\t\tconst trashMailbox = this.$store.getters.getMailboxes(currentMailbox.accountId).find(mailbox => mailbox.specialRole === 'trash')\n\n\t\t\tif (trashMailbox === undefined) {\n\t\t\t\treturn envelopes\n\t\t\t}\n\n\t\t\tif (currentMailbox.databaseId === trashMailbox.databaseId) {\n\t\t\t\treturn envelopes.filter(envelope => envelope.mailboxId === trashMailbox.databaseId)\n\t\t\t} else {\n\t\t\t\treturn envelopes.filter(envelope => envelope.mailboxId !== trashMailbox.databaseId)\n\t\t\t}\n\t\t},\n\t\tthreadParticipants() {\n\t\t\tconst recipients = this.thread.flatMap(envelope => {\n\t\t\t\treturn envelope.from.concat(envelope.to).concat(envelope.cc)\n\t\t\t})\n\t\t\treturn uniqBy(prop('email'), recipients)\n\t\t},\n\t\tthreadSubject() {\n\t\t\tconst thread = this.thread\n\t\t\tif (thread.length === 0) {\n\t\t\t\tconsole.warn('thread is empty')\n\t\t\t\treturn ''\n\t\t\t}\n\t\t\treturn thread[0].subject\n\t\t},\n\t},\n\twatch: {\n\t\t$route(to, from) {\n\t\t\tif (\n\t\t\t\tfrom.name === to.name\n\t\t\t\t&& from.params.mailboxId === to.params.mailboxId\n\t\t\t\t&& from.params.threadId === to.params.threadId\n\t\t\t\t&& from.params.filter === to.params.filter\n\t\t\t) {\n\t\t\t\tlogger.debug('navigated but the thread is still the same')\n\t\t\t\treturn\n\t\t\t}\n\t\t\tlogger.debug('navigated to another thread', { to, from })\n\t\t\tthis.resetThread()\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.resetThread()\n\t\twindow.addEventListener('resize', this.resizeDebounced)\n\t},\n\tbeforeDestroy() {\n\t\twindow.removeEventListener('resize', this.resizeDebounced)\n\t},\n\tmethods: {\n\t\tupdateParticipantsToDisplay() {\n\t\t\t// Wait until everything is in place\n\t\t\tif (!this.$refs.avatarHeader || !this.threadParticipants) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Compute the number of participants to display depending on the width available\n\t\t\tconst avatarHeader = this.$refs.avatarHeader\n\t\t\tconst maxWidth = (avatarHeader.clientWidth - 100) // Reserve 100px for the avatar-more span\n\t\t\tlet childrenWidth = 0\n\t\t\tlet fits = 0\n\t\t\tlet idx = 0\n\t\t\twhile (childrenWidth < maxWidth && fits < this.threadParticipants.length) {\n\t\t\t\t// Skipping the 'avatar-more' span\n\t\t\t\tif (avatarHeader.childNodes[idx].clientWidth === undefined) {\n\t\t\t\t\tidx += 3\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\t\t\t\tchildrenWidth += avatarHeader.childNodes[idx].clientWidth\n\t\t\t\tfits++\n\t\t\t\tidx++\n\t\t\t}\n\n\t\t\tif (childrenWidth > maxWidth) {\n\t\t\t\t// There's not enough space to show all thread participants\n\t\t\t\tif (fits > 1) {\n\t\t\t\t\tthis.participantsToDisplay = fits - 1\n\t\t\t\t} else if (fits === 0) {\n\t\t\t\t\tthis.participantsToDisplay = 1\n\t\t\t\t} else {\n\t\t\t\t\tthis.participantsToDisplay = fits\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// There's enough space to show all thread participants\n\t\t\t\tthis.participantsToDisplay = this.threadParticipants.length\n\t\t\t}\n\t\t},\n\t\ttoggleExpand(threadId) {\n\t\t\tif (!this.expandedThreads.includes(threadId)) {\n\t\t\t\tconsole.debug(`expand thread ${threadId}`)\n\t\t\t\tthis.expandedThreads.push(threadId)\n\t\t\t} else {\n\t\t\t\tconsole.debug(`collapse thread ${threadId}`)\n\t\t\t\tthis.expandedThreads = this.expandedThreads.filter(t => t !== threadId)\n\t\t\t}\n\t\t},\n\t\tonMove(threadId) {\n\t\t\tif (threadId === this.threadId) {\n\t\t\t\tthis.$router.replace({\n\t\t\t\t\tname: 'mailbox',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tthis.expandedThreads = this.expandedThreads.filter((id) => id !== threadId)\n\t\t\t\tthis.fetchThread()\n\t\t\t}\n\t\t},\n\t\tasync resetThread() {\n\t\t\tthis.expandedThreads = [this.threadId]\n\t\t\tawait this.fetchThread()\n\t\t\tthis.updateParticipantsToDisplay()\n\t\t},\n\t\tasync fetchThread() {\n\t\t\tthis.loading = true\n\t\t\tthis.errorMessage = ''\n\t\t\tthis.error = undefined\n\t\t\tconst threadId = this.threadId\n\n\t\t\ttry {\n\t\t\t\tconst thread = await this.$store.dispatch('fetchThread', threadId)\n\t\t\t\tlogger.debug(`thread for envelope ${threadId} fetched`, { thread })\n\t\t\t\t// TODO: add timeout so that envelope isn't flagged when only viewed\n\t\t\t\t//       for a few seconds\n\t\t\t\tif (threadId !== parseInt(this.$route.params.threadId, 10)) {\n\t\t\t\t\tlogger.debug(\"User navigated away, loaded envelope won't be shown nor flagged as seen\", {\n\t\t\t\t\t\toldId: threadId,\n\t\t\t\t\t\tnewId: this.$route.params.threadId,\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tif (thread.length === 0) {\n\t\t\t\t\tlogger.info('thread could not be found and is empty', { threadId })\n\t\t\t\t\tthis.errorMessage = getRandomMessageErrorMessage()\n\t\t\t\t\tthis.loading = false\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tthis.loading = false\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not load envelope thread', { threadId, error })\n\t\t\t\tif (error.isError) {\n\t\t\t\t\tthis.errorMessage = t('mail', 'Could not load your message thread')\n\t\t\t\t\tthis.error = error\n\t\t\t\t\tthis.loading = false\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\">\n#mail-message {\n\tflex-grow: 1;\n\n\t.icon-loading {\n\t\t&:only-child:after {\n\t\t\tmargin-top: 20px;\n\t\t}\n\t}\n}\n\n.mail-message-body {\n\tflex: 1;\n\tmargin-bottom: 60px;\n\tposition: relative;\n}\n\n#mail-thread-header {\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 30px 0;\n\t// somehow ios doesn't care about this !important rule\n\t// so we have to manually set left/right padding to chidren\n\t// for 100% to be used\n\tbox-sizing: content-box !important;\n\theight: 44px;\n\twidth: 100%;\n\n\tz-index: 100;\n\tposition: fixed; // ie fallback\n\tposition: -webkit-sticky; // ios/safari fallback\n\tposition: sticky;\n\ttop: 0;\n\tbackground: -webkit-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255,255,255,0));\n\tbackground: -o-linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\n\tbackground: -moz-linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\n\tbackground: linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\n}\n\n#mail-thread-header-fields {\n\t// initial width\n\twidth: 0;\n\tpadding-left: 60px;\n\t// grow and try to fill 100%\n\tflex: 1 1 auto;\n\th2,\n\tp {\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tpadding-bottom: 7px;\n\t\tmargin-bottom: 0;\n\t}\n\n\t.transparency {\n\t\topacity: 0.6;\n\t\ta {\n\t\t\tfont-weight: bold;\n\t\t}\n\t}\n}\n\n.attachment-popover {\n\tposition: sticky;\n\tbottom: 12px;\n\ttext-align: center;\n}\n\n.tooltip-inner {\n\ttext-align: left;\n}\n\n#mail-content {\n\tmargin: 10px 38px 50px 60px;\n\n\t.mail-message-body-html & {\n\t\tmargin-bottom: -44px; // accounting for the sticky attachment button\n\t}\n}\n\n#mail-content iframe {\n\twidth: 100%;\n}\n\n#show-images-text {\n\tdisplay: none;\n}\n\n#mail-content a,\n.mail-signature a {\n\tcolor: #07d;\n\tborder-bottom: 1px dotted #07d;\n\ttext-decoration: none;\n\tword-wrap: break-word;\n}\n\n.icon-reply-white,\n.icon-reply-all-white {\n\theight: 44px;\n\tmin-width: 44px;\n\tmargin: 0;\n\tpadding: 9px 18px 10px 32px;\n}\n\n/* Show action button label and move icon to the left\n   on screens larger than 600px */\n@media only screen and (max-width: 600px) {\n\t.action-label {\n\t\tdisplay: none;\n\t}\n}\n@media only screen and (min-width: 600px) {\n\t.icon-reply-white,\n\t.icon-reply-all-white {\n\t\tbackground-position: 12px center;\n\t}\n}\n\n@media print {\n\t#mail-thread-header-fields {\n\t\tposition: relative;\n\t}\n\n\t#header,\n\t.app-navigation,\n\t#reply-composer,\n\t#forward-button,\n\t#mail-message-has-blocked-content,\n\t.app-content-list,\n\t.message-composer,\n\t.mail-message-attachments {\n\t\tdisplay: none !important;\n\t}\n\t.app-content {\n\t\tmargin-left: 0 !important;\n\t}\n\t.mail-message-body {\n\t\tmargin-bottom: 0 !important;\n\t}\n}\n\n.message-source {\n\tfont-family: monospace;\n\twhite-space: pre-wrap;\n\tuser-select: text;\n}\n\n.avatar-header {\n\tmax-height: 24px;\n\toverflow: hidden;\n}\n.avatar-more {\n\tdisplay: inline;\n\tbackground-color: var(--color-background-dark);\n\tpadding: 0px 0px 1px 1px;\n\tborder-radius: 10px;\n\tcursor: pointer;\n}\n.avatar-hidden {\n\tvisibility: hidden;\n}\n.popover__wrapper {\n\tmax-width: 500px;\n}\n\n.app-content-list-item-star.icon-starred {\n\tdisplay: none;\n}\n.user-bubble__wrapper {\n\tmargin-right: 4px;\n}\n.user-bubble__title {\n\tcursor: pointer;\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Thread.vue?vue&type=style&index=0&lang=scss&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./Thread.vue?vue&type=template&id=50600a36&\"\nimport script from \"./Thread.vue?vue&type=script&lang=js&\"\nexport * from \"./Thread.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Thread.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppContentDetails',{attrs:{\"id\":\"mail-message\"}},[(_vm.loading)?_c('Loading'):[_c('div',{attrs:{\"id\":\"mail-thread-header\"}},[_c('div',{attrs:{\"id\":\"mail-thread-header-fields\"}},[_c('h2',{attrs:{\"title\":_vm.threadSubject}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.threadSubject)+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{ref:\"avatarHeader\",staticClass:\"avatar-header\"},[_vm._l((_vm.threadParticipants.slice(0, _vm.participantsToDisplay)),function(participant){return _c('RecipientBubble',{key:participant.email,attrs:{\"email\":participant.email,\"label\":participant.label}})}),_vm._v(\" \"),(_vm.threadParticipants.length > _vm.participantsToDisplay)?_c('Popover',{staticClass:\"avatar-more\"},[_c('span',{staticClass:\"avatar-more\",attrs:{\"slot\":\"trigger\"},slot:\"trigger\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.moreParticipantsString)+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_vm._l((_vm.threadParticipants.slice(_vm.participantsToDisplay)),function(participant){return _c('RecipientBubble',{key:participant.email,attrs:{\"email\":participant.email,\"label\":participant.label}})})],2):_vm._e(),_vm._v(\" \"),_vm._l((_vm.threadParticipants.slice(_vm.participantsToDisplay)),function(participant){return _c('RecipientBubble',{key:participant.email,staticClass:\"avatar-hidden\",attrs:{\"email\":participant.email,\"label\":participant.label}})})],2)])]),_vm._v(\" \"),_vm._l((_vm.thread),function(env){return _c('ThreadEnvelope',{key:env.databaseId,attrs:{\"envelope\":env,\"mailbox-id\":_vm.$route.params.mailboxId,\"expanded\":_vm.expandedThreads.includes(env.databaseId),\"full-height\":_vm.thread.length === 1},on:{\"delete\":function($event){return _vm.$emit('delete', env.databaseId)},\"move\":function($event){return _vm.onMove(env.databaseId)},\"toggleExpand\":function($event){return _vm.toggleExpand(env.databaseId)}}})})]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailboxThread.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailboxThread.vue?vue&type=script&lang=js&\"","<template>\n\t<AppContent pane-config-key=\"mail\" :show-details=\"isThreadShown\" @update:showDetails=\"hideMessage\">\n\t\t<template slot=\"list\">\n\t\t\t<AppContentList\n\t\t\t\tv-infinite-scroll=\"onScroll\"\n\t\t\t\tv-shortkey.once=\"shortkeys\"\n\t\t\t\tinfinite-scroll-immediate-check=\"false\"\n\t\t\t\t:show-details=\"showThread\"\n\t\t\t\t:infinite-scroll-disabled=\"false\"\n\t\t\t\t:infinite-scroll-distance=\"10\"\n\t\t\t\trole=\"heading\"\n\t\t\t\t:aria-level=\"2\"\n\t\t\t\t@shortkey.native=\"onShortcut\">\n\t\t\t\t<Mailbox\n\t\t\t\t\tv-if=\"!mailbox.isPriorityInbox\"\n\t\t\t\t\t:account=\"account\"\n\t\t\t\t\t:mailbox=\"mailbox\"\n\t\t\t\t\t:search-query=\"query\"\n\t\t\t\t\t:bus=\"bus\" />\n\t\t\t\t<template v-else>\n\t\t\t\t\t<div class=\"app-content-list-item\">\n\t\t\t\t\t\t<SectionTitle class=\"important\" :name=\"t('mail', 'Important and unread')\" />\n\t\t\t\t\t\t<Popover trigger=\"hover focus\">\n\t\t\t\t\t\t\t<button slot=\"trigger\" :aria-label=\"t('mail', 'Important info')\" class=\"button icon-info\" />\n\t\t\t\t\t\t\t<p class=\"important-info\">\n\t\t\t\t\t\t\t\t{{ importantInfo }}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</Popover>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Mailbox\n\t\t\t\t\t\tclass=\"nameimportant\"\n\t\t\t\t\t\t:account=\"unifiedAccount\"\n\t\t\t\t\t\t:mailbox=\"unifiedInbox\"\n\t\t\t\t\t\t:search-query=\"appendToSearch('is:pi-important')\"\n\t\t\t\t\t\t:paginate=\"'manual'\"\n\t\t\t\t\t\t:is-priority-inbox=\"true\"\n\t\t\t\t\t\t:initial-page-size=\"5\"\n\t\t\t\t\t\t:collapsible=\"true\"\n\t\t\t\t\t\t:bus=\"bus\" />\n\t\t\t\t\t<SectionTitle class=\"app-content-list-item starred\" :name=\"t('mail', 'Favorites')\" />\n\t\t\t\t\t<Mailbox\n\t\t\t\t\t\tclass=\"namestarred\"\n\t\t\t\t\t\t:account=\"unifiedAccount\"\n\t\t\t\t\t\t:mailbox=\"unifiedInbox\"\n\t\t\t\t\t\t:search-query=\"appendToSearch('is:pi-starred')\"\n\t\t\t\t\t\t:paginate=\"'manual'\"\n\t\t\t\t\t\t:is-priority-inbox=\"true\"\n\t\t\t\t\t\t:initial-page-size=\"5\"\n\t\t\t\t\t\t:bus=\"bus\" />\n\t\t\t\t\t<SectionTitle class=\"app-content-list-item other\" :name=\"t('mail', 'Other')\" />\n\t\t\t\t\t<Mailbox\n\t\t\t\t\t\tclass=\"nameother\"\n\t\t\t\t\t\t:account=\"unifiedAccount\"\n\t\t\t\t\t\t:mailbox=\"unifiedInbox\"\n\t\t\t\t\t\t:open-first=\"false\"\n\t\t\t\t\t\t:search-query=\"appendToSearch('is:pi-other')\"\n\t\t\t\t\t\t:is-priority-inbox=\"true\"\n\t\t\t\t\t\t:bus=\"bus\" />\n\t\t\t\t</template>\n\t\t\t</AppContentList>\n\t\t</template>\n\t\t<NewMessageDetail v-if=\"newMessage\" />\n\t\t<Thread v-else-if=\"showThread\" @delete=\"deleteMessage\" />\n\t\t<NoMessageSelected v-else-if=\"hasEnvelopes && !isMobile\" />\n\t</AppContent>\n</template>\n\n<script>\nimport AppContent from '@nextcloud/vue/dist/Components/AppContent'\nimport AppContentList from '@nextcloud/vue/dist/Components/AppContentList'\nimport Popover from '@nextcloud/vue/dist/Components/Popover'\nimport isMobile from '@nextcloud/vue/dist/Mixins/isMobile'\nimport SectionTitle from './SectionTitle'\nimport Vue from 'vue'\n\nimport infiniteScroll from '../directives/infinite-scroll'\nimport logger from '../logger'\nimport Mailbox from './Mailbox'\nimport NewMessageDetail from './NewMessageDetail'\nimport NoMessageSelected from './NoMessageSelected'\nimport Thread from './Thread'\nimport { UNIFIED_ACCOUNT_ID, UNIFIED_INBOX_ID } from '../store/constants'\n\nexport default {\n\tname: 'MailboxThread',\n\tdirectives: {\n\t\tinfiniteScroll,\n\t},\n\tcomponents: {\n\t\tAppContent,\n\t\tAppContentList,\n\t\tMailbox,\n\t\tNewMessageDetail,\n\t\tNoMessageSelected,\n\t\tPopover,\n\t\tSectionTitle,\n\t\tThread,\n\t},\n\tmixins: [isMobile],\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tmailbox: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t// eslint-disable-next-line\n\t\t\timportantInfo: t('mail', 'Messages will automatically be marked as important based on which messages you interacted with or marked as important. In the beginning you might have to manually change the importance to teach the system, but it will improve over time.'),\n\t\t\tbus: new Vue(),\n\t\t\tsearchQuery: undefined,\n\t\t\tshortkeys: {\n\t\t\t\tdel: ['del'],\n\t\t\t\tflag: ['s'],\n\t\t\t\tnext: ['arrowright'],\n\t\t\t\tprev: ['arrowleft'],\n\t\t\t\trefresh: ['r'],\n\t\t\t\tunseen: ['u'],\n\t\t\t},\n\t\t}\n\t},\n\tcomputed: {\n\t\tunifiedAccount() {\n\t\t\treturn this.$store.getters.getAccount(UNIFIED_ACCOUNT_ID)\n\t\t},\n\t\tunifiedInbox() {\n\t\t\treturn this.$store.getters.getMailbox(UNIFIED_INBOX_ID)\n\t\t},\n\t\thasEnvelopes() {\n\t\t\treturn this.$store.getters.getEnvelopes(this.mailbox.databaseId, this.searchQuery).length > 0\n\t\t},\n\t\tshowThread() {\n\t\t\treturn (this.mailbox.isPriorityInbox === true || this.hasEnvelopes) && this.$route.name === 'message'\n\t\t},\n\t\tquery() {\n\t\t\tif (this.$route.params.filter === 'starred') {\n\t\t\t\tif (this.searchQuery) {\n\t\t\t\t\treturn this.searchQuery + ' is:starred'\n\t\t\t\t}\n\t\t\t\treturn 'is:starred'\n\t\t\t}\n\t\t\treturn this.searchQuery\n\t\t},\n\t\tnewMessage() {\n\t\t\treturn (\n\t\t\t\tthis.$route.params.threadId === 'new'\n\t\t\t\t|| this.$route.params.threadId === 'reply'\n\t\t\t\t|| this.$route.params.threadId === 'replyAll'\n\t\t\t\t|| this.$route.params.threadId === 'asNew'\n\t\t\t)\n\t\t},\n\t\tisThreadShown() {\n\t\t\treturn !!this.$route.params.threadId\n\t\t},\n\t},\n\tmethods: {\n\t\tdeleteMessage(id) {\n\t\t\tthis.bus.$emit('delete', id)\n\t\t},\n\t\tonScroll(event) {\n\t\t\tlogger.debug('scroll', { event })\n\n\t\t\tthis.bus.$emit('loadMore')\n\t\t},\n\t\tonShortcut(e) {\n\t\t\tthis.bus.$emit('shortcut', e)\n\t\t},\n\t\tappendToSearch(str) {\n\t\t\tif (this.searchQuery === undefined) {\n\t\t\t\treturn str\n\t\t\t}\n\t\t\treturn this.searchQuery + ' ' + str\n\t\t},\n\t\thideMessage() {\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'mailbox',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\tfilter: this.$route.params?.filter,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.v-popover > .trigger > {\n\tz-index: 1;\n}\n\n.icon-info {\n\tbackground-image: var(--icon-info-000);\n}\n\n.important-info {\n\tmax-width: 230px;\n\tpadding: 16px;\n}\n\n.app-content-list-item:hover {\n\tbackground: transparent;\n}\n\n.button {\n\tbackground-color: var(--color-main-background);\n\twidth: 44px;\n\theight: 44px;\n\tborder: 0;\n\tmargin-bottom: 17px;\n\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: var(--color-background-dark);\n\t}\n}\n\n#app-content-wrapper {\n\tdisplay: flex;\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailboxThread.vue?vue&type=style&index=0&id=407d295e&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./MailboxThread.vue?vue&type=template&id=407d295e&scoped=true&\"\nimport script from \"./MailboxThread.vue?vue&type=script&lang=js&\"\nexport * from \"./MailboxThread.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MailboxThread.vue?vue&type=style&index=0&id=407d295e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"407d295e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppContent',{attrs:{\"pane-config-key\":\"mail\",\"show-details\":_vm.isThreadShown},on:{\"update:showDetails\":_vm.hideMessage}},[_c('template',{slot:\"list\"},[_c('AppContentList',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.onScroll),expression:\"onScroll\"},{name:\"shortkey\",rawName:\"v-shortkey.once\",value:(_vm.shortkeys),expression:\"shortkeys\",modifiers:{\"once\":true}}],attrs:{\"infinite-scroll-immediate-check\":\"false\",\"show-details\":_vm.showThread,\"infinite-scroll-disabled\":false,\"infinite-scroll-distance\":10,\"role\":\"heading\",\"aria-level\":2},nativeOn:{\"shortkey\":function($event){return _vm.onShortcut.apply(null, arguments)}}},[(!_vm.mailbox.isPriorityInbox)?_c('Mailbox',{attrs:{\"account\":_vm.account,\"mailbox\":_vm.mailbox,\"search-query\":_vm.query,\"bus\":_vm.bus}}):[_c('div',{staticClass:\"app-content-list-item\"},[_c('SectionTitle',{staticClass:\"important\",attrs:{\"name\":_vm.t('mail', 'Important and unread')}}),_vm._v(\" \"),_c('Popover',{attrs:{\"trigger\":\"hover focus\"}},[_c('button',{staticClass:\"button icon-info\",attrs:{\"slot\":\"trigger\",\"aria-label\":_vm.t('mail', 'Important info')},slot:\"trigger\"}),_vm._v(\" \"),_c('p',{staticClass:\"important-info\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.importantInfo)+\"\\n\\t\\t\\t\\t\\t\\t\")])])],1),_vm._v(\" \"),_c('Mailbox',{staticClass:\"nameimportant\",attrs:{\"account\":_vm.unifiedAccount,\"mailbox\":_vm.unifiedInbox,\"search-query\":_vm.appendToSearch('is:pi-important'),\"paginate\":'manual',\"is-priority-inbox\":true,\"initial-page-size\":5,\"collapsible\":true,\"bus\":_vm.bus}}),_vm._v(\" \"),_c('SectionTitle',{staticClass:\"app-content-list-item starred\",attrs:{\"name\":_vm.t('mail', 'Favorites')}}),_vm._v(\" \"),_c('Mailbox',{staticClass:\"namestarred\",attrs:{\"account\":_vm.unifiedAccount,\"mailbox\":_vm.unifiedInbox,\"search-query\":_vm.appendToSearch('is:pi-starred'),\"paginate\":'manual',\"is-priority-inbox\":true,\"initial-page-size\":5,\"bus\":_vm.bus}}),_vm._v(\" \"),_c('SectionTitle',{staticClass:\"app-content-list-item other\",attrs:{\"name\":_vm.t('mail', 'Other')}}),_vm._v(\" \"),_c('Mailbox',{staticClass:\"nameother\",attrs:{\"account\":_vm.unifiedAccount,\"mailbox\":_vm.unifiedInbox,\"open-first\":false,\"search-query\":_vm.appendToSearch('is:pi-other'),\"is-priority-inbox\":true,\"bus\":_vm.bus}})]],2)],1),_vm._v(\" \"),(_vm.newMessage)?_c('NewMessageDetail'):(_vm.showThread)?_c('Thread',{on:{\"delete\":_vm.deleteMessage}}):(_vm.hasEnvelopes && !_vm.isMobile)?_c('NoMessageSelected'):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","<template>\n\t<Content v-shortkey.once=\"['c']\"\n\t\tapp-name=\"mail\"\n\t\t@shortkey.native=\"onNewMessage\">\n\t\t<Navigation />\n\t\t<MailboxThread v-if=\"activeAccount\"\n\t\t\t:account=\"activeAccount\"\n\t\t\t:mailbox=\"activeMailbox\" />\n\t</Content>\n</template>\n\n<script>\nimport Content from '@nextcloud/vue/dist/Components/Content'\n\nimport isMobile from '@nextcloud/vue/dist/Mixins/isMobile'\nimport logger from '../logger'\nimport MailboxThread from '../components/MailboxThread'\nimport Navigation from '../components/Navigation'\n\nexport default {\n\tname: 'Home',\n\tcomponents: {\n\t\tContent,\n\t\tMailboxThread,\n\t\tNavigation,\n\t},\n\tmixins: [isMobile],\n\tcomputed: {\n\t\tactiveAccount() {\n\t\t\treturn this.$store.getters.getAccount(this.activeMailbox?.accountId)\n\t\t},\n\t\tactiveMailbox() {\n\t\t\treturn this.$store.getters.getMailbox(this.$route.params.mailboxId)\n\t\t},\n\t\tmenu() {\n\t\t\treturn this.buildMenu()\n\t\t},\n\t},\n\tcreated() {\n\t\tconst accounts = this.$store.getters.accounts\n\n\t\tif (this.$route.name === 'home' && accounts.length > 1) {\n\t\t\t// Show first account\n\t\t\tconst firstAccount = accounts[0]\n\t\t\t// FIXME: this assumes that there's at least one mailbox\n\t\t\tconst firstMailbox = this.$store.getters.getMailboxes(firstAccount.id)[0]\n\n\t\t\tconsole.debug('loading first mailbox of first account', firstAccount.id, firstMailbox.databaseId)\n\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'mailbox',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: firstMailbox.databaseId,\n\t\t\t\t},\n\t\t\t})\n\t\t} else if (this.$route.name === 'home' && accounts.length === 1) {\n\t\t\tlogger.debug('the only account we have is the unified one -> show the setup page')\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'setup',\n\t\t\t})\n\t\t} else if (this.$route.name === 'mailto') {\n\t\t\tif (accounts.length === 0) {\n\t\t\t\tconsole.error('cannot handle mailto:, no accounts configured')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Show first account\n\t\t\tconst firstAccount = accounts[0]\n\t\t\t// FIXME: this assumes that there's at least one mailbox\n\t\t\tconst firstMailbox = this.$store.getters.getMailboxes(firstAccount.id)[0]\n\n\t\t\tconsole.debug('loading composer with first account and mailbox', firstAccount.id, firstMailbox.id)\n\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: firstMailbox.databaseId,\n\t\t\t\t\tthreadId: 'new',\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tto: this.$route.query.to,\n\t\t\t\t\tcc: this.$route.query.cc,\n\t\t\t\t\tbcc: this.$route.query.bcc,\n\t\t\t\t\tsubject: this.$route.query.subject,\n\t\t\t\t\tbody: this.$route.query.body,\n\t\t\t\t},\n\t\t\t})\n\t\t}\n\t},\n\tmethods: {\n\t\tonNewMessage() {\n\t\t\t// FIXME: assumes that we're on the 'message' route already\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\tthreadId: 'new',\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\thideMessage() {\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'mailbox',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\tfilter: this.$route.params?.filter,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t},\n}\n\n</script>\n\n<style lang=\"scss\" scoped>\n::v-deep .app-content-details {\n\tmargin: 0 auto;\n\tmax-width: 900px;\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex: 1 1 100%;\n\tmin-width: 0;\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=8e7f1bfa&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=8e7f1bfa&scoped=true&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&id=8e7f1bfa&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8e7f1bfa\",\n  null\n  \n)\n\nexport default component.exports","/**\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport memoize from 'lodash/fp/memoize'\nimport Axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\n\nexport const fetchAvatarUrl = (email) => {\n\tif (email === null) {\n\t\treturn Promise.resolve(undefined)\n\t}\n\n\tconst url = generateUrl('/apps/mail/api/avatars/url/{email}', {\n\t\temail,\n\t})\n\n\treturn Axios.get(url)\n\t\t.then((resp) => resp.data)\n\t\t.then((avatar) => {\n\t\t\tif (avatar.isExternal) {\n\t\t\t\treturn generateUrl('/apps/mail/api/avatars/image/{email}', {\n\t\t\t\t\temail,\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\treturn avatar.url\n\t\t\t}\n\t\t})\n\t\t.catch((err) => {\n\t\t\tif (err.response.status === 404) {\n\t\t\t\treturn undefined\n\t\t\t}\n\n\t\t\treturn Promise.reject(err)\n\t\t})\n}\n\nexport const fetchAvatarUrlMemoized = memoize(fetchAvatarUrl)\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.loading || !_vm.hasAvatar)?_c('BaseAvatar',{attrs:{\"display-name\":_vm.displayName,\"size\":_vm.size,\"disable-tooltip\":_vm.disableTooltip}}):_c('BaseAvatar',{attrs:{\"display-name\":_vm.displayName,\"url\":_vm.avatarUrl,\"size\":_vm.size,\"disable-tooltip\":_vm.disableTooltip}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Avatar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Avatar.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<BaseAvatar v-if=\"loading || !hasAvatar\"\n\t\t:display-name=\"displayName\"\n\t\t:size=\"size\"\n\t\t:disable-tooltip=\"disableTooltip\" />\n\t<BaseAvatar v-else\n\t\t:display-name=\"displayName\"\n\t\t:url=\"avatarUrl\"\n\t\t:size=\"size\"\n\t\t:disable-tooltip=\"disableTooltip\" />\n</template>\n\n<script>\nimport BaseAvatar from '@nextcloud/vue/dist/Components/Avatar'\n\nimport { fetchAvatarUrlMemoized } from '../service/AvatarService'\n\nexport default {\n\tname: 'Avatar',\n\tcomponents: {\n\t\tBaseAvatar,\n\t},\n\tprops: {\n\t\tdisplayName: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\temail: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdisableTooltip: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tsize: {\n\t\t\ttype: Number,\n\t\t\tdefault: 40,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: true,\n\t\t\tavatarUrl: undefined,\n\t\t}\n\t},\n\tcomputed: {\n\t\thasAvatar() {\n\t\t\treturn this.avatarUrl !== undefined\n\t\t},\n\t},\n\tmounted() {\n\t\tfetchAvatarUrlMemoized(this.email).then((url) => {\n\t\t\tthis.avatarUrl = url\n\t\t\tthis.loading = false\n\t\t})\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./Avatar.vue?vue&type=template&id=4d0598ca&\"\nimport script from \"./Avatar.vue?vue&type=script&lang=js&\"\nexport * from \"./Avatar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M2 13h7.8a1.4 1.4 0 001.1-.6L14 8l-3.1-4.4A1.4 1.4 0 009.8 3H2l3.4 5z\\\" stroke=\\\"#000\\\" stroke-width=\\\"2\\\"></path></svg>\""],"sourceRoot":""}